// Knockout JavaScript library v3.1.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

/**
 * React v0.11.1
 *
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

define("main/config",{title:"Global Forest Watch Commodities",urls:{gfw:"http://www.globalforestwatch.org/",blog:"http://blog.globalforestwatch.org/tag/commodities/",fires:"http://fires.globalforestwatch.org/#v=home",SPOTT:"http://www.sustainablepalmoil.org/spott/"},corsEnabledServers:["https://api-ssl.bitly.com","http://globalforestwatch.org","http://firms.modaps.eosdis.nasa.gov","http://gis-potico.wri.org","http://gfw-apis.appspot.com","http://50.18.182.188"],homeModeOptions:[{html:"<span class='less-text'>Explore the map</span>",eventName:"goToMap",display:!0,id:0,tooltip:"Explore the Map"},{html:"<span>Check out GFW Fires</span>",eventName:"goToFires",display:!1,id:1,tooltip:"Check out GFW Fires"},{html:"Read recent blogs and news about GFW Commodities",eventName:"goToBlogs",display:!1,id:2,tooltip:"Commodities News & Blogs"},{html:"Check out ZSL's Transparency Toolkit",eventName:"goToZSL",display:!1,id:3,tooltip:"ZSL Transparency Toolkit"}],homeDialog:{html:"<p>GFW Commodities is constantly undergoing site enhancements including interface redesigns based on user feedback and the incorporation of new datasets and new tools you asked for.</p><p>If you'd like to be kept informed of these kinds of updates, please <a href='http://www.wri.org/global-forest-watch-updates-and-newsletter' target='_blank'>join our mailing list</a>.</p><p>We will <strong>NEVER</strong> sell your email address to anyone, ever. We will only use your email address to send you useful newsletters about updates to the site or request your user feedback. You can unsubscribe at any time.</p>"}}),define("utils/Hasher",["dojo/hash","dojo/io-query","dojo/topic","dojo/_base/array","dojo/query"],function(e,t,n,r,i){var s,o,u,a,f;return{init:function(){var r=t.queryToObject(e()),i="home",l=this;return r.hasOwnProperty("v")?i=r.v:(r.v="home",e(t.objectToQuery(r))),s=r.v,u=r.x,a=r.y,f=r.l,o=r.f,n.subscribe("/dojo/hashchange",function(e){var i=r;r=t.queryToObject(e),(r.x!==u||r.y!==a)&&r.v=="map"&&n.publish("centerChange",u,a,f);if(r.v===s)return;s=r.v,l.changeView(s)}),i},handleHashChange:function(e,t){var n=this,r=t.x!=e.x||t.y!=e.y||t.y!=e.y;EventsController.centerChange(e),MapController.centerChange()},getHash:function(n){return n?t.queryToObject(e())[n]:t.queryToObject(e())},setHash:function(n,r){var i=t.queryToObject(e());i[n]=r,e(t.objectToQuery(i))},setHashFromState:function(n){var r=this.getHash();r.x&&r.y&&(n.x=r.x,n.y=r.y,n.l=r.l),r.lyrs&&(n.lyrs=r.lyrs),r.wiz&&(n.wiz=r.wiz),r.f&&n.v==="map"&&(n.f=r.f),e(t.objectToQuery(n))},removeKey:function(n){var r=t.queryToObject(e());r[n]&&delete r[n],e(t.objectToQuery(r))},toggleLayers:function(n){var r=t.queryToObject(e()),i,s;i=r.lyrs?r.lyrs.split(","):[],s=i.indexOf(n),s>-1?i.splice(s,1):i.push(n),i.length===0?delete r.lyrs:r.lyrs=i.join(","),e(t.objectToQuery(r))},getLayers:function(){var n=t.queryToObject(e()).lyrs;return n?n.split(","):[]},removeLayers:function(n){var r=t.queryToObject(e()),i=r.lyrs.split(",");i.splice(i.indexOf(n),1),r.lyrs=i.join(","),e(t.objectToQuery(r))},changeView:function(e){n.publish("changeView",e)}}}),define("utils/Helper",["dojo/dom-class","dojo/dom-geometry","dojo/_base/window"],function(e,t,n){return{enableLayout:function(){var r=n.body(),i=t.position(r).w;i<960&&e.add(r,"mobile")}}}),define("map/config",[],function(){var e="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/moremaps2_EN/MapServer",t="http://50.18.182.188:6080/arcgis/rest/services/ForestGain_2000_2012_map/MapServer",n="http://50.18.182.188:6080/arcgis/rest/services/ForestGain_2000_2012/ImageServer",r="http://50.18.182.188:6080/arcgis/rest/services/ForestCover_lossyear/ImageServer",i="http://gis-gfw.wri.org/arcgis/rest/services/commodities/FORMA50_2014/ImageServer",s="http://gis-potico.wri.org/arcgis/rest/services/Fires/Global_Fires/MapServer",o="http://50.18.182.188:6080/arcgis/rest/services/TreeCover2000/ImageServer",u="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/protectedareas/MapServer",a="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",f="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/primary_forest_extent/ImageServer",l="http://gis-potico.wri.org/arcgis/rest/services/suitabilitymapper/kpss_mosaic/ImageServer",c="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/oilpalmmills/MapServer",h="http://gis-gfw.wri.org/arcgis/rest/services/GFWConservation/GFW_conservation/MapServer";return{mapOptions:{basemap:"gray",centerX:114,centerY:3,zoom:5,sliderPosition:"top-right"},overlays:{id:"MapOverlaysLayer",url:a,defaultLayers:[1,5,8,11]},road:{layerId:8},river:{layerId:11},settle:{layerId:1},poBounds:{layerId:5},customGraphicsLayer:{id:"CustomFeatures",infoTemplate:{content:"<table><tr><td>Unique ID:</td><td>${WRI_ID:checkAvailable}</td></tr></table>"}},wizardGraphicsLayer:{id:"WizardTempGraphics"},adminUnitsLayer:{id:"WizardDynamicLayer",url:a,whereField:"NAME_0",layerId:7,infoTemplate:{content:"<table><tr><td>Name:</td><td>${NAME_2}</td></tr></table>"}},certificationSchemeLayer:{id:"WizardDynamicLayer",url:a,whereField:"CERT_SCHEME",layerId:13,infoTemplate:{content:"<table><tr><td>Group:</td><td>${GROUP_NAME}</td></tr><tr><td>Type:</td><td>${TYPE}</td></tr></table>"}},millPointsLayer:{id:"WizardMillPointsLayer",url:c,layerId:0,infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${Parent_Com}</td></tr><tr><td>Mill Name:</td><td>${Mill_name}</td></tr></table>"}},commercialEntitiesLayer:{id:"WizardDynamicLayer",url:a,whereField:"TYPE",layerId:13},tcc:{id:"TreeCoverChange"},gain:{id:"Gain",url:t,legendLayerId:31},gainHelper:{id:"GainHelper",url:n},loss:{id:"Loss",url:r,legendLayerId:11,defaultRange:[1,14],colormap:[[1,219,101,152]],toolsNode:"treecover_change_toolbox"},forma:{id:"FormaAlerts",url:i,legendLayerId:30,defaultRange:[1,19],colormap:[[1,255,0,197]],toolsNode:"forma_toolbox"},fires:{id:"ActiveFires",url:s,defaultLayers:[0,1,2,3],toolsNode:"fires_toolbox",infoTemplate:{content:"<table><tr><td>Latitude: </td><td>${LATITUDE}</td></tr><tr><td>Longitude: </td><td>${LONGITUDE}</td></tr><tr><td>Brightness: </td><td>${BRIGHTNESS}</td></tr><tr><td>Confidence: </td><td>${CONFIDENCE}</td></tr><tr><td>Acquisition Date: </td><td>${ACQ_DATE}</td></tr><tr><td>Acquisition Time: </td><td>${ACQ_TIME}</td></tr></table>"}},tcd:{id:"TreeCoverDensity",url:o,legendLayerId:29},primForest:{id:"PrimaryForest",url:f,legendLayerId:33},suit:{id:"CustomSuitability",url:l,legendLayerId:17,toolsNode:"suitability_toolbox"},ifl:{id:"ForestCover",url:e,layerId:24},peat:{id:"ForestCover",url:e,layerId:1},tfcs:{id:"ForestCover",url:e,layerId:23},ldcover:{id:"ForestCover",url:e,layerId:22},ldcoverIndo:{id:"ForestCover",url:e,layerId:0},ldcoverAsia:{id:"ForestCover",url:e,layerId:19},legal:{id:"ForestCover",url:e,layerId:9},oilPerm:{id:"ForestUse",url:e,layerId:32,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${TYPE}</td></tr><tr><td>Country: </td><td>${Country}</td></tr><tr><td>Group: </td><td>${GROUP_NAME:checkAvailable}</td></tr><tr><td>Certification Status: </td><td>${CERT_STAT:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha): </td><td>${AREA_HA:NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},rspoPerm:{id:"ForestUse",url:e,layerId:27,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${TYPE:checkAvailable}</td></tr><tr><td>Country:</td><td>${Country:checkAvailable}</td></tr><tr><td>Group:</td><td>${GROUP_NAME:checkAvailable}</td></tr><tr><td>Certification Status:</td><td>${CERT_STAT:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha):</td><td>${AREA_HA:NumberFormat}</td></tr><tr><td>Certificate ID:</td><td>${Certificat:checkAvailable}</td></tr><tr><td>Certificate Issue Date:</td><td>${Issued:checkAvailable}</td></tr><tr><td>Certificate Expiry Date:</td><td>${Expired:checkAvailable}</td></tr><tr><td>Mill name:</td><td>${Mill:checkAvailable}</td></tr><tr><td>Mill location:</td><td>${Location:checkAvailable}</td></tr><tr><td>Mill capacity (t/hour):</td><td>${Capacity:NumberFormat}</td></tr><tr><td>Certified CPO (mt):</td><td>${CPO:NumberFormat}</td></tr><tr><td>Certified PK (mt):</td><td>${PK:NumberFormat}</td></tr><tr><td>Estate Suppliers:</td><td>${Estate:checkAvailable}</td></tr><tr><td>Estate Area (ha):</td><td>${Estate_1:NumberFormat}</td></tr><tr><td>Outgrower Area (ha):</td><td>${Outgrowe:NumberFormat}</td></tr><tr><td>Scheme Smallholder area (ha):</td><td>${SH:NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},logPerm:{id:"ForestUse",url:e,layerId:10},minePerm:{id:"ForestUse",url:e,layerId:26},woodPerm:{id:"ForestUse",url:e,layerId:28},moratorium:{id:"ForestUse",url:e,layerId:16},mill:{id:"MillPoints",url:c,layerId:0,infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${Parent_Com}</td></tr><tr><td>Mill Name:</td><td>${Mill_name}</td></tr><tr><td>RSPO Certified:</td><td>${RSPO_Certi}</td></tr></table>"}},pal:{id:"ProtectedAreas",url:u,infoTemplate:{content:"<table><tr><td>Local Name:</td><td>${ORIG_NAME}</td></tr><tr><td>Local Designation:</td><td>${DESIG_ENG}</td></tr><tr><td>WDPA ID:</td><td>${WDPAID}</td></tr><tr><td>Source:</td><td>${Source:checkAvailable}</td></tr></table>"}},biodiversity:{id:"Biodiversity",url:h,layerId:1},palHelper:{id:"ProtectedAreasHelper",url:e,layerId:25},concession:{url:e},opsd:{id:"AgriculturalSuitability",url:e,layerId:12},cons:{id:"AgriculturalSuitability",url:e,layerId:2},elev:{id:"AgriculturalSuitability",url:e,layerId:3},slope:{id:"AgriculturalSuitability",url:e,layerId:4},rain:{id:"AgriculturalSuitability",url:e,layerId:5},soilDr:{id:"AgriculturalSuitability",url:e,layerId:6},soilDe:{id:"AgriculturalSuitability",url:e,layerId:7},soilAc:{id:"AgriculturalSuitability",url:e,layerId:8},soilTy:{id:"AgriculturalSuitability",url:e,layerId:14},legendLayer:{id:"LegendLayer",url:e},layersUI:[{key:"tcc",title:"Tree Cover Change",subtitle:"(annual, 30m, global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-change",type:"radio",layerType:"none",children:[{key:"loss",title:"Loss",subtitle:"",filter:"forest-change",type:"check",layerType:"tiled"},{key:"gain",title:"Gain",subtitle:"",filter:"forest-change",type:"check",layerType:"image"}],infoDivClass:"forest-change-tree-cover-change"},{key:"forma",title:"FORMA Alerts",subtitle:"(monthly, 500m, humid tropics)",filter:"forest-change",type:"radio",layerType:"image",infoDivClass:"forest-change-forma-alerts"},{key:"fires",title:"Active Fires",subtitle:"(past 7 days, 1km, global; NASA)",filter:"forest-change",type:"radio",layerType:"dynamic",infoDivClass:"forest-change-nasa-active-fires"},{key:"none_fc",title:"None",subtitle:"",filter:"forest-change",type:"radio",layerType:"none"},{key:"tcd",title:"Tree Cover Density",subtitle:"(year 2000, 30m global)",filter:"forest-cover",type:"radio",layerType:"image",infoDivClass:"forest-and-land-cover-tree-cover-density"},{key:"ifl",title:"Intact Forest Landscapes",subtitle:"(year 2000, 30m global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-intact-forest-landscape"},{key:"peat",title:"Peat Lands",subtitle:"(year 2002, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-peat-lands"},{key:"tfcs",title:"Tropical Carbon Stocks",subtitle:"(early 2000s, 1km, tropics)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-carbon-stocks"},{key:"primForest",title:"Primary Forests",subtitle:"(2000, 30m, Indonesia)",filter:"forest-cover",type:"radio",layerType:"image",infoDivClass:"forest-and-land-cover-primary-forest"},{key:"ldcover",title:"Land Cover",subtitle:"(mid 2000s, global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-global"},{key:"ldcoverIndo",title:"Land Cover Indonesia",subtitle:"(mid 2000s, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-indonesia"},{key:"ldcoverAsia",title:"Land Cover Southeast Asia",subtitle:"(mid 2000s, Southeast Asia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-south-east-asia"},{key:"legal",title:"Legal Classifications",subtitle:"(year 2010, select countries)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-legal-classifications"},{key:"none_fco",title:"None",subtitle:"",filter:"forest-cover",type:"radio",layerType:"none"},{key:"oilPerm",title:"Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-oil-palm"},{key:"rspoPerm",title:"RSPO Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-rspo-consessions"},{key:"logPerm",title:"Logging",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-logging"},{key:"minePerm",title:"Mining",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mining"},{key:"woodPerm",title:"Wood Fiber Plantations",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-wood-fiber-plantation"},{key:"mill",title:"RSPO Mills",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mill-points"},{key:"moratorium",title:"Indonesia Moratorium",subtitle:"(IMM V7/V6, 2014, Indonesia)",filter:"forest-use",type:"check",layerType:"dynamic"},{key:"pal",title:"Protected Areas",subtitle:"(varies, global)",filter:"conservation",type:"check",layerType:"tiled",infoDivClass:"conservation-protected-areas"},{key:"biodiversity",title:"Biodiversity Hotspots",subtitle:"(year 2011, global)",filter:"conservation",type:"check",layerType:"dynamic",infoDivClass:"conservation-biodiversity-hotspots"},{key:"suit",title:"Custom Suitability Map",subtitle:"",filter:"agro-suitability",type:"check",layerType:"image",infoDivClass:"suitability-custom-suitability-mapper"},{key:"opsd",title:"WRI Suitability Standard - Oil Palm",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-wri-standard-suitability"},{key:"cons",title:"Conservation Areas",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-conservation-areas"},{key:"elev",title:"Elevation",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-elevation"},{key:"slope",title:"Slope",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-slope"},{key:"rain",title:"Rainfall",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-rainfall"},{key:"soilDr",title:"Soil Drainage",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-drainage"},{key:"soilDe",title:"Soil Depth",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-depth"},{key:"soilAc",title:"Soil Acidity",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-acidity"},{key:"soilTy",title:"Soil Type",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-type"},{key:"none_agro",title:"None",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"none"}],treeCoverLossSlider:{baseYear:2e3,numYears:12},customSuitabilityDefaults:{computeBinaryRaster:[{id:0,values:"2,3,5,8,9,11,15,17,18",classCount:32,operator:"in",name:"LCInpR"},{id:1,values:"0",classCount:32,operator:"in",name:"PeatInpR"},{id:2,values:"30",operator:"lt",name:"SlopeInpR"},{id:3,values:"1000",operator:"gt",name:"ConsInpR"},{id:4,values:"100",operator:"gt",name:"WaterInpR"},{id:5,values:"1000",operator:"lt",name:"ElevInpR"},{id:6,values:"1500,6000",operator:"between",name:"RainfallInpR"},{id:7,values:"2,3,4,99",classCount:32,operator:"in",name:"SDrainInpR"},{id:8,values:"3,4,5,6,7,99",classCount:32,operator:"in",name:"SDepthInpR"},{id:9,values:"1,2,3,4,5,6,7,99",classCount:32,operator:"in",name:"SAcidInpR"},{id:10,values:"0,1,2,3,5,6,7,8,9",classCount:32,operator:"in",name:"STypeInpR"}]},checkboxItems:[{node:"shrub-check",name:"landcover-checkbox",value:"2",checked:!0},{node:"bareland-check",name:"landcover-checkbox",value:"3",checked:!0},{node:"secondary-forest-check",name:"landcover-checkbox",value:"4",checked:!1},{node:"dryland-agro-check",name:"landcover-checkbox",value:"5",checked:!0},{node:"water-check",name:"landcover-checkbox",value:"6",checked:!1},{node:"mining-check",name:"landcover-checkbox",value:"7",checked:!1},{node:"plantation-forest-check",name:"landcover-checkbox",value:"8",checked:!0},{node:"estate-crop-check",name:"landcover-checkbox",value:"9",checked:!0},{node:"swamp-shrub-check",name:"landcover-checkbox",value:"10",checked:!1},{node:"primary-swamp-check",name:"landcover-checkbox",value:"12",checked:!1},{node:"secondary-swamp-check",name:"landcover-checkbox",value:"13",checked:!1},{node:"settlement-check",name:"landcover-checkbox",value:"14",checked:!1},{node:"grassland-check",name:"landcover-checkbox",value:"15",checked:!0},{node:"secondary-mangrove-check",name:"landcover-checkbox",value:"16",checked:!1},{node:"dryland-check",name:"landcover-checkbox",value:"17",checked:!0},{node:"rice-check",name:"landcover-checkbox",value:"18",checked:!0},{node:"fish-check",name:"landcover-checkbox",value:"19",checked:!1},{node:"transmigration-check",name:"landcover-checkbox",value:"20",checked:!1},{node:"swamp-check",name:"landcover-checkbox",value:"21",checked:!1},{node:"primary-mangrove-check",name:"landcover-checkbox",value:"22",checked:!1},{node:"airport-check",name:"landcover-checkbox",value:"23",checked:!1},{node:"inceptisol-check",name:"soil-type-checkbox",value:"1",checked:!0},{node:"oxisol-check",name:"soil-type-checkbox",value:"7",checked:!0},{node:"alfisol-check",name:"soil-type-checkbox",value:"5",checked:!0},{node:"ultisol-check",name:"soil-type-checkbox",value:"2",checked:!0},{node:"spodosol-check",name:"soil-type-checkbox",value:"8",checked:!0},{node:"entisol-check",name:"soil-type-checkbox",value:"3",checked:!0},{node:"histosol-check",name:"soil-type-checkbox",value:"4",checked:!1},{node:"mollisol-check",name:"soil-type-checkbox",value:"9",checked:!0},{node:"rock-check",name:"soil-type-checkbox",value:"10",checked:!1}],suitabilitySliderTooltips:{peat:{0:"0 cm",1:"Less than 50 cm",2:"50 - 100 cm",3:"100- 200 cm"},rainfall:{label:"mm/yr"},drainage:{1:"very poor",2:"poor, imperfect",3:"well, moderately well",4:"excessive, slightly excessive"},depth:{1:"none, very shallow (0-10 cm)",2:"shallow (11-25 cm)",3:"mod shallow (26-50 cm)",4:"mod deep (51-75 cm)",5:"deep (76-100 cm)",6:"very deep (101-150 cm)",7:"extremely deep (> 150 cm)"},acidity:{1:"excessively acid (< 4.0)",2:"extremely acid (4.0 - 4.5)",3:"very strongly acid (4.6 - 5.0)",4:"strongly acid (5.1 - 5.5)",5:"moderately acid (5.6 - 6.0)",6:"slightly acid (6.1 - 6.5)",7:"neutral (6.6 - 7.3)",8:"slightly alkaline (7.4 - 7.8)"},treeCover:{0:"2001",1:"2002",2:"2003",3:"2004",4:"2005",5:"2006",6:"2007",7:"2008",8:"2009",9:"2010",10:"2011",11:"2012"}},suitabilityExportDialog:{title:"Export Suitability Settings and GeoTiff",instruction:"The resolution downloaded for the Suitability Map is based on your current zoom extent. For a higher resolution download, zoom in closer to your area of interest."},simpleLegends:{concessions:{url:a+"/legend?f=json",parentId:"legend-content",title:"Concessions",id:"concessions-legend",layers:[{id:13}]},road:{url:a+"/legend?f=json",parentId:"legend-content",id:"roads-legend",title:"Roads",layers:[{id:9,labels:["Primary"]},{id:10,labels:["Secondary"]}]},settle:{url:a+"/legend?f=json",parentId:"legend-content",id:"settle-legend",title:"Settlements",layers:[{id:2},{id:3,labels:["Cities and Towns"]}]},poBounds:{url:a+"/legend?f=json",parentId:"legend-content",id:"po-bounds-legend",title:"Political Boundaries",layers:[{id:6,labels:["Admin Level 1"]},{id:7,labels:["Admin Level 2"]}]}}}}),function(){(function(p){var A=this||(0,eval)("this"),w=A.document,K=A.navigator,t=A.jQuery,C=A.JSON;(function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):"function"==typeof define&&define.amd?define("knockout",["exports"],e):e(A.ko={})})(function(e){function n(e,t){return null===e||typeof e in u?e===t:!1}function r(e,t){var n;return function(){n||(n=setTimeout(function(){n=p,e()},t))}}function i(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function s(e,t,n,r){o.d[e]={init:function(e,i,s,u,a){var f,l;return o.ba(function(){var s=o.a.c(i()),u=!n!=!s,c=!l;if(c||t||u!==f)c&&o.ca.fa()&&(l=o.a.lb(o.e.childNodes(e),!0)),u?(c||o.e.U(e,o.a.lb(l)),o.gb(r?r(a,s):a,e)):o.e.da(e),f=u},null,{G:e}),{controlsDescendantBindings:!0}}},o.g.aa[e]=!1,o.e.Q[e]=!0}var o="undefined"!=typeof e?e:{};o.b=function(e,t){for(var n=e.split("."),r=o,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},o.s=function(e,t,n){e[t]=n},o.version="3.1.0",o.b("version",o.version),o.a=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r(e,t){return e.__proto__=t,e}var i={__proto__:[]}instanceof Array,s={},u={};s[K&&/Firefox\/2/i.test(K.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],s.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),e(s,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)u[t[n]]=e});var a={propertychange:!0},f=w&&function(){for(var e=3,t=w.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return 4<e?e:p}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},l:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hb:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r))return e[r];return null},ma:function(e,t){var n=o.a.l(e,t);0<n?e.splice(n,1):0===n&&e.shift()},ib:function(e){e=e||[];for(var t=[],n=0,r=e.length;n<r;n++)0>o.a.l(t,e[n])&&t.push(e[n]);return t},ya:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r],r));return n},la:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)t(e[r],r)&&n.push(e[r]);return n},$:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},Y:function(e,t,n){var r=o.a.l(o.a.Sa(e),t);0>r?n&&e.push(t):n||e.splice(r,1)},na:i,extend:n,ra:r,sa:i?r:n,A:e,Oa:function(e,t){if(!e)return e;var n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},Fa:function(e){for(;e.firstChild;)o.removeNode(e.firstChild)},ec:function(e){e=o.a.R(e);for(var t=w.createElement("div"),n=0,r=e.length;n<r;n++)t.appendChild(o.M(e[n]));return t},lb:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var s=e[n].cloneNode(!0);i.push(t?o.M(s):s)}return i},U:function(e,t){o.a.Fa(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},Bb:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,s=0,u=t.length;s<u;s++)i.insertBefore(t[s],r);s=0;for(u=n.length;s<u;s++)o.removeNode(n[s])}},ea:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.shift();if(1<e.length){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)if(e.push(n),n=n.nextSibling,!n)return;e.push(r)}}return e},Db:function(e,t){7>f?e.setAttribute("selected",t):e.selected=t},ta:function(e){return null===e||e===p?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oc:function(e,t){for(var n=[],r=(e||"").split(t),i=0,s=r.length;i<s;i++){var u=o.a.ta(r[i]);""!==u&&n.push(u)}return n},kc:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},Sb:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(e)&16);for(;e&&e!=t;)e=e.parentNode;return!!e},Ea:function(e){return o.a.Sb(e,e.ownerDocument.documentElement)},eb:function(e){return!!o.a.hb(e,o.a.Ea)},B:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},q:function(e,n,r){var i=f&&a[n];if(!i&&t)t(e).bind(n,r);else if(i||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var s=function(t){r.call(e,t)},u="on"+n;e.attachEvent(u,s),o.a.u.ja(e,function(){e.detachEvent(u,s)})}else e.addEventListener(n,r,!1)},ha:function(e,n){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;"input"===o.a.B(e)&&e.type&&"click"==n.toLowerCase()?(r=e.type,r="checkbox"==r||"radio"==r):r=!1;if(t&&!r)t(e).trigger(n);else if("function"==typeof w.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");r=w.createEvent(u[n]||"HTMLEvents"),r.initEvent(n,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+n)}},c:function(e){return o.v(e)?e():e},Sa:function(e){return o.v(e)?e.o():e},ua:function(e,t,n){if(t){var r=/\S+/g,i=e.className.match(r)||[];o.a.r(t.match(r),function(e){o.a.Y(i,e,n)}),e.className=i.join(" ")}},Xa:function(e,t){var n=o.a.c(t);if(null===n||n===p)n="";var r=o.e.firstChild(e);!r||3!=r.nodeType||o.e.nextSibling(r)?o.e.U(e,[e.ownerDocument.createTextNode(n)]):r.data=n,o.a.Vb(e)},Cb:function(e,t){e.name=t;if(7>=f)try{e.mergeAttributes(w.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},Vb:function(e){9<=f&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},Tb:function(e){if(f){var t=e.style.width;e.style.width=0,e.style.width=t}},ic:function(e,t){e=o.a.c(e),t=o.a.c(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},R:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},mc:6===f,nc:7===f,oa:f,ob:function(e,t){for(var n=o.a.R(e.getElementsByTagName("input")).concat(o.a.R(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],s=n.length-1;0<=s;s--)r(n[s])&&i.push(n[s]);return i},fc:function(e){return"string"==typeof e&&(e=o.a.ta(e))?C&&C.parse?C.parse(e):(new Function("return "+e))():null},Ya:function(e,t,n){if(!C||!C.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return C.stringify(o.a.c(e),t,n)},gc:function(t,n,r){r=r||{};var i=r.params||{},s=r.includeFields||this.mb,u=t;if("object"==typeof t&&"form"===o.a.B(t))for(var u=t.action,a=s.length-1;0<=a;a--)for(var f=o.a.ob(t,s[a]),l=f.length-1;0<=l;l--)i[f[l].name]=f[l].value;n=o.a.c(n);var c=w.createElement("form");c.style.display="none",c.action=u,c.method="post";for(var h in n)t=w.createElement("input"),t.name=h,t.value=o.a.Ya(o.a.c(n[h])),c.appendChild(t);e(i,function(e,t){var n=w.createElement("input");n.name=e,n.value=t,c.appendChild(n)}),w.body.appendChild(c),r.submitter?r.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),o.b("utils",o.a),o.b("utils.arrayForEach",o.a.r),o.b("utils.arrayFirst",o.a.hb),o.b("utils.arrayFilter",o.a.la),o.b("utils.arrayGetDistinctValues",o.a.ib),o.b("utils.arrayIndexOf",o.a.l),o.b("utils.arrayMap",o.a.ya),o.b("utils.arrayPushAll",o.a.$),o.b("utils.arrayRemoveItem",o.a.ma),o.b("utils.extend",o.a.extend),o.b("utils.fieldsIncludedWithJsonPost",o.a.mb),o.b("utils.getFormFields",o.a.ob),o.b("utils.peekObservable",o.a.Sa),o.b("utils.postJson",o.a.gc),o.b("utils.parseJson",o.a.fc),o.b("utils.registerEventHandler",o.a.q),o.b("utils.stringifyJson",o.a.Ya),o.b("utils.range",o.a.ic),o.b("utils.toggleDomNodeCssClass",o.a.ua),o.b("utils.triggerEvent",o.a.ha),o.b("utils.unwrapObservable",o.a.c),o.b("utils.objectForEach",o.a.A),o.b("utils.addOrRemoveItem",o.a.Y),o.b("unwrap",o.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);return e=n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),o.a.f=new function(){function e(e,i){var s=e[n];if(!s||"null"===s||!r[s]){if(!i)return p;s=e[n]="ko"+t++,r[s]={}}return r[s]}var t=0,n="__ko__"+(new Date).getTime(),r={};return{get:function(t,n){var r=e(t,!1);return r===p?p:r[n]},set:function(t,n,r){if(r!==p||e(t,!1)!==p)e(t,!0)[n]=r},clear:function(e){var t=e[n];return t?(delete r[t],e[n]=null,!0):!1},L:function(){return t++ +n}}},o.b("utils.domData",o.a.f),o.b("utils.domData.clear",o.a.f.clear),o.a.u=new function(){function e(e,t){var n=o.a.f.get(e,r);return n===p&&t&&(n=[],o.a.f.set(e,r,n)),n}function n(t){var r=e(t,!1);if(r)for(var r=r.slice(0),i=0;i<r.length;i++)r[i](t);o.a.f.clear(t),o.a.u.cleanExternalData(t);if(s[t.nodeType])for(r=t.firstChild;t=r;)r=t.nextSibling,8===t.nodeType&&n(t)}var r=o.a.f.L(),i={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{ja:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},Ab:function(t,n){var i=e(t,!1);i&&(o.a.ma(i,n),0==i.length&&o.a.f.set(t,r,p))},M:function(e){if(i[e.nodeType]&&(n(e),s[e.nodeType])){var t=[];o.a.$(t,e.getElementsByTagName("*"));for(var r=0,u=t.length;r<u;r++)n(t[r])}return e},removeNode:function(e){o.M(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){t&&"function"==typeof t.cleanData&&t.cleanData([e])}}},o.M=o.a.u.M,o.removeNode=o.a.u.removeNode,o.b("cleanNode",o.M),o.b("removeNode",o.removeNode),o.b("utils.domNodeDisposal",o.a.u),o.b("utils.domNodeDisposal.addDisposeCallback",o.a.u.ja),o.b("utils.domNodeDisposal.removeDisposeCallback",o.a.u.Ab),function(){o.a.Qa=function(e){var n;if(t){if(t.parseHTML)n=t.parseHTML(e)||[];else if((n=t.clean([e]))&&n[0]){for(e=n[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var r=o.a.ta(e).toLowerCase();n=w.createElement("div"),r=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+r[1]+e+r[2]+"</div>";for("function"==typeof A.innerShiv?n.appendChild(A.innerShiv(e)):n.innerHTML=e;r[0]--;)n=n.lastChild;n=o.a.R(n.lastChild.childNodes)}return n},o.a.Va=function(e,n){o.a.Fa(e),n=o.a.c(n);if(null!==n&&n!==p)if("string"!=typeof n&&(n=n.toString()),t)t(e).html(n);else for(var r=o.a.Qa(n),i=0;i<r.length;i++)e.appendChild(r[i])}}(),o.b("utils.parseHtmlFragment",o.a.Qa),o.b("utils.setHtml",o.a.Va),o.w=function(){function e(t,n){if(t)if(8==t.nodeType){var r=o.w.xb(t.nodeValue);null!=r&&n.push({Rb:t,cc:r})}else if(1==t.nodeType)for(var r=0,i=t.childNodes,s=i.length;r<s;r++)e(i[r],n)}var t={};return{Na:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[n]=e,"<!--[ko_memo:"+n+"]-->"},Hb:function(e,n){var r=t[e];if(r===p)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return r.apply(null,n||[]),!0}finally{delete t[e]}},Ib:function(t,n){var r=[];e(t,r);for(var i=0,s=r.length;i<s;i++){var u=r[i].Rb,a=[u];n&&o.a.$(a,n),o.w.Hb(r[i].cc,a),u.nodeValue="",u.parentNode&&u.parentNode.removeChild(u)}},xb:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),o.b("memoization",o.w),o.b("memoization.memoize",o.w.Na),o.b("memoization.unmemoize",o.w.Hb),o.b("memoization.parseMemoText",o.w.xb),o.b("memoization.unmemoizeDomNodeAndDescendants",o.w.Ib),o.Ga={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return o.h({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},rateLimit:function(e,t){var n,s,o;"number"==typeof t?n=t:(n=t.timeout,s=t.method),o="notifyWhenChangesStop"==s?i:r,e.Ma(function(e){return o(e,n)})},notify:function(e,t){e.equalityComparer="always"==t?null:n}};var u={"undefined":1,"boolean":1,number:1,string:1};o.b("extenders",o.Ga),o.Fb=function(e,t,n){this.target=e,this.za=t,this.Qb=n,this.sb=!1,o.s(this,"dispose",this.F)},o.Fb.prototype.F=function(){this.sb=!0,this.Qb()},o.N=function(){o.a.sa(this,o.N.fn),this.H={}};var a="change";e={V:function(e,t,n){var r=this;n=n||a;var i=new o.Fb(r,t?e.bind(t):e,function(){o.a.ma(r.H[n],i)});return r.o&&r.o(),r.H[n]||(r.H[n]=[]),r.H[n].push(i),i},notifySubscribers:function(e,t){t=t||a;if(this.qb(t))try{o.k.jb();for(var n=this.H[t].slice(0),r=0,i;i=n[r];++r)i.sb||i.za(e)}finally{o.k.end()}},Ma:function(e){var t=this,n=o.v(t),r,i,s;t.ia||(t.ia=t.notifySubscribers,t.notifySubscribers=function(e,n){n&&n!==a?"beforeChange"===n?t.bb(e):t.ia(e,n):t.cb(e)});var u=e(function(){n&&s===t&&(s=t()),r=!1,t.Ka(i,s)&&t.ia(i=s)});t.cb=function(e){r=!0,s=e,u()},t.bb=function(e){r||(i=e,t.ia(e,"beforeChange"))}},qb:function(e){return this.H[e]&&this.H[e].length},Wb:function(){var e=0;return o.a.A(this.H,function(t,n){e+=n.length}),e},Ka:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&o.a.A(e,function(e,n){var r=o.Ga[e];"function"==typeof r&&(t=r(t,n)||t)}),t}},o.s(e,"subscribe",e.V),o.s(e,"extend",e.extend),o.s(e,"getSubscriptionsCount",e.Wb),o.a.na&&o.a.ra(e,Function.prototype),o.N.fn=e,o.tb=function(e){return null!=e&&"function"==typeof e.V&&"function"==typeof e.notifySubscribers},o.b("subscribable",o.N),o.b("isSubscribable",o.tb),o.ca=o.k=function(){function e(e){n.push(r),r=e}function t(){r=n.pop()}var n=[],r,i=0;return{jb:e,end:t,zb:function(e){if(r){if(!o.tb(e))throw Error("Only subscribable things can act as dependencies");r.za(e,e.Kb||(e.Kb=++i))}},t:function(n,r,i){try{return e(),n.apply(r,i||[])}finally{t()}},fa:function(){if(r)return r.ba.fa()},pa:function(){if(r)return r.pa}}}(),o.b("computedContext",o.ca),o.b("computedContext.getDependenciesCount",o.ca.fa),o.b("computedContext.isInitial",o.ca.pa),o.m=function(e){function t(){return 0<arguments.length?(t.Ka(n,arguments[0])&&(t.P(),n=arguments[0],t.O()),this):(o.k.zb(t),n)}var n=e;return o.N.call(t),o.a.sa(t,o.m.fn),t.o=function(){return n},t.O=function(){t.notifySubscribers(n)},t.P=function(){t.notifySubscribers(n,"beforeChange")},o.s(t,"peek",t.o),o.s(t,"valueHasMutated",t.O),o.s(t,"valueWillMutate",t.P),t},o.m.fn={equalityComparer:n};var f=o.m.hc="__ko_proto__";o.m.fn[f]=o.m,o.a.na&&o.a.ra(o.m.fn,o.N.fn),o.Ha=function(e,t){return null===e||e===p||e[f]===p?!1:e[f]===t?!0:o.Ha(e[f],t)},o.v=function(e){return o.Ha(e,o.m)},o.ub=function(e){return"function"==typeof e&&e[f]===o.m||"function"==typeof e&&e[f]===o.h&&e.Yb?!0:!1},o.b("observable",o.m),o.b("isObservable",o.v),o.b("isWriteableObservable",o.ub),o.T=function(e){e=e||[];if("object"==typeof e&&"length"in e)return e=o.m(e),o.a.sa(e,o.T.fn),e.extend({trackArrayChanges:!0});throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},o.T.fn={remove:function(e){for(var t=this.o(),n=[],r="function"!=typeof e||o.v(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var s=t[i];r(s)&&(0===n.length&&this.P(),n.push(s),t.splice(i,1),i--)}return n.length&&this.O(),n},removeAll:function(e){if(e===p){var t=this.o(),n=t.slice(0);return this.P(),t.splice(0,t.length),this.O(),n}return e?this.remove(function(t){return 0<=o.a.l(e,t)}):[]},destroy:function(e){var t=this.o(),n="function"!=typeof e||o.v(e)?function(t){return t===e}:e;this.P();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=!0);this.O()},destroyAll:function(e){return e===p?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=o.a.l(e,t)}):[]},indexOf:function(e){var t=this();return o.a.l(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.P(),this.o()[n]=t,this.O())}},o.a.r("pop push reverse shift sort splice unshift".split(" "),function(e){o.T.fn[e]=function(){var t=this.o();return this.P(),this.kb(t,e,arguments),t=t[e].apply(t,arguments),this.O(),t}}),o.a.r(["slice"],function(e){o.T.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),o.a.na&&o.a.ra(o.T.fn,o.m.fn),o.b("observableArray",o.T);var l="arrayChange";o.Ga.trackArrayChanges=function(e){function t(){if(!n){n=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==a||++i,t.apply(this,arguments)};var s=[].concat(e.o()||[]);r=null,e.V(function(t){t=[].concat(t||[]);if(e.qb(l)){var n;if(!r||1<i)r=o.a.Aa(s,t,{sparse:!0});n=r,n.length&&e.notifySubscribers(n,l)}s=t,r=null,i=0})}}if(!e.kb){var n=!1,r=null,i=0,s=e.V;e.V=e.subscribe=function(e,n,r){return r===l&&t(),s.apply(this,arguments)},e.kb=function(e,t,s){function u(e,t,n){return a[a.length]={status:e,value:t,index:n}}if(n&&!i){var a=[],f=e.length,l=s.length,c=0;switch(t){case"push":c=f;case"unshift":for(t=0;t<l;t++)u("added",s[t],c+t);break;case"pop":c=f-1;case"shift":f&&u("deleted",e[c],c);break;case"splice":t=Math.min(Math.max(0,0>s[0]?f+s[0]:s[0]),f);for(var f=1===l?f:Math.min(t+(s[1]||0),f),l=t+l-2,c=Math.max(f,l),h=[],p=[],v=2;t<c;++t,++v)t<f&&p.push(u("deleted",e[t],t)),t<l&&h.push(u("added",s[v],t));o.a.nb(p,h);break;default:return}r=a}}}},o.ba=o.h=function(e,t,n){function r(){p=!0,o.a.A(w,function(e,t){t.F()}),w={},E=0,l=!1}function i(){var e=u.throttleEvaluation;e&&0<=e?(clearTimeout(S),S=setTimeout(s,e)):u.wa?u.wa():s()}function s(){if(!c&&!p){if(y&&y()){if(!h){b();return}}else h=!1;c=!0;try{var e=w,n=E;o.k.jb({za:function(t,r){p||(n&&e[r]?(w[r]=e[r],++E,delete e[r],--n):w[r]||(w[r]=t.V(i),++E))},ba:u,pa:!E}),w={},E=0;try{var r=t?d.call(t):d()}finally{o.k.end(),n&&o.a.A(e,function(e,t){t.F()}),l=!1}u.Ka(f,r)&&(u.notifySubscribers(f,"beforeChange"),f=r,u.wa&&!u.throttleEvaluation||u.notifySubscribers(f))}finally{c=!1}E||b()}}function u(){if(0<arguments.length){if("function"!=typeof v)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return v.apply(t,arguments),this}return l&&s(),o.k.zb(u),f}function a(){return l||0<E}var f,l=!0,c=!1,h=!1,p=!1,d=e;d&&"object"==typeof d?(n=d,d=n.read):(n=n||{},d||(d=n.read));if("function"!=typeof d)throw Error("Pass a function that returns the value of the ko.computed");var v=n.write,m=n.disposeWhenNodeIsRemoved||n.G||null,g=n.disposeWhen||n.Da,y=g,b=r,w={},E=0,S=null;t||(t=n.owner),o.N.call(u),o.a.sa(u,o.h.fn),u.o=function(){return l&&!E&&s(),f},u.fa=function(){return E},u.Yb="function"==typeof n.write,u.F=function(){b()},u.ga=a;var x=u.Ma;return u.Ma=function(e){x.call(u,e),u.wa=function(){u.bb(f),l=!0,u.cb(u)}},o.s(u,"peek",u.o),o.s(u,"dispose",u.F),o.s(u,"isActive",u.ga),o.s(u,"getDependenciesCount",u.fa),m&&(h=!0,m.nodeType&&(y=function(){return!o.a.Ea(m)||g&&g()})),!0!==n.deferEvaluation&&s(),m&&a()&&m.nodeType&&(b=function(){o.a.u.Ab(m,b),r()},o.a.u.ja(m,b)),u},o.$b=function(e){return o.Ha(e,o.h)},e=o.m.hc,o.h[e]=o.m,o.h.fn={equalityComparer:n},o.h.fn[e]=o.h,o.a.na&&o.a.ra(o.h.fn,o.N.fn),o.b("dependentObservable",o.h),o.b("computed",o.h),o.b("isComputed",o.$b),function(){function e(r,i,s){s=s||new n,r=i(r);if("object"!=typeof r||null===r||r===p||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var o=r instanceof Array?[]:{};return s.save(r,o),t(r,function(t){var n=i(r[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":o[t]=n;break;case"object":case"undefined":var u=s.get(n);o[t]=u!==p?u:e(n,i,s)}}),o}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function n(){this.keys=[],this.ab=[]}o.Gb=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;o.v(e)&&10>t;t++)e=e();return e})},o.toJSON=function(e,t,n){return e=o.Gb(e),o.a.Ya(e,t,n)},n.prototype={save:function(e,t){var n=o.a.l(this.keys,e);0<=n?this.ab[n]=t:(this.keys.push(e),this.ab.push(t))},get:function(e){return e=o.a.l(this.keys,e),0<=e?this.ab[e]:p}}}(),o.b("toJS",o.Gb),o.b("toJSON",o.toJSON),function(){o.i={p:function(e){switch(o.a.B(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?o.a.f.get(e,o.d.options.Pa):7>=o.a.oa?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?o.i.p(e.options[e.selectedIndex]):p;default:return e.value}},X:function(e,t,n){switch(o.a.B(e)){case"option":switch(typeof t){case"string":o.a.f.set(e,o.d.options.Pa,p),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:o.a.f.set(e,o.d.options.Pa,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":if(""===t||null===t)t=p;for(var r=-1,i=0,s=e.options.length,u;i<s;++i)if(u=o.i.p(e.options[i]),u==t||""==u&&t===p){r=i;break}if(n||0<=r||t===p&&1<e.size)e.selectedIndex=r;break;default:if(null===t||t===p)t="";e.value=t}}}}(),o.b("selectExtensions",o.i),o.b("selectExtensions.readValue",o.i.p),o.b("selectExtensions.writeValue",o.i.X),o.g=function(){function e(e){e=o.a.ta(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t=[],n=e.match(r),u,a,f=0;if(n){n.push(",");for(var l=0,c;c=n[l];++l){var h=c.charCodeAt(0);if(44===h){if(0>=f){u&&t.push(a?{key:u,value:a.join("")}:{unknown:u}),u=a=f=0;continue}}else if(58===h){if(!a)continue}else if(47===h&&l&&1<c.length)(h=n[l-1].match(i))&&!s[h[0]]&&(e=e.substr(e.indexOf(c)+1),n=e.match(r),n.push(","),l=-1,c="/");else if(40===h||123===h||91===h)++f;else if(41===h||125===h||93===h)--f;else if(!u&&!a){u=34===h||39===h?c.slice(1,-1):c;continue}a?a.push(c):a=[c]}}return t}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,s={"in":1,"return":1,"typeof":1},u={};return{aa:[],W:u,Ra:e,qa:function(r,i){function s(e,r){var i,c=o.getBindingHandler(e);if(c&&c.preprocess?r=c.preprocess(r,e,s):1){if(c=u[e])i=r,0<=o.a.l(t,i)?i=!1:(c=i.match(n),i=null===c?!1:c[1]?"Object("+c[1]+")"+c[2]:i),c=i;c&&f.push("'"+e+"':function(_z){"+i+"=_z}"),l&&(r="function(){return "+r+" }"),a.push("'"+e+"':"+r)}}i=i||{};var a=[],f=[],l=i.valueAccessors,c="string"==typeof r?e(r):r;return o.a.r(c,function(e){s(e.key||e.unknown,e.value)}),f.length&&s("_ko_property_writers","{"+f.join(",")+" }"),a.join(",")},bc:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},va:function(e,t,n,r,i){e&&o.v(e)?!o.ub(e)||i&&e.o()===r||e(r):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](r)}}}(),o.b("expressionRewriting",o.g),o.b("expressionRewriting.bindingRewriteValidators",o.g.aa),o.b("expressionRewriting.parseObjectLiteral",o.g.Ra),o.b("expressionRewriting.preProcessBindings",o.g.qa),o.b("expressionRewriting._twoWayBindings",o.g.W),o.b("jsonExpressionRewriting",o.g),o.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",o.g.qa),function(){function e(e){return 8==e.nodeType&&s.test(i?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&u.test(i?e.text:e.nodeValue)}function n(n,r){for(var i=n,s=1,o=[];i=i.nextSibling;){if(t(i)&&(s--,0===s))return o;o.push(i),e(i)&&s++}if(!r)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var r=n(e,t);return r?0<r.length?r[r.length-1].nextSibling:e.nextSibling:null}var i=w&&"<!--test-->"===w.createComment("test").text,s=i?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,u=i?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,a={ul:!0,ol:!0};o.e={Q:{},childNodes:function(t){return e(t)?n(t):t.childNodes},da:function(t){if(e(t)){t=o.e.childNodes(t);for(var n=0,r=t.length;n<r;n++)o.removeNode(t[n])}else o.a.Fa(t)},U:function(t,n){if(e(t)){o.e.da(t);for(var r=t.nextSibling,i=0,s=n.length;i<s;i++)r.parentNode.insertBefore(n[i],r)}else o.a.U(t,n)},yb:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},rb:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):o.e.yb(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},Xb:e,lc:function(e){return(e=(i?e.text:e.nodeValue).match(s))?e[1]:null},wb:function(n){if(a[o.a.B(n)]){var i=n.firstChild;if(i)do if(1===i.nodeType){var s;s=i.firstChild;var u=null;if(s)do if(u)u.push(s);else if(e(s)){var f=r(s,!0);f?s=f:u=[s]}else t(s)&&(u=[s]);while(s=s.nextSibling);if(s=u)for(u=i.nextSibling,f=0;f<s.length;f++)u?n.insertBefore(s[f],u):n.appendChild(s[f])}while(i=i.nextSibling)}}}}(),o.b("virtualElements",o.e),o.b("virtualElements.allowedBindings",o.e.Q),o.b("virtualElements.emptyNode",o.e.da),o.b("virtualElements.insertAfter",o.e.rb),o.b("virtualElements.prepend",o.e.yb),o.b("virtualElements.setDomNodeChildren",o.e.U),function(){o.J=function(){this.Nb={}},o.a.extend(o.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind");case 8:return o.e.Xb(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):null},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return o.e.lc(e);default:return null}},parseBindingsString:function(e,t,n,r){try{var i=this.Nb,s=e+(r&&r.valueAccessors||""),u;if(!(u=i[s])){var a,f="with($context){with($data||{}){return{"+o.g.qa(e,r)+"}}}";a=new Function("$context","$element",f),u=i[s]=a}return u(t,n)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+l.message,l}}}),o.J.instance=new o.J}(),o.b("bindingProvider",o.J),function(){function e(e){return function(){return e}}function n(e){return e()}function r(e){return o.a.Oa(o.k.t(e),function(t,n){return function(){return e()[n]}})}function i(e,t){return r(this.getBindings.bind(this,e,t))}function s(e,t,n){var r,i=o.e.firstChild(t),s=o.J.instance,a=s.preprocessNode;if(a){for(;r=i;)i=o.e.nextSibling(r),a.call(s,r);i=o.e.firstChild(t)}for(;r=i;)i=o.e.nextSibling(r),u(e,r,n)}function u(e,t,n){var r=!0,i=1===t.nodeType;i&&o.e.wb(t);if(i&&n||o.J.instance.nodeHasBindings(t))r=f(t,null,e,n).shouldBindDescendants;r&&!c[o.a.B(t)]&&s(e,t,!i)}function a(e){var t=[],n={},r=[];return o.a.A(e,function i(s){if(!n[s]){var u=o.getBindingHandler(s);u&&(u.after&&(r.push(s),o.a.r(u.after,function(t){if(e[t]){if(-1!==o.a.l(r,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(t)}}),r.length--),t.push({key:s,pb:u})),n[s]=!0}}),t}function f(e,t,r,s){var u=o.a.f.get(e,h);if(!t){if(u)throw Error("You cannot apply bindings multiple times to the same element.");o.a.f.set(e,h,!0)}!u&&s&&o.Eb(e,r);var f;if(t&&"function"!=typeof t)f=t;else{var l=o.J.instance,c=l.getBindingAccessors||i,d=o.h(function(){return(f=t?t(r,e):c.call(l,e,r))&&r.D&&r.D(),f},null,{G:e});f&&d.ga()||(d=null)}var v;if(f){var m=d?function(e){return function(){return n(d()[e])}}:function(e){return f[e]},y=function(){return o.a.Oa(d?d():f,n)};y.get=function(e){return f[e]&&n(m(e))},y.has=function(e){return e in f},s=a(f),o.a.r(s,function(t){var n=t.pb.init,i=t.pb.update,s=t.key;if(8===e.nodeType&&!o.e.Q[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof n&&o.k.t(function(){var t=n(e,m(s),y,r.$data,r);if(t&&t.controlsDescendantBindings){if(v!==p)throw Error("Multiple bindings ("+v+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");v=s}}),"function"==typeof i&&o.h(function(){i(e,m(s),y,r.$data,r)},null,{G:e})}catch(u){throw u.message='Unable to process binding "'+s+": "+f[s]+'"\nMessage: '+u.message,u}})}return{shouldBindDescendants:v===p}}function l(e){return e&&e instanceof o.I?e:new o.I(e)}o.d={};var c={script:!0};o.getBindingHandler=function(e){return o.d[e]},o.I=function(e,t,n,r){var i=this,s="function"==typeof e&&!o.v(e),u,a=o.h(function(){var u=s?e():e,f=o.a.c(u);return t?(t.D&&t.D(),o.a.extend(i,t),a&&(i.D=a)):(i.$parents=[],i.$root=f,i.ko=o),i.$rawData=u,i.$data=f,n&&(i[n]=f),r&&r(i,t,f),i.$data},null,{Da:function(){return u&&!o.a.eb(u)},G:!0});a.ga()&&(i.D=a,a.equalityComparer=null,u=[],a.Jb=function(e){u.push(e),o.a.u.ja(e,function(e){o.a.ma(u,e),u.length||(a.F(),i.D=a=p)})})},o.I.prototype.createChildContext=function(e,t,n){return new o.I(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},o.I.prototype.extend=function(e){return new o.I(this.D||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,o.a.extend(t,"function"==typeof e?e():e)})};var h=o.a.f.L(),d=o.a.f.L();o.Eb=function(e,t){if(2!=arguments.length)return o.a.f.get(e,d);o.a.f.set(e,d,t),t.D&&t.D.Jb(e)},o.xa=function(e,t,n){return 1===e.nodeType&&o.e.wb(e),f(e,t,l(n),!0)},o.Lb=function(t,n,i){return i=l(i),o.xa(t,"function"==typeof n?r(n.bind(null,i,t)):o.a.Oa(n,e),i)},o.gb=function(e,t){1!==t.nodeType&&8!==t.nodeType||s(l(e),t,!0)},o.fb=function(e,n){!t&&A.jQuery&&(t=A.jQuery);if(n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||A.document.body,u(l(e),n,!0)},o.Ca=function(e){switch(e.nodeType){case 1:case 8:var t=o.Eb(e);if(t)return t;if(e.parentNode)return o.Ca(e.parentNode)}return p},o.Pb=function(e){return(e=o.Ca(e))?e.$data:p},o.b("bindingHandlers",o.d),o.b("applyBindings",o.fb),o.b("applyBindingsToDescendants",o.gb),o.b("applyBindingAccessorsToNode",o.xa),o.b("applyBindingsToNode",o.Lb),o.b("contextFor",o.Ca),o.b("dataFor",o.Pb)}();var c={"class":"className","for":"htmlFor"};o.d.attr={update:function(e,t){var n=o.a.c(t())||{};o.a.A(n,function(t,n){n=o.a.c(n);var r=!1===n||null===n||n===p;r&&e.removeAttribute(t),8>=o.a.oa&&t in c?(t=c[t],r?e.removeAttribute(t):e[t]=n):r||e.setAttribute(t,n.toString()),"name"===t&&o.a.Cb(e,r?"":n.toString())})}},function(){o.d.checked={after:["value","attr"],init:function(e,t,n){function r(){return n.has("checkedValue")?o.a.c(n.get("checkedValue")):e.value}function i(){var i=e.checked,s=c?r():i;if(!o.ca.pa()&&(!a||i)){var u=o.k.t(t);f?l!==s?(i&&(o.a.Y(u,s,!0),o.a.Y(u,l,!1)),l=s):o.a.Y(u,s,i):o.g.va(u,n,"checked",s,!0)}}function s(){var n=o.a.c(t());e.checked=f?0<=o.a.l(n,r()):u?n:r()===n}var u="checkbox"==e.type,a="radio"==e.type;if(u||a){var f=u&&o.a.c(t())instanceof Array,l=f?r():p,c=a||f;a&&!e.name&&o.d.uniqueName.init(e,function(){return!0}),o.ba(i,null,{G:e}),o.a.q(e,"click",i),o.ba(s,null,{G:e})}}},o.g.W.checked=!0,o.d.checkedValue={update:function(e,t){e.value=o.a.c(t())}}}(),o.d.css={update:function(e,t){var n=o.a.c(t());"object"==typeof n?o.a.A(n,function(t,n){n=o.a.c(n),o.a.ua(e,t,n)}):(n=String(n||""),o.a.ua(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,o.a.ua(e,n,!0))}},o.d.enable={update:function(e,t){var n=o.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},o.d.disable={update:function(e,t){o.d.enable.update(e,function(){return!o.a.c(t())})}},o.d.event={init:function(e,t,n,r,i){var s=t()||{};o.a.A(s,function(s){"string"==typeof s&&o.a.q(e,s,function(e){var u,a=t()[s];if(a){try{var f=o.a.R(arguments);r=i.$data,f.unshift(r),u=a.apply(r,f)}finally{!0!==u&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(s+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},o.d.foreach={vb:function(e){return function(){var t=e(),n=o.a.Sa(t);return!n||"number"==typeof n.length?{foreach:t,templateEngine:o.K.Ja}:(o.a.c(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:o.K.Ja})}},init:function(e,t){return o.d.template.init(e,o.d.foreach.vb(t))},update:function(e,t,n,r,i){return o.d.template.update(e,o.d.foreach.vb(t),n,r,i)}},o.g.aa.foreach=!1,o.e.Q.foreach=!0,o.d.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=!0;var i=e.ownerDocument;if("activeElement"in i){var s;try{s=i.activeElement}catch(u){s=i.body}r=s===e}i=t(),o.g.va(i,n,"hasfocus",r,!0),e.__ko_hasfocusLastValue=r,e.__ko_hasfocusUpdating=!1}var i=r.bind(null,!0),s=r.bind(null,!1);o.a.q(e,"focus",i),o.a.q(e,"focusin",i),o.a.q(e,"blur",s),o.a.q(e,"focusout",s)},update:function(e,t){var n=!!o.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),o.k.t(o.a.ha,null,[e,n?"focusin":"focusout"]))}},o.g.W.hasfocus=!0,o.d.hasFocus=o.d.hasfocus,o.g.W.hasFocus=!0,o.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){o.a.Va(e,t())}},s("if"),s("ifnot",!1,!0),s("with",!0,!1,function(e,t){return e.createChildContext(t)});var h={};o.d.options={init:function(e){if("select"!==o.a.B(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function r(){return o.a.la(e.options,function(e){return e.selected})}function i(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function s(t,n){if(c.length){var r=0<=o.a.l(c,o.i.p(n[0]));o.a.Db(n[0],r),d&&!r&&o.k.t(o.a.ha,null,[e,"change"])}}var u=0!=e.length&&e.multiple?e.scrollTop:null,a=o.a.c(t()),f=n.get("optionsIncludeDestroyed");t={};var l,c;c=e.multiple?o.a.ya(r(),o.i.p):0<=e.selectedIndex?[o.i.p(e.options[e.selectedIndex])]:[],a&&("undefined"==typeof a.length&&(a=[a]),l=o.a.la(a,function(e){return f||e===p||null===e||!o.a.c(e._destroy)}),n.has("optionsCaption")&&(a=o.a.c(n.get("optionsCaption")),null!==a&&a!==p&&l.unshift(h)));var d=!1;t.beforeRemove=function(t){e.removeChild(t)},a=s,n.has("optionsAfterRender")&&(a=function(e,t){s(0,t),o.k.t(n.get("optionsAfterRender"),null,[t[0],e!==h?e:p])}),o.a.Ua(e,l,function(t,r,s){return s.length&&(c=s[0].selected?[o.i.p(s[0])]:[],d=!0),r=e.ownerDocument.createElement("option"),t===h?(o.a.Xa(r,n.get("optionsCaption")),o.i.X(r,p)):(s=i(t,n.get("optionsValue"),t),o.i.X(r,o.a.c(s)),t=i(t,n.get("optionsText"),s),o.a.Xa(r,t)),[r]},t,a),o.k.t(function(){n.get("valueAllowUnset")&&n.has("value")?o.i.X(e,o.a.c(n.get("value")),!0):(e.multiple?c.length&&r().length<c.length:c.length&&0<=e.selectedIndex?o.i.p(e.options[e.selectedIndex])!==c[0]:c.length||0<=e.selectedIndex)&&o.a.ha(e,"change")}),o.a.Tb(e),u&&20<Math.abs(u-e.scrollTop)&&(e.scrollTop=u)}},o.d.options.Pa=o.a.f.L(),o.d.selectedOptions={after:["options","foreach"],init:function(e,t,n){o.a.q(e,"change",function(){var r=t(),i=[];o.a.r(e.getElementsByTagName("option"),function(e){e.selected&&i.push(o.i.p(e))}),o.g.va(r,n,"selectedOptions",i)})},update:function(e,t){if("select"!=o.a.B(e))throw Error("values binding applies only to SELECT elements");var n=o.a.c(t());n&&"number"==typeof n.length&&o.a.r(e.getElementsByTagName("option"),function(e){var t=0<=o.a.l(n,o.i.p(e));o.a.Db(e,t)})}},o.g.W.selectedOptions=!0,o.d.style={update:function(e,t){var n=o.a.c(t()||{});o.a.A(n,function(t,n){n=o.a.c(n),e.style[t]=n||""})}},o.d.submit={init:function(e,t,n,r,i){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");o.a.q(e,"submit",function(n){var r,s=t();try{r=s.call(i.$data,e)}finally{!0!==r&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},o.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){o.a.Xa(e,t())}},o.e.Q.text=!0,o.d.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++o.d.uniqueName.Ob;o.a.Cb(e,n)}}},o.d.uniqueName.Ob=0,o.d.value={after:["options","foreach"],init:function(e,t,n){function r(){u=!1;var r=t(),i=o.i.p(e);o.g.va(r,n,"value",i)}var i=["change"],s=n.get("valueUpdate"),u=!1;s&&("string"==typeof s&&(s=[s]),o.a.$(i,s),i=o.a.ib(i)),!o.a.oa||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=o.a.l(i,"propertychange")||(o.a.q(e,"propertychange",function(){u=!0}),o.a.q(e,"focus",function(){u=!1}),o.a.q(e,"blur",function(){u&&r()})),o.a.r(i,function(t){var n=r;o.a.kc(t,"after")&&(n=function(){setTimeout(r,0)},t=t.substring(5)),o.a.q(e,t,n)})},update:function(e,t,n){var r=o.a.c(t());t=o.i.p(e);if(r!==t)if("select"===o.a.B(e)){var i=n.get("valueAllowUnset");n=function(){o.i.X(e,r,i)},n(),i||r===o.i.p(e)?setTimeout(n,0):o.k.t(o.a.ha,null,[e,"change"])}else o.i.X(e,r)}},o.g.W.value=!0,o.d.visible={update:function(e,t){var n=o.a.c(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},function(e){o.d[e]={init:function(t,n,r,i,s){return o.d.event.init.call(this,t,function(){var t={};return t[e]=n(),t},r,i,s)}}}("click"),o.C=function(){},o.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},o.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},o.C.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||w;var n=t.getElementById(e);if(!n)throw Error("Cannot find template with ID "+e);return new o.n.j(n)}if(1==e.nodeType||8==e.nodeType)return new o.n.Z(e);throw Error("Unknown template type: "+e)},o.C.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n)},o.C.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(e,t).data("isRewritten")},o.C.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},o.b("templateEngine",o.C),o.Za=function(){function e(e,t,n,r){e=o.g.Ra(e);for(var i=o.g.aa,s=0;s<e.length;s++){var u=e[s].key;if(i.hasOwnProperty(u)){var a=i[u];if("function"==typeof a){if(u=a(e[s].value))throw Error(u)}else if(!a)throw Error("This template engine does not support the '"+u+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+o.g.qa(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ub:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return o.Za.dc(e,t)},n)},dc:function(r,i){return r.replace(t,function(t,n,r,s,o){return e(o,n,r,i)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",i)})},Mb:function(e,t){return o.w.Na(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&o.xa(i,e,r)})}}}(),o.b("__tr_ambtns",o.Za.Mb),function(){o.n={},o.n.j=function(e){this.j=e},o.n.j.prototype.text=function(){var e=o.a.B(this.j),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.j[e];var t=arguments[0];"innerHTML"===e?o.a.Va(this.j,t):this.j[e]=t};var e=o.a.f.L()+"_";o.n.j.prototype.data=function(t){if(1===arguments.length)return o.a.f.get(this.j,e+t);o.a.f.set(this.j,e+t,arguments[1])};var t=o.a.f.L();o.n.Z=function(e){this.j=e},o.n.Z.prototype=new o.n.j,o.n.Z.prototype.text=function(){if(0==arguments.length){var e=o.a.f.get(this.j,t)||{};return e.$a===p&&e.Ba&&(e.$a=e.Ba.innerHTML),e.$a}o.a.f.set(this.j,t,{$a:arguments[0]})},o.n.j.prototype.nodes=function(){if(0==arguments.length)return(o.a.f.get(this.j,t)||{}).Ba;o.a.f.set(this.j,t,{Ba:arguments[0]})},o.b("templateSources",o.n),o.b("templateSources.domElement",o.n.j),o.b("templateSources.anonymousTemplate",o.n.Z)}(),function(){function e(e,t,n){var r;for(t=o.e.nextSibling(t);e&&(r=e)!==t;)e=o.e.nextSibling(r),n(r,e)}function t(t,n){if(t.length){var r=t[0],i=t[t.length-1],s=r.parentNode,u=o.J.instance,a=u.preprocessNode;if(a){e(r,i,function(e,t){var n=e.previousSibling,s=a.call(u,e);s&&(e===r&&(r=s[0]||t),e===i&&(i=s[s.length-1]||n))}),t.length=0;if(!r)return;r===i?t.push(r):(t.push(r,i),o.a.ea(t,s))}e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||o.fb(n,e)}),e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||o.w.Ib(e,[n])}),o.a.ea(t,s)}}function n(e){return e.nodeType?e:0<e.length?e[0]:null}function r(e,r,s,u,a){a=a||{};var f=e&&n(e),f=f&&f.ownerDocument,l=a.templateEngine||i;o.Za.Ub(s,l,f),s=l.renderTemplate(s,u,a,f);if("number"!=typeof s.length||0<s.length&&"number"!=typeof s[0].nodeType)throw Error("Template engine must return an array of DOM nodes");f=!1;switch(r){case"replaceChildren":o.e.U(e,s),f=!0;break;case"replaceNode":o.a.Bb(e,s),f=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+r)}return f&&(t(s,u),a.afterRender&&o.k.t(a.afterRender,null,[s,u.$data])),s}var i;o.Wa=function(e){if(!(e==p||e instanceof o.C))throw Error("templateEngine must inherit from ko.templateEngine");i=e},o.Ta=function(e,t,s,u,a){s=s||{};if((s.templateEngine||i)==p)throw Error("Set a template engine before calling renderTemplate");a=a||"replaceChildren";if(u){var f=n(u);return o.h(function(){var i=t&&t instanceof o.I?t:new o.I(o.a.c(t)),l=o.v(e)?e():"function"==typeof e?e(i.$data,i):e,i=r(u,a,l,i,s);"replaceNode"==a&&(u=i,f=n(u))},null,{Da:function(){return!f||!o.a.Ea(f)},G:f&&"replaceNode"==a?f.parentNode:f})}return o.w.Na(function(n){o.Ta(e,t,s,n,"replaceNode")})},o.jc=function(e,n,i,s,u){function a(e,n){t(n,l),i.afterRender&&i.afterRender(n,e)}function f(t,n){l=u.createChildContext(t,i.as,function(e){e.$index=n});var s="function"==typeof e?e(t,l):e;return r(null,"ignoreTargetNode",s,l,i)}var l;return o.h(function(){var e=o.a.c(n)||[];"undefined"==typeof e.length&&(e=[e]),e=o.a.la(e,function(e){return i.includeDestroyed||e===p||null===e||!o.a.c(e._destroy)}),o.k.t(o.a.Ua,null,[s,e,f,i,a])},null,{G:s})};var s=o.a.f.L();o.d.template={init:function(e,t){var n=o.a.c(t());return"string"==typeof n||n.name?o.e.da(e):(n=o.e.childNodes(e),n=o.a.ec(n),(new o.n.Z(e)).nodes(n)),{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var u=t(),a;t=o.a.c(u),n=!0,r=null,"string"==typeof t?t={}:(u=t.name,"if"in t&&(n=o.a.c(t["if"])),n&&"ifnot"in t&&(n=!o.a.c(t.ifnot)),a=o.a.c(t.data)),"foreach"in t?r=o.jc(u||e,n&&t.foreach||[],t,e,i):n?(i="data"in t?i.createChildContext(a,t.as):i,r=o.Ta(u||e,i,t,e)):o.e.da(e),i=r,(a=o.a.f.get(e,s))&&"function"==typeof a.F&&a.F(),o.a.f.set(e,s,i&&i.ga()?i:p)}},o.g.aa.template=function(e){return e=o.g.Ra(e),1==e.length&&e[0].unknown||o.g.bc(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},o.e.Q.template=!0}(),o.b("setTemplateEngine",o.Wa),o.b("renderTemplate",o.Ta),o.a.nb=function(e,t,n){if(e.length&&t.length){var r,i,s,o,u;for(r=i=0;(!n||r<n)&&(o=e[i]);++i){for(s=0;u=t[s];++s)if(o.value===u.value){o.moved=u.index,u.moved=o.index,t.splice(s,1),r=s=0;break}r+=s}}},o.a.Aa=function(){function e(e,t,n,r,i){var s=Math.min,u=Math.max,a=[],f,l=e.length,c,h=t.length,p=h-l||1,d=l+h+1,v,m,g;for(f=0;f<=l;f++)for(m=v,a.push(v=[]),g=s(h,f+p),c=u(0,f-1);c<=g;c++)v[c]=c?f?e[f-1]===t[c-1]?m[c-1]:s(m[c]||d,v[c-1]||d)+1:c+1:f+1;s=[],u=[],p=[],f=l;for(c=h;f||c;)h=a[f][c]-1,c&&h===a[f][c-1]?u.push(s[s.length]={status:n,value:t[--c],index:c}):f&&h===a[f-1][c]?p.push(s[s.length]={status:r,value:e[--f],index:f}):(--c,--f,i.sparse||s.push({status:"retained",value:t[c]}));return o.a.nb(u,p,10*l),s.reverse()}return function(t,n,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],n=n||[],t.length<=n.length?e(t,n,"added","deleted",r):e(n,t,"deleted","added",r)}}(),o.b("utils.compareArrays",o.a.Aa),function(){function e(e,t,n,r,i){var s=[],u=o.h(function(){var u=t(n,i,o.a.ea(s,e))||[];0<s.length&&(o.a.Bb(s,u),r&&o.k.t(r,null,[n,u,i])),s.length=0,o.a.$(s,u)},null,{G:e,Da:function(){return!o.a.eb(s)}});return{S:s,h:u.ga()?u:p}}var t=o.a.f.L();o.a.Ua=function(n,r,i,s,u){function a(e,t){S=c[t],g!==t&&(E[e]=S),S.Ia(g++),o.a.ea(S.S,n),v.push(S),w.push(S)}function f(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&o.a.r(t[n].S,function(r){e(r,n,t[n].ka)})}r=r||[],s=s||{};var l=o.a.f.get(n,t)===p,c=o.a.f.get(n,t)||[],h=o.a.ya(c,function(e){return e.ka}),d=o.a.Aa(h,r,s.dontLimitMoves),v=[],m=0,g=0,y=[],w=[];r=[];for(var E=[],h=[],S,x=0,T,N;T=d[x];x++)switch(N=T.moved,T.status){case"deleted":N===p&&(S=c[m],S.h&&S.h.F(),y.push.apply(y,o.a.ea(S.S,n)),s.beforeRemove&&(r[x]=S,w.push(S))),m++;break;case"retained":a(x,m++);break;case"added":N!==p?a(x,N):(S={ka:T.value,Ia:o.m(g++)},v.push(S),w.push(S),l||(h[x]=S))}f(s.beforeMove,E),o.a.r(y,s.beforeRemove?o.M:o.removeNode);for(var x=0,l=o.e.firstChild(n),C;S=w[x];x++){S.S||o.a.extend(S,e(n,i,S.ka,u,S.Ia));for(m=0;d=S.S[m];l=d.nextSibling,C=d,m++)d!==l&&o.e.rb(n,d,C);!S.Zb&&u&&(u(S.ka,S.S,S.Ia),S.Zb=!0)}f(s.beforeRemove,r),f(s.afterMove,E),f(s.afterAdd,h),o.a.f.set(n,t,v)}}(),o.b("utils.setDomNodeChildrenFromArrayMapping",o.a.Ua),o.K=function(){this.allowTemplateRewriting=!1},o.K.prototype=new o.C,o.K.prototype.renderTemplateSource=function(e){var t=(9>o.a.oa?0:e.nodes)?e.nodes():null;return t?o.a.R(t.cloneNode(!0).childNodes):(e=e.text(),o.a.Qa(e))},o.K.Ja=new o.K,o.Wa(o.K.Ja),o.b("nativeTemplateEngine",o.K),function(){o.La=function(){var e=this.ac=function(){if(!t||!t.tmpl)return 0;try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,i){i=i||{};if(2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=n.data("precompiled");return s||(s=n.text()||"",s=t.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),n.data("precompiled",s)),n=[r.$data],r=t.extend({koBindingContext:r},i.templateOptions),r=t.tmpl(s,n,r),r.appendTo(w.createElement("div")),t.fragments={},r},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){w.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},o.La.prototype=new o.C;var e=new o.La;0<e.ac&&o.Wa(e),o.b("jqueryTmplTemplateEngine",o.La)}()})})()}(),define("map/MapModel",["dojo/_base/declare","main/config","map/config","knockout"],function(e,t,n,r){var i=e(null,{constructor:function(e){i.vm={},i.root=e,i.vm.showDMSInputs=r.observable(!0),i.vm.showLatLongInputs=r.observable(!1),i.vm.showBasemapGallery=r.observable(!1),i.vm.showLocatorOptions=r.observable(!1),i.vm.showSharingOptions=r.observable(!1),i.vm.showClearPinsOption=r.observable(!1),i.vm.currentLatitude=r.observable(),i.vm.currentLongitude=r.observable(),i.vm.suitabilitySettings=r.observable(n.customSuitabilityDefaults),i.vm.allCountries=r.observableArray([]),i.vm.lowerLevelAdminUnits=r.observableArray([]),i.vm.drawToolsEnabled=r.observable(!1),r.applyBindings(i.vm,document.getElementById(e))}});return i.get=function(e){return e==="model"?i.vm:i.vm[e]()},i.set=function(e,t){i.vm[e](t)},i.applyTo=function(e){r.applyBindings(i.vm,document.getElementById(e))},i.initialize=function(e){return i.instance||(i.instance=new i(e)),i.instance},i}),define("map/LayerController",["map/config","map/MapModel","dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","utils/Hasher","esri/InfoTemplate","esri/graphic","esri/graphicsUtils","esri/tasks/query","esri/tasks/QueryTask","esri/layers/RasterFunction","esri/layers/LayerDrawingOptions"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){return{toggleLayers:function(t){if(t.id===e.pal.id){this.updateZoomDependentLayer(t,e.palHelper,6);return}if(t.id===e.gain.id){this.updateZoomDependentLayer(t,e.gainHelper,13);return}t.id===e.suit.id&&this.showSuitabilityLoader();var n=app.map.getLayer(t.id);n&&(n.setVisibility(!n.visible),this.refreshLegendWidget())},updateLayer:function(t){var n=e[t.key],r=app.map.getLayer(n.id),s=t.filter,u=[],a,f;i(".gfw .filter-list ."+s).forEach(function(t){a=t.dataset?t.dataset.layer:t.getAttribute("data-layer"),f=e[a],f&&f.id===r.id&&o.contains(t,"active")&&u.push(f.layerId)}),r&&(u.length>0?(r.setVisibleLayers(u),r.show()):r.hide(),this.refreshLegendWidget())},showLayer:function(e){var t=app.map.getLayer(e.id);if(e.layerId!==undefined){this.updateDynamicLayer(e);return}t&&(t.visible||(t.show(),this.refreshLegendWidget()))},hideLayer:function(e){var t=app.map.getLayer(e.id);t&&t.visible&&(t.hide(),this.refreshLegendWidget())},updateDynamicLayer:function(e){var t=app.map.getLayer(e.id),n=[];t&&(n.push(e.layerId),t.setVisibleLayers(n),t.show(),this.refreshLegendWidget())},setWizardDynamicLayerDefinition:function(e,t){var n=app.map.getLayer(e.id),r=[],i;n&&(t!==undefined?(i=e.whereField+" = '"+t+"'",r[e.layerId]=i,n.setVisibleLayers([e.layerId],!0),n.setLayerDefinitions(r),n.show()):n.hide(),this.refreshLegendWidget())},setWizardMillPointsLayerDefinition:function(e){var t=app.map.getLayer(e.id);t&&(t.visible?t.hide():t.show())},setFiresLayerDefinition:function(t,n){var r=new Date,i=[],s,o,u,a;u=app.map.getLayer(e.fires.id),r.setDate(r.getDate()-1*t),o=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),a=t!=="7"?"ACQ_DATE > date '"+o+"'":"1 = 1";for(var f=0,l=e.fires.defaultLayers.length;f<l;f++)i[f]=a;u&&(s=n?[0,1]:[0,1,2,3],u.visibleLayers.length!==s.length&&u.setVisibleLayers(s),u.setLayerDefinitions(i),this.refreshLegendWidget())},setOverlaysVisibleLayers:function(){var t=[],n,r;for(var r in app.map._simpleLegends)app.map._simpleLegends[r].hide();i(".gfw .overlays-container .overlays-checkbox.selected").forEach(function(n){r=n.dataset?n.dataset.layer:n.getAttribute("data-layer"),t.push(e[r].layerId),app.map._simpleLegends[r]&&app.map._simpleLegends[r].show()}),n=app.map.getLayer(e.overlays.id),n&&(t.length===0?(t.push(-1),n.hide()):n.show(),n.setVisibleLayers(t),this.refreshLegendWidget())},updateImageServiceRasterFunction:function(e,t){var n=app.map.getLayer(t.id),r,i;n&&(i=e[0]===e[1]?[e[0]+1,e[1]+1]:[e[0]+1,e[1]+2],r=this.getSpecificRasterFunction(t.colormap,i),n.setRenderingRule(r))},getSpecificRasterFunction:function(e,t){return new m({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:e,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:t,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"})},updateCustomSuitabilityLayer:function(n,r){var s=app.map.getLayer(e.suit.id),o=t.get("suitabilitySettings"),u=[];switch(r){case"peat-depth-slider":o.computeBinaryRaster[1].values=this._prepareSuitabilityJSON(0,n);break;case"conservation-area-slider":o.computeBinaryRaster[3].values=n;break;case"water-resource-slider":o.computeBinaryRaster[4].values=n;break;case"slope-slider":o.computeBinaryRaster[2].values=n;break;case"elevation-slider":o.computeBinaryRaster[5].values=n;break;case"rainfall-slider":o.computeBinaryRaster[6].values=parseInt(n[0])+","+parseInt(n[1]);break;case"soil-drainage-slider":o.computeBinaryRaster[7].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"soil-depth-slider":o.computeBinaryRaster[8].values=this._prepareSuitabilityJSON(n,7,[99]);break;case"soil-acid-slider":o.computeBinaryRaster[9].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"landcover-checkbox":u.push("11"),i("#environmental-criteria .suitable-checkbox input:checked").forEach(function(e){u.push(e.value)}),o.computeBinaryRaster[0].values=u.join(",");break;case"soil-type-checkbox":u.push("0"),u.push("6"),i("#environmental-criteria .suitable-checkbox-soil input:checked").forEach(function(e){u.push(e.value)}),o.computeBinaryRaster[10].values=u.join(",")}t.set("suitabilitySettings",o),s&&(s.refresh(),this.showSuitabilityLoader())},showSuitabilityLoader:function(){o.remove("suitability_loader","hidden")},hideSuitabilityLoader:function(){o.add("suitability_loader","hidden")},checkZoomDependentLayers:function(t){var n=e.pal,r=e.palHelper,i=e.gain,s=e.gainHelper;this.toggleZoomDependentLayer(t,n,r,6),this.toggleZoomDependentLayer(t,i,s,13)},toggleZoomDependentLayer:function(e,t,n,r){var i,s;i=app.map.getLayer(n.id),s=app.map.getLayer(t.id);if(s===undefined||i===undefined)return;if(!s.visible&&!i.visible)return;app.map.getLevel()>r?(i.show(),s.hide()):(i.hide(),s.show())},updateZoomDependentLayer:function(e,t,n){var r,i;r=app.map.getLayer(t.id),i=app.map.getLayer(e.id);if(i===undefined||r===undefined)return;i.visible||r.visible?(r.hide(),i.hide()):app.map.getLevel()>n?r.show():i.show(),this.refreshLegendWidget()},refreshLegendWidget:function(){var t=app.map.getLayer(e.legendLayer.id),n=e.tcd,r=e.forma,i=e.loss,s=e.gain,o=e.primForest,u=e.suit,l=[n,r,i,s,o,u],c=[],h=[],p,d=this;ldos=new g,ldos.transparency=100,f.forEach(l,function(e){p=app.map.getLayer(e.id),p&&p.visible&&(c.push(e.legendLayerId),h[e.legendLayerId]=ldos)}),c.length>0?(t.setVisibleLayers(c),t.setLayerDrawingOptions(h),t.visible||t.show()):t.hide(),a.byId("legend").refresh()},changeLayerTransparency:function(e,t,n){switch(t){case"image":this.setLayerOpacity(e,n);break;case"dynamic":this.setDynamicLayerTransparency(e,n);break;case"tiled":this.setLayerOpacity(e,n)}},setLayerOpacity:function(t,n){var r=app.map.getLayer(t.id);if(!r)return;r.setOpacity(n/100),r.id==="ProtectedAreas"&&this.setDynamicLayerTransparency(e.palHelper,n),r.id==="Gain"&&this.setLayerOpacity(e.gainHelper,n)},setDynamicLayerTransparency:function(e,t){var n=app.map.getLayer(e.id),r,i;if(!n)return;i=new g,i.transparency=100-t,r=n.layerDrawingOptions||[],e.layerId!==undefined?r[e.layerId]=i:e.defaultLayers&&f.forEach(e.defaultLayers,function(e){r[e]=i}),n.setLayerDrawingOptions(r)},setSelectedFeature:function(e){var t=new d,n=new v(e.url),r,i,s;t.objectIds=[e.objectId],t.outFields=["*"],t.returnGeometry=!0,n.execute(t).then(function(t){t.features&&t.features[0]&&(r=new h(t.features[0].geometry,null,t.features[0].attributes,null),r.layer=e.layer,i=p.graphicsExtent([r]).getCenter(),s={feature:r,value:r.attributes[t.displayFieldName]},r=e.templateFunction([s])[0],app.map.infoWindow.setFeatures([r]),app.map.infoWindow.show(i))})},_prepareSuitabilityJSON:function(e,t,n){var r=[];for(var i=e;i<=t;i++)r.push(i);return n&&(r=r.concat(n)),r.join(",")}}}),define("map/Controls",["dojo/dom","dojo/query","dojo/Deferred","dojo/_base/fx","dojo/_base/array","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/dom-construct","utils/Hasher","map/config","map/MapModel","map/LayerController","esri/request","esri/TimeExtent","esri/dijit/TimeSlider","dijit/form/CheckBox","dijit/layout/ContentPane","dijit/layout/AccordionContainer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=jQuery.noConflict(),w=!1,E=!1;return{toggleToolbox:function(e,t){if(e.id==="CustomSuitability"){var n=t==="show"?"block":"none";o.set(e.toolsNode,"display",n),this.resizeRangeSliders()}else this.hideAllToolboxes(),t==="show"&&o.set(e.toolsNode,"display","block")},hideAllToolboxes:function(){t(".gfw .layer-controls-container .toolbox").forEach(function(e){o.get(e,"display")==="block"&&o.set(e,"display","none")})},createDialogBox:function(e){require(["dijit/Dialog","dojo/_base/lang"],function(t,n){var r=n.clone(e),i=r.querySelector(".source_body");i.querySelector(".source_extended")&&i.removeChild(i.querySelector(".source_extended")),i.querySelector(".source_download")&&i.removeChild(i.querySelector(".source_download")),i.querySelector(".overview_title")&&i.querySelector(".source_summary").removeChild(i.querySelector(".overview_title")),r.querySelector(".source_header")&&r.removeChild(r.querySelector(".source_header")),r.getElementsByTagName("input").length&&r.removeChild(r.getElementsByTagName("input")[0]);var s=new t({title:e.querySelector(".source_title").innerHTML.toUpperCase(),style:"height: 600px; width: 600px; overflow-y: auto;",draggable:!1,hide:function(){s.destroy()}});s.onClose(function(){}),s.setContent(r.innerHTML),s.show()})},toggleFiresLayerOptions:function(n){var r=n.target?n.target:n.srcElement,i=r.dataset?r.dataset.filter:r.getAttribute("data-filter"),o;t(".fires_toolbox .toolbox-list li").forEach(function(e){s.remove(e,"selected")}),s.add(r,"selected"),o=e.byId("high-confidence").checked,h.setFiresLayerDefinition(i,o)},toggleFiresConfidenceLevel:function(e){var n=e.target?e.target:e.srcElement,r=n.checked,i,s;i=t(".fires_toolbox .toolbox-list li.selected")[0],s=i.dataset?i.dataset.filter:i.getAttribute("data-filter"),h.setFiresLayerDefinition(s,r)},toggleOverlays:function(t,n){t?s.toggle(t.currentTarget,"selected"):n&&s.toggle(e.byId(n),"selected"),h.setOverlaysVisibleLayers()},generateTimeSliders:function(){this.buildFormaSlider(),this.buildTreeCoverChangeSlider(),this.newTimeSlider()},buildFormaSlider:function(){function E(){function m(e,t,n,i,s){if(r.playing===!1)return;u=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];var o=parseInt(t);a=(o+1)%12,f=u[a],$("#playLine3").html(f),$("#playLine3").css("left","+=61px"),$("#sliderProgressLine2").css("left","+=61px");var c=r[0].value.split(";"),p=c[1];t++,i=[s,t],i[0]=parseInt(i[0]),i[1]=parseInt(i[1]),h.updateImageServiceRasterFunction(i,l.forma),p>n&&(n=p);if(t==n||t==p||t>p){$("#newSlider2").html("&#9658"),r.playing=!1;return}r.playing==1&&setTimeout(function(){m(e,t,n,i,s)},1500)}$("#playLine3").hide(),$("#playLine3").css("left","0");if(r.playing===!0){r.playing=!1,$("#sliderProgressLine2").hide(),$("#newSlider2").html("&#9658");return}var e=r[0].value.split(";"),t=e[0],n=e[1],i=t,s=$("#irs-2 > span.irs > span.irs-slider.from.last").css("left"),o=$("#irs-2 > span.irs > span.irs-diapason").css("left");$("#playLine3").css("left",s),$("#sliderProgressLine2").css("left",s),s===undefined&&($("#playLine3").css("left",o),$("#playLine3").css("left","-=7.5pxpx"),$("#sliderProgressLine2").css("left",o),$("#sliderProgressLine2").css("left","-=7.5px")),$("#playLine3").css("left","+=53px");var u=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=t%12,f=u[a];$("#playLine3").html(f),$("#playLine3").show(),$("#sliderProgressLine2").css("left","+=82px"),$("#sliderProgressLine2").show(),$("#sliderProgressLine2").css("display","block");if(t==n){r.playing=!1;return}r.playing=!0,$("#newSlider2").html("&#x25A0");var c=[i,t];c[0]=parseInt(c[0]),c[1]=parseInt(c[1]),h.updateImageServiceRasterFunction(c,l.forma);var d=r.playing,v=setTimeout(function(){m(p,t,n,c,i)},1500)}var e=function(){var e=[],t=14,n,i;for(var s=1;s<d+2;s++){i=s%12,i==0&&(i=12),n=Math.floor((s-1)/12+t),e.push(i+"-"+n);var f=a.toDom('<div><g class="tick" transform="translate(120,0)" style="opacity: 1;"><line y2="0" x2="0"></line><text y="0" x="0" dy="0em">▪</text></g></div>');a.place(f,"yearDotContainer"),o.get(f);var v=s*56+25;v+="px",i===1?o.set(f,{position:"absolute",left:v,top:"17px","font-size":"150%",color:"black"}):o.set(f,{position:"absolute",left:v})}r.ionRangeSlider({type:"double",min:u,max:c,from:p,to:d,playing:!1,prettify:!1,values:e,onChange:function(e){p=e.fromNumber,d=e.toNumber,w(),$(".irs-single").hide(),p==d&&($(".irs-single").hide(),$(".irs-to").show()),p==e.max-1&&d==e.max&&($(".irs-single").hide(),$(".irs-from").show()),d==e.max&&p!=e.max&&$(".irs-diapason").css("width","+=7px"),d==e.max&&p==e.max&&$(".irs-diapason").css("width","-=8px"),$("#yearDotContainer > div:nth-child(13)").css("color","black"),$("#range2").ionRangeSlider("update");if(r.playing!=1){$("#sliderProgressLine2").hide(),$("#playLine3").hide();var t=[p,d];for(var n=1;n<e.max+2;n++){var i=$("#yearDotContainer > div:nth-child("+n+")");n<p+1||n>d?($(i.selector).css("color","grey"),$("#yearDotContainer > div:nth-child(1)").css("color","black")):$(i.selector).css("color","#a1ba42"),(p>12||d<12)&&$("#yearDotContainer > div:nth-child(13)").css("color","black"),p==1&&d==e.max-1&&$("#yearDotContainer > div:nth-child(1)").css("color","black")}$("#yearDotContainer > div:nth-child(25)").css("color","black"),t[0]++,t[1]++,h.updateImageServiceRasterFunction(t,l.forma)}}}),$(".irs-slider.to").css("left","790px"),$(".slider-container").show(),$("#formaAlertSlider").each(function(){var e=this,t=a.create("div",{id:"sliderProgressLine2"});a.place(t,e,"after");var n=a.create("div",{id:"playLine3"});a.place(n,e,"after")}),$(".irs-single").hide();var m=parseInt($("#irs-2 > span.irs > span.irs-from").css("left")),g=parseInt($("#irs-2 > span.irs > span.irs-slider.from.last").css("left")),y=790-g;isNaN(g)===!0&&(y=790-m),$(".irs-diapason").css("width",y+"px"),$(".irs-diapason").css("background-color","#a1ba42"),$("#yearDotContainer > div").css("color","#a1ba42");var b=$("#yearDotContainer > div:nth-child(13)").css("left"),E=$("#yearDotContainer > div:nth-child(13)").css("left");E=E.split("p"),E=E[0]-20+"px",$(".playLineFiller2 > div:nth-child(2)").css("left",E)},t=f.getLayers(),n=t.indexOf("forma")>-1;$(".extra-controls2 #newSlider2").click(function(){E()});var r=$(".gfw .toolbox .slider-container"),i=$(".js-from"),s=$(".js-to"),u="1-14",c,p="0",d,v=0,m=14,g=[],y;this.fetchFORMAAlertsLabels().then(function(t){if(t){d=t.maxValues[0]-t.minValues[0],c=d%12+1+"-"+(Math.floor(d/12)+14);for(var n=t.minValues[0],r=t.maxValues[0];n<=r;n++)y=n%12===0?12:n%12,n%12===0&&++v;var i=f.getLayers(),s=i.indexOf("forma")>-1;s&&e.call()}else console.log("fetching Forma labels failed!!")}),$("#master-layer-list > div > ul > li:nth-child(2)").click(function(){$("#playLine3").hide(),$("#sliderProgressLine2").hide();var t=$(this);setTimeout(function(){e.call()},300),$("#irs-2 > span.irs > span.irs-to").css("left","759px"),$("#irs-2 > span.irs > span.irs-to").html(c)}),i.on("change",function(){p=$(this).prop("value"),p<u&&(p=u),p>d&&(p=d),w(),b()}),s.on("change",function(){d=$(this).prop("value"),d>c&&(d=c),d<p&&(d=p),w(),b()});var b=function(){r.ionRangeSlider("update",{from:p,to:d})},w=function(){i.prop("value",p),s.prop("value",d)}},buildTreeCoverChangeSlider:function(){},newTimeSlider:function(){function p(){function p(t,n,r,i,s){if(e.playing===!1)return;$("#playLine2").css("left","+=61px"),$("#sliderProgressLine").css("left","+=61px");var o=e[0].value.split(";"),u=o[1];n++,$("#playLine2").html(n),i=[s-2001,n-2001],h.updateImageServiceRasterFunction(i,l.loss),u>r&&(r=u);if(n==r||n==u||n>u){i[1]-i[0]>8?($("#playLine2").css("left","-=2px"),$("#sliderProgressLine").css("left","-=2px")):i[1]-i[0]>4&&($("#playLine2").css("left","-=1x"),$("#sliderProgressLine").css("left","-=1px")),$("#newSlider").html("&#9658"),e.playing=!1;return}e.playing===!0&&setTimeout(function(){p(t,n,r,i,s)},1500)}$("#sliderProgressLine").hide(),$("#playLine2").hide(),$("#playLine2").css("left","0"),$("#sliderProgressLine").css("left","0");if(e.playing==1){e.playing=!1,$("#newSlider").html("&#9658");return}var t=e[0].value.split(";"),n=t[0],r=t[1],i=n,o=$(".irs-slider.from.last").css("left"),u=$("#irs-1 > span.irs > span.irs-slider.from").css("left");$("#playLine2").css("left",o),$("#sliderProgressLine").css("left",o);if(o==undefined||o=="0px"&&n!=2001)$("#playLine2").css("left",u),$("#sliderProgressLine").css("left",u);$("#playLine2").css("left","-=21.5px"),$("#playLine2").html(n),$("#playLine2").show(),$("#sliderProgressLine").css("left","+=7.5px"),$("#sliderProgressLine").show();if(n==r){e.playing=!1;return}e.playing=!0,$("#newSlider").html("&#x25A0");var a=[i-2001,n-2001];a[0]=parseInt(a[0]),a[1]=parseInt(a[1]),h.updateImageServiceRasterFunction(a,l.loss);var f=e.playing,c=setTimeout(function(){p(s,n,r,a,i)},1500)}$(".extra-controls #newSlider").click(function(){p()});var e=$(".js-range-slider"),t=$(".js-from"),n=$(".js-to"),r=2001,i=2013,s=2001,o=2013;$(".layer-list-item.forest-change").click(function(){var e=$(this);u.call(this);var t=$("#irs-1 > span.irs > span.irs-to").css("left"),n=t.slice(0,t.length-2);n*=1,o==2013?$(".irs-slider.to").css("left","730px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left")===undefined?$("#irs-1 > span.irs > span.irs-slider.to").css("left",n+8+"px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left",n+8+"px")}),$("#master-layer-list > div > ul > li.layer-list-item.forest-change.active > div").click(function(){var e=$("#irs-1 > span.irs > span.irs-to").css("left"),t=e.slice(0,e.length-2);t*=1,o==2013?$(".irs-slider.to").css("left","730px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left")===undefined?$("#irs-1 > span.irs > span.irs-slider.to").css("left",t+8+"px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left",t+8+"px")});var u=function(){e.ionRangeSlider({type:"double",min:r,max:i,from:s,to:o,playing:!1,prettify:!1,onChange:function(t){s=t.fromNumber,o=t.toNumber,c(),s==o&&$(".irs-to").show(),$(".irs-single").hide();if(e.playing!==!0){$("#sliderProgressLine").hide(),$("#playLine2").hide();var n=[s-2001,o-2001];for(var r=1;r<13;r++){var i=$(".playLineFiller > div:nth-child("+r+")"),u=$(".container2 > div:nth-child("+r+")");r<=s-2e3||r>=o-2e3?$(i.selector).css("background-color","transparent"):$(i.selector).css("background-color","#a1ba42"),r<s-1999||r>o-2e3?$(u.selector).css("color","grey"):$(u.selector).css("color","#a1ba42")}var a=$("#irs-1 > span.irs > span.irs-from").css("display");a==="none"&&$(".playLineFiller > div").css("background-color","#a1ba42"),o!=2013?$(".container2 > div:nth-child(13)").css("color","grey"):$(".container2 > div:nth-child(13)").css("color","#a1ba42"),o===s&&($(".playLineFiller > div").css("background-color","transparent"),$(".container2 > div").css("color","grey")),h.updateImageServiceRasterFunction(n,l.loss)}}}),$(".container2 > div:first-child").css("color","grey"),$(".container2 > div:last-child").css("color","grey"),$("#range").ionRangeSlider("update"),$("#playLine2").hide(),$("#sliderProgressLine").hide(),$(".irs-single").hide()};w||(w=!0,u(),$(".irs-diapason").hide(),$(".irs-diapason").css("background-color","transparent"),$(".irs-slider.from.last").each(function(){var e=this,t=a.create("div",{id:"sliderProgressLine"});a.place(t,e,"after");var n=a.create("div",{id:"playLine2"});a.place(n,e,"after")}),$(".irs-slider.to").css("left","730px")),t.on("change",function(){s=$(this).prop("value"),s<r&&(s=r),s>o&&(s=o),c(),f()}),n.on("change",function(){o=$(this).prop("value"),o>i&&(o=i),o<s&&(o=s),c(),f()});var f=function(){e.ionRangeSlider("update",{from:s,to:o})},c=function(){t.prop("value",s),n.prop("value",o)}},fetchFORMAAlertsLabels:function(){var e=new n,t;return t=p({url:l.forma.url,content:{f:"pjson"},handleAs:"json",callbackParamName:"callback"}),t.then(function(t){e.resolve(t)},function(t){e.resolve(!1)}),e.promise},toggleLegendContainer:function(){var t=e.byId("legend-container"),n=t.offsetHeight===280?30:280;r.animateProperty({node:t,properties:{height:n},duration:500,onEnd:function(){n===30?s.add("legend-title","closed"):s.remove("legend-title","closed")}}).play()},generateSuitabilitySliders:function(){this.createCheckboxDijits(),this.createRangeSliders()},createCheckboxDijits:function(){var e;i.forEach(l.checkboxItems,function(t){e=new m({name:t.name,value:t.value,checked:t.checked,onChange:function(){h.updateCustomSuitabilityLayer(null,t.name)}},t.node)})},createRangeSliders:function(){var e=l.suitabilitySliderTooltips;jQuery.browser={},function(){jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1)}(),b("#peat-depth-slider").rangeSlider({defaultValues:{min:0,max:3},valueLabels:"change",bounds:{min:0,max:3},step:1,arrows:!1,formatter:function(t){return e.peat[t]}}),b("#peat-depth-slider").addClass("singleValueSlider reverseSlider"),b("#peat-depth-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"peat-depth-slider")}),b("#conservation-area-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"change",bounds:{min:500,max:5e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),b("#conservation-area-slider").addClass("singleValueSlider"),b("#conservation-area-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"conservation-area-slider")}),b("#water-resource-slider").rangeSlider({defaultValues:{min:100,max:1e3},valueLabels:"change",bounds:{min:50,max:1e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),b("#water-resource-slider").addClass("singleValueSlider"),b("#water-resource-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"water-resource-slider")}),b("#slope-slider").rangeSlider({defaultValues:{min:30,max:80},valueLabels:"change",bounds:{min:0,max:80},step:1,arrows:!1,formatter:function(e){return e+"%"}}),b("#slope-slider").addClass("singleValueSlider reverseSlider"),b("#slope-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"slope-slider")}),b("#elevation-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"hide",bounds:{min:0,max:5e3},step:1,arrows:!1,formatter:function(e){return e+"m"}}),b("#elevation-slider").addClass("singleValueSlider reverseSlider"),b("#elevation-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"elevation-slider")}),b("#rainfall-slider").rangeSlider({defaultValues:{min:1500,max:6e3},valueLabels:"hide",bounds:{min:1500,max:6e3},step:1,arrows:!1,formatter:function(t){return t+" "+e.rainfall.label}}),b("#rainfall-slider").addClass("narrowTooltips"),b("#rainfall-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer([t.values.min,t.values.max],"rainfall-slider")}),b("#soil-drainage-slider").rangeSlider({defaultValues:{min:2,max:4},valueLabels:"hide",bounds:{min:1,max:4},step:1,arrows:!1,formatter:function(t){return e.drainage[t]}}),b("#soil-drainage-slider").addClass("narrowTooltips"),b("#soil-drainage-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-drainage-slider")}),b("#soil-depth-slider").rangeSlider({defaultValues:{min:3,max:7},valueLabels:"hide",bounds:{min:1,max:7},step:1,arrows:!1,formatter:function(t){return e.depth[t]}}),b("#soil-depth-slider").addClass("singleValueSlider narrowTooltips"),b("#soil-depth-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"soil-depth-slider")}),b("#soil-acid-slider").rangeSlider({defaultValues:{min:1,max:7},valueLabels:"change",bounds:{min:1,max:8},step:1,arrows:!1,formatter:function(t){return e.acidity[t]}}),b("#soil-acid-slider").addClass("narrowTooltips"),b("#soil-acid-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-acid-slider")}),t(".ui-rangeSlider-innerBar").forEach(function(e){a.create("div",{"class":"slider-bar-blocker"},e,"after")})},resetSuitabilitySettings:function(){b("#peat-depth-slider").rangeSlider("values",0,3),b("#conservation-area-slider").rangeSlider("values",1e3,5e3),b("#water-resource-slider").rangeSlider("values",100,1e3),b("#slope-slider").rangeSlider("values",30,80),b("#elevation-slider").rangeSlider("values",1e3,5e3),b("#rainfall-slider").rangeSlider("values",1500,6e3),b("#soil-drainage-slider").rangeSlider("values",2,4),b("#soil-depth-slider").rangeSlider("values",3,7),b("#soil-acid-slider").rangeSlider("values",1,7),this.resizeRangeSliders();var e;i.forEach(l.checkboxItems,function(t){e=u.byId(t.node),e&&e.set("checked",t.checked)})},exportSuitabilitySettings:function(){var t=this;require(["dijit/Dialog","dojo/on","dojo/_base/lang"],function(n,r,i){var s="<p>"+l.suitabilityExportDialog.instruction+"</p>";s+="<p id='export-error-message' style='color: #e50036;font-size: 12px;'></p>",s+="<div id='export-loading-now' class='submit-container' style='display: none; visibility: hidden;'><div class='loading-wheel-container'><div class='loading-wheel'></div></div></div>",s+="<div id='export-buttons-container' class='submit-container'>",s+="<button id='export-cancel-now'>Cancel</button> ",s+="<button id='export-download-now'>Download</button>",s+="</div>";var u=new n({title:l.suitabilityExportDialog.title.toUpperCase(),style:"height: 190px; width: 415px; overflow-y: none;",draggable:!1,hide:function(){u.destroy()}});u.setContent(s),u.show(),r(e.byId("export-cancel-now"),"click",function(){u.destroy()}),r(e.byId("export-download-now"),"click",function(){var n=t._getSettingsCSV(),r=new Blob([n],{type:"text/csv;charset=utf-8;"});saveAs(r,"settings.csv"),o.set(e.byId("export-buttons-container"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"visibility","visible"),o.set(e.byId("export-loading-now"),"display","block"),t._saveTIFF(function(t){console.log("**callback** (error = "+t+")"),o.set(e.byId("export-loading-now"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"display","none"),t==""?u.destroy():e.byId("export-error-message").innerHTML=t})})})},_saveTIFF:function(e){var t=this,n=app.map.extent,r=1460,i=854,s={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",format:"tiff",size:r+","+i,imageSR:3857,bboxSR:3857,f:"json",pixelType:"UNKNOWN"},o=function(t,n){console.log("exporter() :: url = ",t),window.open(t,"geoTiffWin"),e("")},u=l.suit.id;app.map.getLayer(u).getImageUrl(app.map.extent,r,i,o,s)},_getSettingsCSV:function(){var n=["peat-depth-slider","conservation-area-slider","water-resource-slider","slope-slider","elevation-slider","rainfall-slider","soil-drainage-slider","soil-depth-slider","soil-acid-slider"],r="",o,a,f,c,h,p;i.forEach(n,function(t){o=e.byId(t+"-label"),a=b("#"+t).rangeSlider("values"),f=b("#"+t).rangeSlider("bounds"),c=s.contains(t,"reverseSlider"),p=t.split("-"),p[0]!="rainfall"&&(h=l.suitabilitySliderTooltips[p[0]],h==undefined&&(p[1]=="acid"&&(p[1]="acidity"),h=l.suitabilitySliderTooltips[p[1]])),r!=""&&(r+="\n"),r+=o.innerHTML+",";if(c)if(h==undefined)r+=f.min+"-"+a.min;else{var n="";for(var i=f.min;i<=a.min;++i)n!=""&&(n+="; "),n+=h[i].replace(",","/");r+=n}else if(h==undefined)r+=a.min+"-"+a.max;else{var n="";for(var i=a.min;i<=a.max;++i)n!=""&&(n+="; "),n+=h[i].replace(",","/");r+=n}});var d="",v="",m;i.forEach(l.checkboxItems,function(e){m=u.byId(e.node),m&&m.get("checked")&&(o=t("label[for='"+e.node+"']")[0],e.name=="landcover-checkbox"?(d!=""&&(d+="; "),d+=o.innerHTML):e.name=="soil-type-checkbox"&&(v!=""&&(v+="; "),v+=o.innerHTML))});var g=["Suitability Parameter","Suitability Values"],y=g.join(",")+"\n";return y+=r+"\n",y+="Land Cover,"+d+"\n",y+="Soil Type,"+v+"\n",y},resizeRangeSliders:function(){b("#peat-depth-slider").rangeSlider("option","valueLabels","hide"),b("#conservation-area-slider").rangeSlider("option","valueLabels","hide"),b("#water-resource-slider").rangeSlider("option","valueLabels","hide"),b("#slope-slider").rangeSlider("option","valueLabels","hide"),b("#elevation-slider").rangeSlider("option","valueLabels","hide"),b("#rainfall-slider").rangeSlider("option","valueLabels","hide"),b("#soil-drainage-slider").rangeSlider("option","valueLabels","hide"),b("#soil-depth-slider").rangeSlider("option","valueLabels","hide"),b("#soil-acid-slider").rangeSlider("option","valueLabels","hide"),b("#peat-depth-slider").rangeSlider("resize"),b("#conservation-area-slider").rangeSlider("resize"),b("#water-resource-slider").rangeSlider("resize"),b("#slope-slider").rangeSlider("resize"),b("#elevation-slider").rangeSlider("resize"),b("#rainfall-slider").rangeSlider("resize"),b("#soil-drainage-slider").rangeSlider("resize"),b("#soil-depth-slider").rangeSlider("resize"),b("#soil-acid-slider").rangeSlider("resize"),b("#peat-depth-slider").rangeSlider("option","valueLabels","change"),b("#conservation-area-slider").rangeSlider("option","valueLabels","change"),b("#water-resource-slider").rangeSlider("option","valueLabels","change"),b("#slope-slider").rangeSlider("option","valueLabels","change"),b("#elevation-slider").rangeSlider("option","valueLabels","change"),b("#rainfall-slider").rangeSlider("option","valueLabels","change"),b("#soil-drainage-slider").rangeSlider("option","valueLabels","change"),b("#soil-depth-slider").rangeSlider("option","valueLabels","change"),b("#soil-acid-slider").rangeSlider("option","valueLabels","change")},serializeSuitabilitySettings:function(){return{"Peat Depth":b("#peat-depth-slider").rangeSlider("values").min,"Conservation Area":b("#conservation-area-slider").rangeSlider("values").min,"Water Resource":b("#water-resource-slider").rangeSlider("values").min,Slope:b("#slope-slider").rangeSlider("values").min,Elevation:b("#elevation-slider").rangeSlider("values").min,Rainfall:b("#rainfall-slider").rangeSlider("values"),"Soil Drainage":b("#soil-drainage-slider").rangeSlider("values"),"Soil Depth":b("#soil-depth-slider").rangeSlider("values").min,"Soil Acidity":b("#soil-acid-slider").rangeSlider("values"),Shrub:u.byId("shrub-check").checked,Bareland:u.byId("bareland-check").checked,"Secondary Forest":u.byId("secondary-forest-check").checked,"Dryland Agriculture mixed with shrub":u.byId("dryland-agro-check").checked,"Water Body":u.byId("water-check").checked,Mining:u.byId("mining-check").checked,"Plantation Forest":u.byId("plantation-forest-check").checked,"Estate Crop Plantation":u.byId("estate-crop-check").checked,"Swamp shrub":u.byId("swamp-shrub-check").checked,"Primary swamp Forest":u.byId("primary-swamp-check").checked,"Secondary swamp Forest":u.byId("secondary-swamp-check").checked,Settlement:u.byId("settlement-check").checked,Grassland:u.byId("grassland-check").checked,"Secondary mangrove forest":u.byId("secondary-mangrove-check").checked,"Dryland agriculture":u.byId("dryland-check").checked,"Rice field":u.byId("rice-check").checked,"Fish pond":u.byId("fish-check").checked,"Transmigration area":u.byId("transmigration-check").checked,Swamp:u.byId("swamp-check").checked,"Primary mangrove swamp":u.byId("primary-mangrove-check").checked,Airport:u.byId("airport-check").checked,Inceptisol:u.byId("inceptisol-check").checked,Oxisol:u.byId("oxisol-check").checked,Alfisol:u.byId("alfisol-check").checked,Ultisol:u.byId("ultisol-check").checked,Spodosol:u.byId("spodosol-check").checked,Entisol:u.byId("entisol-check").checked,Histosol:u.byId("histosol-check").checked,Mollisol:u.byId("mollisol-check").checked,Rock:u.byId("rock-check").checked}}}}),define("analysis/config",[],function(){var e="customAreaOption",t="adminUnitOption",n="commercialEntityOption",r="certifiedAreaOption",i="millPointOption",s="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",o="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/oilpalmmills/MapServer";return{noNameField:"No Group Information Available",wizard:{breadcrumbs:["Select Area","Refine Area","Select Analysis"]},stepOne:{title:"Step 1: Select Area of interest",description:"Set the area to analyze using one of the following options.",option1:{id:e,label:"Create custom area",description:"Draw a polygon or upload a shapefile to analyze."},option2:{id:t,label:"Administrative unit",description:"Analyze provinces, districts, and other subnational areas."},option3:{id:n,label:"Concession area",description:"Analyze an individual concession or a group of concessions."},option4:{id:r,label:"Certified area",description:"Analyze RSPO certified palm oil concessions."},option5:{id:i,label:"Palm oil mill points",description:"Analyze deforestation-related risks for a mill or set of mills."}},stepTwo:{title:"Step 2: Refine area",customArea:e,adminUnit:t,commArea:n,certArea:r,millPoint:i,currentFeatureText:"Current selection: ",labelField:"WRI_label"},stepThree:{title:"Step 3: Select a variable to analyze",description:'Select which types of analysis you would like to perform and then click "Perform Analysis".  You must select at least one option.',currentFeatureText:"Current selection: ",cb1:{label:"Forest Change",value:"forest"},cb2:{label:"Tree cover loss and fires",value:"loss"},cb3:{label:"FORMA clearance alerts",value:"forma"},cb4:{label:"Suitability",value:"suit"},cb5:{label:"Risk Assessment",value:"risk"},checkboxes:[{label:"Primary Forests",value:"primForest"},{label:"Tree Cover Density",value:"treeDensity"},{label:"Legal Classes",value:"legal"},{label:"Protected Areas",value:"protected"},{label:"Forest Carbon Stocks",value:"carbon"},{label:"Intact Forests",value:"intact"},{label:"Land Cover - Global",value:"landCoverGlob"},{label:"Land Cover - SE Asia",value:"landCoverAsia"},{label:"Land Cover - Indonesia",value:"landCoverIndo"},{label:"Peat Lands",value:"peat"},{label:"Tree Cover Loss",value:"treeCoverLoss"},{label:"Indonesia Moratorium",value:"indonesiaMoratorium",noInfoIcon:!0}],suit:{label:"Oil Palm Suitability",value:"suit",description:"Analyze Areas potentially suitable and unsuitable for palm oil development using WRI's methodology."},rspo:{label:"RSPO Land Use Change Analysis",value:"rspo",description:"Analyze tree cover loss according to the RSPO compensation procedure and New Planting Procedure guidelines."},mill:{label:"Mill Point Risk Assessment",value:"mill",description:"Analyze deforestation-related risks for a mill or set of mills."},forestChange:{label:"Forest Change Analysis",description:"Analyze tree cover loss and fire activity according to the selected variable(s)."},millPoint:i},stepFour:{title:"Step 4: Refine Analysis",description:'Select which data sets you would like to include in your analysis and then click "Perform Analysis".  You must select at least one data set.',checkboxes:[{label:"Primary Forests",value:"primForest"},{label:"Tree Cover Density",value:"treeDensity"},{label:"Legal Classes",value:"legal"},{label:"Protected Areas",value:"protected"},{label:"Forest Carbon Stocks",value:"carbon"},{label:"Intact Forests",value:"intact"},{label:"Land Cover - Global",value:"landCoverGlob"},{label:"Land Cover - Southeast Asia",value:"landCoverAsia"},{label:"Land Cover - Indonesia",value:"landCoverIndo"},{label:"Peat Lands",value:"peat"}]},stepFive:{beginningText:"Create custom analysis of your area of interest – such as a commodity concession or group of concessions -- considering factors such as:",firstList:["Tree cover change","Fire activity","Primary or intact forest areas","Protected areas","Legal classification of land"],secondaryText:"You can also: ",secondList:["Upload your own shapefiles for analysis","Draw an area of interest","Sign up for alerts for clearance activity"]},customArea:{instructions:'Select a shape below and begin drawing on the map or choose "Upload" and upload a shapefile to analyze.',instructionsPartTwo:'Select an area from the list below and click "Next" to proceed.',freehandLabel:"Freehand",uploadLabel:"Upload",polyLabel:"Polygon",uploadInstructions:["Select a zip file(.zip) containing a shapefile(.shp,.dbf,.prj) from your local file system.","The shapefile must be in Geographic Coordinate System (WGS84).","The shapefile must be of POLYGON geometry type.","The shapefile must not exceed 1 Megabyte."],incorrectFileTypeError:"Your shapefile must be of type .zip, please choose another file.",portalUrl:"http://www.arcgis.com/sharing/rest/content/features/generate"},adminUnit:{instructions:"Select a country to view it's first or second level administrative units:",instructionsPartTwo:'Select a province or district from the list below and click "Next" to proceed.',countriesQuery:{url:s+"/7",where:"NAME_0 IS NOT NULL",outFields:["NAME_0"],orderBy:["NAME_0"],groupBy:["NAME_0"],statistic:{statisticType:"count",onStatisticField:"OBJECTID",outStatisticFieldName:"OBJECTID"},labelValueField:"NAME_0"},lowLevelUnitsQuery:{url:s+"/7",whereField:"NAME_0",requiredField:"NAME_1",outFields:["NAME_0","NAME_1","NAME_2","OBJECTID"],orderBy:["NAME_1","NAME_2"],labelField:"NAME_2",valueField:"OBJECTID"},countryBoundaries:{url:s+"/6",whereField:"NAME_0",requiredField:"NAME_1"}},commercialEntity:{instructions:"Select a commodity type:",instructionsPartTwo:'Select a concession or group from the list below and click "Next" to proceed.',commodityOptions:[{label:"None",value:"NONE"},{label:"Logging concession",value:"Logging concession"},{label:"Mining concession",value:"Mining concession"},{label:"Oil palm concession",value:"Oil palm concession"},{label:"Wood fiber plantation",value:"Wood fiber plantation"}],commodityQuery:{url:s+"/13",whereField:"TYPE",outFields:["GROUP_NAME","Name","TYPE","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:s+"/27",requiredField:"GROUP_NAME"}},certifiedArea:{instructions:"Select a commodity type:",instructionsPartTwo:"Select a Certification Scheme:",instructionsPartThree:'Select a concession or group from the list below and click "Next" to proceed',commodityOptions:[{label:"Oil palm concession",value:"Oil palm concession"}],certificationOptions:[{label:"None",value:"NONE"},{label:"RSPO",value:"RSPO"}],schemeQuery:{url:s+"/13",whereField:"CERT_SCHEME",secondaryWhereField:"TYPE",outFields:["GROUP_NAME","Name","CERT_SCHEME","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:s+"/28",requiredField:"GROUP_NAME"}},millPoints:{instructions:"Select a commodity type:",instructionsPartTwo:'Select up to 5 mills from the list below and click "Next" to proceed.',commodityOptions:[{label:"Oil palm",value:"Oil palm concession"}],url:o+"/0",api:"http://wip.risk-api.appspot.com/",outFields:["Parent_Com","Mill_name","Entity_ID"],orderBy:["Parent_Com","Mill_name"],labelField:"Mill_name",valueField:"Entity_ID",requiredField:"Parent_Com"}}}),define("analysis/Query",["dojo/Deferred","dojo/_base/array","esri/tasks/query","esri/graphicsUtils","esri/tasks/QueryTask","esri/tasks/StatisticDefinition","analysis/config","map/MapModel"],function(e,t,n,r,i,s,o,u){return{getSetupData:function(){this.getAdminUnitData()},getAdminUnitData:function(){function a(e){var n=[];n.push({label:"None",value:"NONE"}),t.forEach(e.features,function(e){n.push({label:e.attributes[r.labelValueField],value:e.attributes[r.labelValueField]})}),u.set("allCountries",n)}var e=new n,r=o.adminUnit.countriesQuery,i;i=new s,i.statisticType=r.statistic.statisticType,i.onStatisticField=r.statistic.onStatisticField,i.outStatisticFieldName=r.statistic.outStatisticFieldName,e.where=r.where,e.returnGeometry=!1,e.outFields=r.outFields,e.orderByFields=r.orderBy,e.outStatistics=[i],e.groupByFieldsForStatistics=r.groupBy,this._query(r.url,e,a,this._queryErrorHandler)},getLowLevelAdminUnitData:function(t){function c(e){e.features.length>0&&(f=a._formatData(s,e.features),r.resolve(f))}var r=new e,i=new n,s=o.adminUnit.lowLevelUnitsQuery,u={},a=this,f=[],l;return i.where=s.whereField+" = '"+t+"' AND "+s.requiredField+" IS NOT NULL",i.returnGeometry=!1,i.outFields=s.outFields,i.orderByFields=s.orderBy,this._query(s.url,i,c,function(e){r.resolve([]),a._queryErrorHandler(e)}),r.promise},getFeaturesByGroupName:function(t,r){var i=new e,s=new n,o=this;return s.where=t.requiredField+" = '"+r+"'",s.geometryPrecision=0,s.returnGeometry=!0,s.outFields=["*"],this._query(t.url,s,function(e){e.features.length>0?i.resolve(e.features):i.resolve([])},function(e){i.resolve([]),o._queryErrorHandler(e)}),i.promise},getFeaturesByGroupNameAndCountry:function(t,r,i){var s=new e,o=new n,u=this;return o.where=t.requiredField+" = '"+r+"'"+" AND NAME_0 = '"+i+"'",o.geometryPrecision=0,o.returnGeometry=!0,o.outFields=["*"],this._query(t.url,o,function(e){e.features.length>0?s.resolve(e.features):s.resolve([])},function(e){s.resolve([]),u._queryErrorHandler(e)}),s.promise},getMillByEntityId:function(t){var r=new e,i=new n,s=this;return i.where="Entity_ID = '"+t+"'",i.geometryPrecision=2,i.returnGeometry=!0,i.outFields=["*"],this._query(o.millPoints.url,i,function(e){e.features.length===1?r.resolve(e.features[0]):r.resolve(!1)},function(e){r.resolve(!1),s._queryErrorHandler(e)}),r.promise},getFeatureById:function(t,r){var i=new e,s=new n,o=this;return s.where="OBJECTID = "+r,s.geometryPrecision=0,s.returnGeometry=!0,s.outFields=["*"],this._query(t,s,function(e){e.features.length===1&&i.resolve(e.features[0])},function(e){i.resolve(!1),o._queryErrorHandler(e)}),i.promise},getFeaturesByScheme:function(t,r){function l(e){e.features.length>0&&(f=a._formatData(i,e.features),s.resolve(f))}var i=o.certifiedArea.schemeQuery,s=new e,u=new n,a=this,f=[];return u.where=i.whereField+" = '"+t+"' AND "+i.secondaryWhereField+" = '"+r+"'",u.returnGeometry=!1,u.outFields=i.outFields,u.orderByFields=i.orderBy,this._query(i.url,u,l,function(e){s.resolve(!1),a._queryErrorHandler(e)}),s.promise},getMillPointData:function(){function a(e){e.features.length>0&&(u=s._formatData(t,e.features),r.resolve(u))}var t=o.millPoints,r=new e,i=new n,s=this,u=[];return i.where="1 = 1",i.returnGeometry=!1,i.outFields=t.outFields,i.orderByFields=t.orderBy,this._query(t.url,i,a,function(e){r.resolve(!1),s._queryErrorHandler(e)}),r.promise},getFeaturesByCommodity:function(t){function l(e){e.features.length>0&&(a=u._formatData(r,e.features),i.resolve(a))}var r=o.commercialEntity.commodityQuery,i=new e,s=new n,u=this,a=[],f;return f=t==="Mining concession"?r.whereField+" = '"+t+"'":r.whereField+" = '"+t+"'",s.where=f,s.returnGeometry=!1,s.outFields=r.outFields,s.orderByFields=r.orderBy,this._query(r.url,s,l,function(e){i.resolve(!1),u._queryErrorHandler(e)}),i.promise},zoomToFeatures:function(e,t){var i=new n,s;i.where=e.whereField+" = '"+t+"'",i.maxAllowableOffset=3e3,i.returnGeometry=!0,i.geometryPrecision=0,this._query(e.url,i,function(e){e.features.length>0&&(s=r.graphicsExtent(e.features),app.map.setExtent(s,!0))},this._queryErrorHandler)},_formatData:function(e,n){var r={},i=[],s,u;t.forEach(n,function(t){u=t.attributes,s=u[e.requiredField]||o.noNameField,r.hasOwnProperty(s)?r[s].children.push({label:u[e.labelField],value:u[e.valueField]}):(r[s]={label:s,value:u[e.valueField],children:[]},r[s].children.push({label:u[e.labelField],value:u[e.valueField]}))});for(var a in r)i.push(r[a]);return i},_query:function(e,t,n,r){var s=new i(e);s.execute(t,n,r)},_queryErrorHandler:function(e){console.error(e)}}}),define("utils/GeoHelper",["esri/Color","esri/units","esri/graphic","esri/geometry/Point","esri/geometry/Circle","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(e,t,n,r,i,s,o){var u=new o(o.STYLE_SOLID,new s(s.STYLE_SOLID,new e([255,0,0]),2),new e([255,200,103,0]));return{preparePointAsPolygon:function(e){var s=e.attributes.Longitude,o=e.attributes.Latitude,a=new i(new r(e.geometry),{radius:50,radiusUnit:t.KILOMETERS});return new n(a,u,e.attributes)},applySelectionSymbolToFeature:function(e){return new n(e.geometry,u,e.attributes)},zoomToFeature:function(e){e.geometry.center?app.map.centerAndZoom(e.geometry.center,9):app.map.setExtent(e.geometry.getExtent(),!0)}}}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.React=e()}}(function(){return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){var n=e("./focusNode"),r={componentDidMount:function(){this.props.autoFocus&&n(this.getDOMNode())}};t.exports=r},{"./focusNode":104}],2:[function(e,t){function n(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&(!e.ctrlKey||!e.altKey)}var i=e("./EventConstants"),s=e("./EventPropagators"),o=e("./ExecutionEnvironment"),u=e("./SyntheticInputEvent"),a=e("./keyOf"),f=o.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||n()),l=32,c=String.fromCharCode(l),h=i.topLevelTypes,p={beforeInput:{phasedRegistrationNames:{bubbled:a({onBeforeInput:null}),captured:a({onBeforeInputCapture:null})},dependencies:[h.topCompositionEnd,h.topKeyPress,h.topTextInput,h.topPaste]}},d=null,v={eventTypes:p,extractEvents:function(e,t,n,i){var o;if(f)switch(e){case h.topKeyPress:var a=i.which;if(a!==l)return;o=String.fromCharCode(a);break;case h.topTextInput:if(o=i.data,o===c)return;break;default:return}else{switch(e){case h.topPaste:d=null;break;case h.topKeyPress:i.which&&!r(i)&&(d=String.fromCharCode(i.which));break;case h.topCompositionEnd:d=i.data}if(null===d)return;o=d}if(o){var v=u.getPooled(p.beforeInput,n,i);return v.data=o,d=null,s.accumulateTwoPhaseDispatches(v),v}}};t.exports=v},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./SyntheticInputEvent":84,"./keyOf":125}],3:[function(e,t){function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={columnCount:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var s={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},o={isUnitlessNumber:r,shorthandPropertyExpansions:s};t.exports=o},{}],4:[function(e,t){var n=e("./CSSProperty"),r=e("./dangerousStyleValue"),i=e("./hyphenateStyleName"),s=e("./memoizeStringOnly"),o=s(function(e){return i(e)}),u={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!=i&&(t+=o(n)+":",t+=r(n,i)+";")}return t||null},setValueForStyles:function(e,t){var i=e.style;for(var s in t)if(t.hasOwnProperty(s)){var o=r(s,t[s]);if(o)i[s]=o;else{var u=n.shorthandPropertyExpansions[s];if(u)for(var a in u)i[a]="";else i[s]=""}}}};t.exports=u},{"./CSSProperty":3,"./dangerousStyleValue":99,"./hyphenateStyleName":116,"./memoizeStringOnly":127}],5:[function(e,t){function n(){this._callbacks=null,this._contexts=null}var r=e("./PooledClass"),i=e("./invariant"),s=e("./mixInto");s(n,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){i(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},{"./PooledClass":26,"./invariant":118,"./mixInto":131}],6:[function(e,t){function n(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function r(e){var t=S.getPooled(k.change,A,e);b.accumulateTwoPhaseDispatches(t),E.batchedUpdates(i,t)}function i(e){y.enqueueEvents(e),y.processEventQueue()}function s(e,t){L=e,A=t,L.attachEvent("onchange",r)}function o(){L&&(L.detachEvent("onchange",r),L=null,A=null)}function u(e,t,n){return e===C.topChange?n:void 0}function a(e,t,n){e===C.topFocus?(o(),s(t,n)):e===C.topBlur&&o()}function f(e,t){L=e,A=t,O=e.value,M=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(L,"value",P),L.attachEvent("onpropertychange",c)}function l(){L&&(delete L.value,L.detachEvent("onpropertychange",c),L=null,A=null,O=null,M=null)}function c(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==O&&(O=t,r(e))}}function h(e,t,n){return e===C.topInput?n:void 0}function p(e,t,n){e===C.topFocus?(l(),f(t,n)):e===C.topBlur&&l()}function d(e){return e!==C.topSelectionChange&&e!==C.topKeyUp&&e!==C.topKeyDown||!L||L.value===O?void 0:(O=L.value,A)}function v(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function m(e,t,n){return e===C.topClick?n:void 0}var g=e("./EventConstants"),y=e("./EventPluginHub"),b=e("./EventPropagators"),w=e("./ExecutionEnvironment"),E=e("./ReactUpdates"),S=e("./SyntheticEvent"),x=e("./isEventSupported"),T=e("./isTextInputElement"),N=e("./keyOf"),C=g.topLevelTypes,k={change:{phasedRegistrationNames:{bubbled:N({onChange:null}),captured:N({onChangeCapture:null})},dependencies:[C.topBlur,C.topChange,C.topClick,C.topFocus,C.topInput,C.topKeyDown,C.topKeyUp,C.topSelectionChange]}},L=null,A=null,O=null,M=null,_=!1;w.canUseDOM&&(_=x("change")&&(!("documentMode"in document)||document.documentMode>8));var D=!1;w.canUseDOM&&(D=x("input")&&(!("documentMode"in document)||document.documentMode>9));var P={get:function(){return M.get.call(this)},set:function(e){O=""+e,M.set.call(this,e)}},H={eventTypes:k,extractEvents:function(e,t,r,i){var s,o;if(n(t)?_?s=u:o=a:T(t)?D?s=h:(s=d,o=p):v(t)&&(s=m),s){var f=s(e,t,r);if(f){var l=S.getPooled(k.change,f,i);return b.accumulateTwoPhaseDispatches(l),l}}o&&o(e,t,r)}};t.exports=H},{"./EventConstants":15,"./EventPluginHub":17,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactUpdates":74,"./SyntheticEvent":82,"./isEventSupported":119,"./isTextInputElement":121,"./keyOf":125}],7:[function(e,t){var n=0,r={createReactRootIndex:function(){return n++}};t.exports=r},{}],8:[function(e,t){function n(e){switch(e){case g.topCompositionStart:return b.compositionStart;case g.topCompositionEnd:return b.compositionEnd;case g.topCompositionUpdate:return b.compositionUpdate}}function r(e,t){return e===g.topKeyDown&&t.keyCode===d}function i(e,t){switch(e){case g.topKeyUp:return-1!==p.indexOf(t.keyCode);case g.topKeyDown:return t.keyCode!==d;case g.topKeyPress:case g.topMouseDown:case g.topBlur:return!0;default:return!1}}function s(e){this.root=e,this.startSelection=f.getSelection(e),this.startValue=this.getText()}var o=e("./EventConstants"),u=e("./EventPropagators"),a=e("./ExecutionEnvironment"),f=e("./ReactInputSelection"),l=e("./SyntheticCompositionEvent"),c=e("./getTextContentAccessor"),h=e("./keyOf"),p=[9,13,27,32],d=229,v=a.canUseDOM&&"CompositionEvent"in window,m=!v||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,g=o.topLevelTypes,y=null,b={compositionEnd:{phasedRegistrationNames:{bubbled:h({onCompositionEnd:null}),captured:h({onCompositionEndCapture:null})},dependencies:[g.topBlur,g.topCompositionEnd,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:h({onCompositionStart:null}),captured:h({onCompositionStartCapture:null})},dependencies:[g.topBlur,g.topCompositionStart,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:h({onCompositionUpdate:null}),captured:h({onCompositionUpdateCapture:null})},dependencies:[g.topBlur,g.topCompositionUpdate,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]}};s.prototype.getText=function(){return this.root.value||this.root[c()]},s.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var w={eventTypes:b,extractEvents:function(e,t,o,a){var f,c;if(v?f=n(e):y?i(e,a)&&(f=b.compositionEnd):r(e,a)&&(f=b.compositionStart),m&&(y||f!==b.compositionStart?f===b.compositionEnd&&y&&(c=y.getData(),y=null):y=new s(t)),f){var h=l.getPooled(f,o,a);return c&&(h.data=c),u.accumulateTwoPhaseDispatches(h),h}}};t.exports=w},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactInputSelection":56,"./SyntheticCompositionEvent":80,"./getTextContentAccessor":113,"./keyOf":125}],9:[function(e,t){function n(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var r,i=e("./Danger"),s=e("./ReactMultiChildUpdateTypes"),o=e("./getTextContentAccessor"),u=e("./invariant"),a=o();r="textContent"===a?function(e,t){e.textContent=t}:function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var f={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:r,processUpdates:function(e,t){for(var o,a=null,f=null,l=0;o=e[l];l++)if(o.type===s.MOVE_EXISTING||o.type===s.REMOVE_NODE){var c=o.fromIndex,h=o.parentNode.childNodes[c],p=o.parentID;u(h),a=a||{},a[p]=a[p]||[],a[p][c]=h,f=f||[],f.push(h)}var d=i.dangerouslyRenderMarkup(t);if(f)for(var v=0;v<f.length;v++)f[v].parentNode.removeChild(f[v]);for(var m=0;o=e[m];m++)switch(o.type){case s.INSERT_MARKUP:n(o.parentNode,d[o.markupIndex],o.toIndex);break;case s.MOVE_EXISTING:n(o.parentNode,a[o.parentID][o.fromIndex],o.toIndex);break;case s.TEXT_CONTENT:r(o.parentNode,o.textContent);break;case s.REMOVE_NODE:}}};t.exports=f},{"./Danger":12,"./ReactMultiChildUpdateTypes":61,"./getTextContentAccessor":113,"./invariant":118}],10:[function(e,t){var n=e("./invariant"),r={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},i=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var a in t){n(!s.isStandardName.hasOwnProperty(a)),s.isStandardName[a]=!0;var f=a.toLowerCase();if(s.getPossibleStandardName[f]=a,i.hasOwnProperty(a)){var l=i[a];s.getPossibleStandardName[l]=a,s.getAttributeName[a]=l}else s.getAttributeName[a]=f;s.getPropertyName[a]=o.hasOwnProperty(a)?o[a]:a,s.getMutationMethod[a]=u.hasOwnProperty(a)?u[a]:null;var c=t[a];s.mustUseAttribute[a]=c&r.MUST_USE_ATTRIBUTE,s.mustUseProperty[a]=c&r.MUST_USE_PROPERTY,s.hasSideEffects[a]=c&r.HAS_SIDE_EFFECTS,s.hasBooleanValue[a]=c&r.HAS_BOOLEAN_VALUE,s.hasNumericValue[a]=c&r.HAS_NUMERIC_VALUE,s.hasPositiveNumericValue[a]=c&r.HAS_POSITIVE_NUMERIC_VALUE,s.hasOverloadedBooleanValue[a]=c&r.HAS_OVERLOADED_BOOLEAN_VALUE,n(!s.mustUseAttribute[a]||!s.mustUseProperty[a]),n(s.mustUseProperty[a]||!s.hasSideEffects[a]),n(!!s.hasBooleanValue[a]+!!s.hasNumericValue[a]+!!s.hasOverloadedBooleanValue[a]<=1)}}},i={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=i[e];return r||(i[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:r};t.exports=s},{"./invariant":118}],11:[function(e,t){function n(e,t){return null==t||r.hasBooleanValue[e]&&!t||r.hasNumericValue[e]&&isNaN(t)||r.hasPositiveNumericValue[e]&&1>t||r.hasOverloadedBooleanValue[e]&&t===!1}var r=e("./DOMProperty"),i=e("./escapeTextForBrowser"),s=e("./memoizeStringOnly"),o=(e("./warning"),s(function(e){return i(e)+'="'})),u={createMarkupForID:function(e){return o(r.ID_ATTRIBUTE_NAME)+i(e)+'"'},createMarkupForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){if(n(e,t))return"";var s=r.getAttributeName[e];return r.hasBooleanValue[e]||r.hasOverloadedBooleanValue[e]&&t===!0?i(s):o(s)+i(t)+'"'}return r.isCustomAttribute(e)?null==t?"":o(e)+i(t)+'"':null},setValueForProperty:function(e,t,i){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var s=r.getMutationMethod[t];if(s)s(e,i);else if(n(t,i))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+i);else{var o=r.getPropertyName[t];r.hasSideEffects[t]&&e[o]===i||(e[o]=i)}}else r.isCustomAttribute(t)&&(null==i?e.removeAttribute(t):e.setAttribute(t,""+i))},deleteValueForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,void 0);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var i=r.getPropertyName[t],s=r.getDefaultValueForProperty(e.nodeName,i);r.hasSideEffects[t]&&e[i]===s||(e[i]=s)}}else r.isCustomAttribute(t)&&e.removeAttribute(t)}};t.exports=u},{"./DOMProperty":10,"./escapeTextForBrowser":102,"./memoizeStringOnly":127,"./warning":139}],12:[function(e,t){function n(e){return e.substring(1,e.indexOf(" "))}var r=e("./ExecutionEnvironment"),i=e("./createNodesFromMarkup"),s=e("./emptyFunction"),o=e("./getMarkupWrap"),u=e("./invariant"),a=/^(<[^ \/>]+)/,f="data-danger-index",l={dangerouslyRenderMarkup:function(e){u(r.canUseDOM);for(var t,l={},h=0;h<e.length;h++)u(e[h]),t=n(e[h]),t=o(t)?t:"*",l[t]=l[t]||[],l[t][h]=e[h];var p=[],d=0;for(t in l)if(l.hasOwnProperty(t)){var v=l[t];for(var m in v)if(v.hasOwnProperty(m)){var g=v[m];v[m]=g.replace(a,"$1 "+f+'="'+m+'" ')}var y=i(v.join(""),s);for(h=0;h<y.length;++h){var b=y[h];b.hasAttribute&&b.hasAttribute(f)&&(m=+b.getAttribute(f),b.removeAttribute(f),u(!p.hasOwnProperty(m)),p[m]=b,d+=1)}}return u(d===p.length),u(p.length===e.length),p},dangerouslyReplaceNodeWithMarkup:function(e,t){u(r.canUseDOM),u(t),u("html"!==e.tagName.toLowerCase());var n=i(t,s)[0];e.parentNode.replaceChild(n,e)}};t.exports=l},{"./ExecutionEnvironment":21,"./createNodesFromMarkup":98,"./emptyFunction":100,"./getMarkupWrap":110,"./invariant":118}],13:[function(e,t){var n=e("./keyOf"),r=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({CompositionEventPlugin:null}),n({BeforeInputEventPlugin:null}),n({AnalyticsEventPlugin:null}),n({MobileSafariClickEventPlugin:null})];t.exports=r},{"./keyOf":125}],14:[function(e,t){var n=e("./EventConstants"),r=e("./EventPropagators"),i=e("./SyntheticMouseEvent"),s=e("./ReactMount"),o=e("./keyOf"),u=n.topLevelTypes,a=s.getFirstReactDOM,f={mouseEnter:{registrationName:o({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:o({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},l=[null,null],c={eventTypes:f,extractEvents:function(e,t,n,o){if(e===u.topMouseOver&&(o.relatedTarget||o.fromElement))return null;if(e!==u.topMouseOut&&e!==u.topMouseOver)return null;var c;if(t.window===t)c=t;else{var h=t.ownerDocument;c=h?h.defaultView||h.parentWindow:window}var p,d;if(e===u.topMouseOut?(p=t,d=a(o.relatedTarget||o.toElement)||c):(p=c,d=t),p===d)return null;var v=p?s.getID(p):"",m=d?s.getID(d):"",g=i.getPooled(f.mouseLeave,v,o);g.type="mouseleave",g.target=p,g.relatedTarget=d;var y=i.getPooled(f.mouseEnter,m,o);return y.type="mouseenter",y.target=d,y.relatedTarget=p,r.accumulateEnterLeaveDispatches(g,y,v,m),l[0]=g,l[1]=y,l}};t.exports=c},{"./EventConstants":15,"./EventPropagators":20,"./ReactMount":59,"./SyntheticMouseEvent":86,"./keyOf":125}],15:[function(e,t){var n=e("./keyMirror"),r=n({bubbled:null,captured:null}),i=n({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),s={topLevelTypes:i,PropagationPhases:r};t.exports=s},{"./keyMirror":124}],16:[function(e,t){var n=e("./emptyFunction"),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,r){return e.addEventListener?(e.addEventListener(t,r,!0),{remove:function(){e.removeEventListener(t,r,!0)}}):{remove:n}},registerDefault:function(){}};t.exports=r},{"./emptyFunction":100}],17:[function(e,t){var n=e("./EventPluginRegistry"),r=e("./EventPluginUtils"),i=e("./accumulate"),s=e("./forEachAccumulated"),o=e("./invariant"),u=(e("./isEventSupported"),e("./monitorCodeUse"),{}),a=null,f=function(e){if(e){var t=r.executeDispatch,i=n.getPluginModuleForEvent(e);i&&i.executeDispatch&&(t=i.executeDispatch),r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},l=null,c={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(e){l=e},getInstanceHandle:function(){return l},injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},eventNameDispatchConfigs:n.eventNameDispatchConfigs,registrationNameModules:n.registrationNameModules,putListener:function(e,t,n){o(!n||"function"==typeof n);var r=u[t]||(u[t]={});r[e]=n},getListener:function(e,t){var n=u[t];return n&&n[e]},deleteListener:function(e,t){var n=u[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in u)delete u[t][e]},extractEvents:function(e,t,r,s){for(var o,u=n.plugins,a=0,f=u.length;f>a;a++){var l=u[a];if(l){var c=l.extractEvents(e,t,r,s);c&&(o=i(o,c))}}return o},enqueueEvents:function(e){e&&(a=i(a,e))},processEventQueue:function(){var e=a;a=null,s(e,f),o(!a)},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=c},{"./EventPluginRegistry":18,"./EventPluginUtils":19,"./accumulate":92,"./forEachAccumulated":105,"./invariant":118,"./isEventSupported":119,"./monitorCodeUse":132}],18:[function(e,t){function n(){if(o)for(var e in u){var t=u[e],n=o.indexOf(e);if(s(n>-1),!a.plugins[n]){s(t.extractEvents),a.plugins[n]=t;var i=t.eventTypes;for(var f in i)s(r(i[f],t,f))}}}function r(e,t,n){s(!a.eventNameDispatchConfigs.hasOwnProperty(n)),a.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];i(u,t,n)}return!0}return e.registrationName?(i(e.registrationName,t,n),!0):!1}function i(e,t,n){s(!a.registrationNameModules[e]),a.registrationNameModules[e]=t,a.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var s=e("./invariant"),o=null,u={},a={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){s(!o),o=Array.prototype.slice.call(e),n()},injectEventPluginsByName:function(e){var t=!1;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];u.hasOwnProperty(r)&&u[r]===i||(s(!u[r]),u[r]=i,t=!0)}t&&n()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return a.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=a.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){o=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];a.plugins.length=0;var t=a.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=a.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=a},{"./invariant":118}],19:[function(e,t){function n(e){return e===v.topMouseUp||e===v.topTouchEnd||e===v.topTouchCancel}function r(e){return e===v.topMouseMove||e===v.topTouchMove}function i(e){return e===v.topMouseDown||e===v.topTouchStart}function s(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)t(e,n[i],r[i]);else n&&t(e,n,r)}function o(e,t,n){e.currentTarget=d.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function u(e,t){s(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function a(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function f(e){var t=a(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function l(e){var t=e._dispatchListeners,n=e._dispatchIDs;p(!Array.isArray(t));var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function c(e){return!!e._dispatchListeners}var h=e("./EventConstants"),p=e("./invariant"),d={Mount:null,injectMount:function(e){d.Mount=e}},v=h.topLevelTypes,m={isEndish:n,isMoveish:r,isStartish:i,executeDirectDispatch:l,executeDispatch:o,executeDispatchesInOrder:u,executeDispatchesInOrderStopAtTrue:f,hasDispatches:c,injection:d,useTouchEvents:!1};t.exports=m},{"./EventConstants":15,"./invariant":118}],20:[function(e,t){function n(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function r(e,t,r){var i=t?d.bubbled:d.captured,s=n(e,r,i);s&&(r._dispatchListeners=h(r._dispatchListeners,s),r._dispatchIDs=h(r._dispatchIDs,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&c.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,r,e)}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=v(e,r);i&&(n._dispatchListeners=h(n._dispatchListeners,i),n._dispatchIDs=h(n._dispatchIDs,e))}}function o(e){e&&e.dispatchConfig.registrationName&&s(e.dispatchMarker,null,e)}function u(e){p(e,i)}function a(e,t,n,r){c.injection.getInstanceHandle().traverseEnterLeave(n,r,s,e,t)}function f(e){p(e,o)}var l=e("./EventConstants"),c=e("./EventPluginHub"),h=e("./accumulate"),p=e("./forEachAccumulated"),d=l.PropagationPhases,v=c.getListener,m={accumulateTwoPhaseDispatches:u,accumulateDirectDispatches:f,accumulateEnterLeaveDispatches:a};t.exports=m},{"./EventConstants":15,"./EventPluginHub":17,"./accumulate":92,"./forEachAccumulated":105}],21:[function(e,t){var n="undefined"!=typeof window&&!!window.document&&!!window.document.createElement,r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&(!!window.addEventListener||!!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},{}],22:[function(e,t){var n,r=e("./DOMProperty"),i=e("./ExecutionEnvironment"),s=r.injection.MUST_USE_ATTRIBUTE,o=r.injection.MUST_USE_PROPERTY,u=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_SIDE_EFFECTS,f=r.injection.HAS_NUMERIC_VALUE,l=r.injection.HAS_POSITIVE_NUMERIC_VALUE,c=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(i.canUseDOM){var h=document.implementation;n=h&&h.hasFeature&&h.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var p={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:s|u,allowTransparency:s,alt:null,async:u,autoComplete:null,autoPlay:u,cellPadding:null,cellSpacing:null,charSet:s,checked:o|u,className:n?s:o,cols:s|l,colSpan:null,content:null,contentEditable:null,contextMenu:s,controls:o|u,coords:null,crossOrigin:null,data:null,dateTime:s,defer:u,dir:null,disabled:s|u,download:c,draggable:null,encType:null,form:s,formNoValidate:u,frameBorder:s,height:s,hidden:s|u,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:o,label:null,lang:null,list:null,loop:o|u,max:null,maxLength:s,mediaGroup:null,method:null,min:null,multiple:o|u,muted:o|u,name:null,noValidate:u,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:o|u,rel:null,required:u,role:s,rows:s|l,rowSpan:null,sandbox:null,scope:null,scrollLeft:o,scrolling:null,scrollTop:o,seamless:s|u,selected:o|u,shape:null,size:s|l,span:l,spellCheck:null,src:null,srcDoc:o,srcSet:null,start:f,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:o|a,width:s,wmode:s,autoCapitalize:null,autoCorrect:null,itemProp:s,itemScope:s|u,itemType:s,property:null},DOMAttributeNames:{className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=p},{"./DOMProperty":10,"./ExecutionEnvironment":21}],23:[function(e,t){function n(e){a(null==e.props.checkedLink||null==e.props.valueLink)}function r(e){n(e),a(null==e.props.value&&null==e.props.onChange)}function i(e){n(e),a(null==e.props.checked&&null==e.props.onChange)}function s(e){this.props.valueLink.requestChange(e.target.value)}function o(e){this.props.checkedLink.requestChange(e.target.checked)}var u=e("./ReactPropTypes"),a=e("./invariant"),f={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},l={Mixin:{propTypes:{value:function(e,t){return!e[t]||f[e.type]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t){return!e[t]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func}},getValue:function(e){return e.props.valueLink?(r(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(i(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(r(e),s):e.props.checkedLink?(i(e),o):e.props.onChange}};t.exports=l},{"./ReactPropTypes":67,"./invariant":118}],24:[function(e,t){function n(e){e.remove()}var r=e("./ReactBrowserEventEmitter"),i=e("./accumulate"),s=e("./forEachAccumulated"),o=e("./invariant"),u={trapBubbledEvent:function(e,t){o(this.isMounted());var n=r.trapBubbledEvent(e,t,this.getDOMNode());this._localEventListeners=i(this._localEventListeners,n)},componentWillUnmount:function(){this._localEventListeners&&s(this._localEventListeners,n)}};t.exports=u},{"./ReactBrowserEventEmitter":29,"./accumulate":92,"./forEachAccumulated":105,"./invariant":118}],25:[function(e,t){var n=e("./EventConstants"),r=e("./emptyFunction"),i=n.topLevelTypes,s={eventTypes:null,extractEvents:function(e,t,n,s){if(e===i.topTouchStart){var u=s.target;u&&!u.onclick&&(u.onclick=r)}}};t.exports=s},{"./EventConstants":15,"./emptyFunction":100}],26:[function(e,t){var n=e("./invariant"),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},s=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},o=function(e,t,n,r,i){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,r,i),o}return new s(e,t,n,r,i)},u=function(e){var t=this;n(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},a=10,f=r,l=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||f,n.poolSize||(n.poolSize=a),n.release=u,n},c={addPoolingTo:l,oneArgumentPooler:r,twoArgumentPooler:i,threeArgumentPooler:s,fiveArgumentPooler:o};t.exports=c},{"./invariant":118}],27:[function(e,t){var n=e("./DOMPropertyOperations"),r=e("./EventPluginUtils"),i=e("./ReactChildren"),s=e("./ReactComponent"),o=e("./ReactCompositeComponent"),u=e("./ReactContext"),a=e("./ReactCurrentOwner"),f=e("./ReactDescriptor"),l=e("./ReactDOM"),c=e("./ReactDOMComponent"),h=e("./ReactDefaultInjection"),p=e("./ReactInstanceHandles"),d=e("./ReactMount"),v=e("./ReactMultiChild"),m=e("./ReactPerf"),g=e("./ReactPropTypes"),y=e("./ReactServerRendering"),b=e("./ReactTextComponent"),w=e("./onlyChild");h.inject();var E={Children:{map:i.map,forEach:i.forEach,count:i.count,only:w},DOM:l,PropTypes:g,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:o.createClass,createDescriptor:function(e){var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)},constructAndRenderComponent:d.constructAndRenderComponent,constructAndRenderComponentByID:d.constructAndRenderComponentByID,renderComponent:m.measure("React","renderComponent",d.renderComponent),renderComponentToString:y.renderComponentToString,renderComponentToStaticMarkup:y.renderComponentToStaticMarkup,unmountComponentAtNode:d.unmountComponentAtNode,isValidClass:f.isValidFactory,isValidComponent:f.isValidDescriptor,withContext:u.withContext,__internals:{Component:s,CurrentOwner:a,DOMComponent:c,DOMPropertyOperations:n,InstanceHandles:p,Mount:d,MultiChild:v,TextComponent:b}};E.version="0.11.1",t.exports=E},{"./DOMPropertyOperations":11,"./EventPluginUtils":19,"./ReactChildren":30,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactDOM":36,"./ReactDOMComponent":38,"./ReactDefaultInjection":48,"./ReactDescriptor":49,"./ReactInstanceHandles":57,"./ReactMount":59,"./ReactMultiChild":60,"./ReactPerf":63,"./ReactPropTypes":67,"./ReactServerRendering":71,"./ReactTextComponent":73,"./onlyChild":133}],28:[function(e,t){var n=e("./ReactEmptyComponent"),r=e("./ReactMount"),i=e("./invariant"),s={getDOMNode:function(){return i(this.isMounted()),n.isNullComponentID(this._rootNodeID)?null:r.getNode(this._rootNodeID)}};t.exports=s},{"./ReactEmptyComponent":51,"./ReactMount":59,"./invariant":118}],29:[function(e,t){function n(e){return Object.prototype.hasOwnProperty.call(e,d)||(e[d]=h++,l[e[d]]={}),l[e[d]]}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPluginRegistry"),o=e("./ReactEventEmitterMixin"),u=e("./ViewportMetrics"),a=e("./isEventSupported"),f=e("./merge"),l={},c=!1,h=0,p={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},d="_reactListenersID"+String(Math.random()).slice(2),v=f(o,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!!v.ReactEventListener&&!!v.ReactEventListener.isEnabled()},listenTo:function(e,t){for(var i=t,o=n(i),u=s.registrationNameDependencies[e],f=r.topLevelTypes,l=0,c=u.length;c>l;l++){var h=u[l];o.hasOwnProperty(h)&&o[h]||(h===f.topWheel?a("wheel")?v.ReactEventListener.trapBubbledEvent(f.topWheel,"wheel",i):a("mousewheel")?v.ReactEventListener.trapBubbledEvent(f.topWheel,"mousewheel",i):v.ReactEventListener.trapBubbledEvent(f.topWheel,"DOMMouseScroll",i):h===f.topScroll?a("scroll",!0)?v.ReactEventListener.trapCapturedEvent(f.topScroll,"scroll",i):v.ReactEventListener.trapBubbledEvent(f.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):h===f.topFocus||h===f.topBlur?(a("focus",!0)?(v.ReactEventListener.trapCapturedEvent(f.topFocus,"focus",i),v.ReactEventListener.trapCapturedEvent(f.topBlur,"blur",i)):a("focusin")&&(v.ReactEventListener.trapBubbledEvent(f.topFocus,"focusin",i),v.ReactEventListener.trapBubbledEvent(f.topBlur,"focusout",i)),o[f.topBlur]=!0,o[f.topFocus]=!0):p.hasOwnProperty(h)&&v.ReactEventListener.trapBubbledEvent(h,p[h],i),o[h]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!c){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),c=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});t.exports=v},{"./EventConstants":15,"./EventPluginHub":17,"./EventPluginRegistry":18,"./ReactEventEmitterMixin":53,"./ViewportMetrics":91,"./isEventSupported":119,"./merge":128}],30:[function(e,t){function n(e,t){this.forEachFunction=e,this.forEachContext=t}function r(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function i(e,t,i){if(null==e)return e;var s=n.getPooled(t,i);c(e,r,s),n.release(s)}function s(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function o(e,t,n,r){var i=e,s=i.mapResult,o=!s.hasOwnProperty(n);if(o){var u=i.mapFunction.call(i.mapContext,t,r);s[n]=u}}function u(e,t,n){if(null==e)return e;var r={},i=s.getPooled(r,t,n);return c(e,o,i),s.release(i),r}function a(){return null}function f(e){return c(e,a,null)}var l=e("./PooledClass"),c=e("./traverseAllChildren"),h=(e("./warning"),l.twoArgumentPooler),p=l.threeArgumentPooler;l.addPoolingTo(n,h),l.addPoolingTo(s,p);var d={forEach:i,map:u,count:f};t.exports=d},{"./PooledClass":26,"./traverseAllChildren":138,"./warning":139}],31:[function(e,t){var n=e("./ReactDescriptor"),r=e("./ReactOwner"),i=e("./ReactUpdates"),s=e("./invariant"),o=e("./keyMirror"),u=e("./merge"),a=o({MOUNTED:null,UNMOUNTED:null}),f=!1,l=null,c=null,h={injection:{injectEnvironment:function(e){s(!f),c=e.mountImageIntoNode,l=e.unmountIDFromEnvironment,h.BackendIDOperations=e.BackendIDOperations,f=!0}},LifeCycle:a,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===a.MOUNTED},setProps:function(e,t){var n=this._pendingDescriptor||this._descriptor;this.replaceProps(u(n.props,e),t)},replaceProps:function(e,t){s(this.isMounted()),s(0===this._mountDepth),this._pendingDescriptor=n.cloneAndReplaceProps(this._pendingDescriptor||this._descriptor,e),i.enqueueUpdate(this,t)},_setPropsInternal:function(e,t){var r=this._pendingDescriptor||this._descriptor;this._pendingDescriptor=n.cloneAndReplaceProps(r,u(r.props,e)),i.enqueueUpdate(this,t)},construct:function(e){this.props=e.props,this._owner=e._owner,this._lifeCycleState=a.UNMOUNTED,this._pendingCallbacks=null,this._descriptor=e,this._pendingDescriptor=null},mountComponent:function(e,t,n){s(!this.isMounted());var i=this._descriptor.props;if(null!=i.ref){var o=this._descriptor._owner;r.addComponentAsRefTo(this,i.ref,o)}this._rootNodeID=e,this._lifeCycleState=a.MOUNTED,this._mountDepth=n},unmountComponent:function(){s(this.isMounted());var e=this.props;null!=e.ref&&r.removeComponentAsRefFrom(this,e.ref,this._owner),l(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=a.UNMOUNTED},receiveComponent:function(e,t){s(this.isMounted()),this._pendingDescriptor=e,this.performUpdateIfNecessary(t)},performUpdateIfNecessary:function(e){if(null!=this._pendingDescriptor){var t=this._descriptor,n=this._pendingDescriptor;this._descriptor=n,this.props=n.props,this._owner=n._owner,this._pendingDescriptor=null,this.updateComponent(e,t)}},updateComponent:function(e,t){var n=this._descriptor;(n._owner!==t._owner||n.props.ref!==t.props.ref)&&(null!=t.props.ref&&r.removeComponentAsRefFrom(this,t.props.ref,t._owner),null!=n.props.ref&&r.addComponentAsRefTo(this,n.props.ref,n._owner))},mountComponentIntoNode:function(e,t,n){var r=i.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,e,t,r,n),i.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(e,t,n,r){var i=this.mountComponent(e,n,0);c(i,t,r)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return t&&t.refs?t.refs[e]:null}}};t.exports=h},{"./ReactDescriptor":49,"./ReactOwner":62,"./ReactUpdates":74,"./invariant":118,"./keyMirror":124,"./merge":128}],32:[function(e,t){var n=e("./ReactDOMIDOperations"),r=e("./ReactMarkupChecksum"),i=e("./ReactMount"),s=e("./ReactPerf"),o=e("./ReactReconcileTransaction"),u=e("./getReactRootElementInContainer"),a=e("./invariant"),f=e("./setInnerHTML"),l=1,c=9,h={ReactReconcileTransaction:o,BackendIDOperations:n,unmountIDFromEnvironment:function(e){i.purgeID(e)},mountImageIntoNode:s.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,n){if(a(t&&(t.nodeType===l||t.nodeType===c)),n){if(r.canReuseMarkup(e,u(t)))return;a(t.nodeType!==c)}a(t.nodeType!==c),f(t,e)})};t.exports=h},{"./ReactDOMIDOperations":40,"./ReactMarkupChecksum":58,"./ReactMount":59,"./ReactPerf":63,"./ReactReconcileTransaction":69,"./getReactRootElementInContainer":112,"./invariant":118,"./setInnerHTML":134}],33:[function(e,t){function n(e){var t=e._owner||null;return t&&t.constructor&&t.constructor.displayName?" Check the render method of `"+t.constructor.displayName+"`.":""}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&x("function"==typeof t[n])}function i(e,t){var n=M.hasOwnProperty(t)?M[t]:null;P.hasOwnProperty(t)&&x(n===A.OVERRIDE_BASE),e.hasOwnProperty(t)&&x(n===A.DEFINE_MANY||n===A.DEFINE_MANY_MERGED)}function s(e){var t=e._compositeLifeCycleState;x(e.isMounted()||t===D.MOUNTING),x(t!==D.RECEIVING_STATE),x(t!==D.UNMOUNTING)}function o(e,t){x(!d.isValidFactory(t)),x(!d.isValidDescriptor(t));var n=e.prototype;for(var r in t){var s=t[r];if(t.hasOwnProperty(r))if(i(n,r),_.hasOwnProperty(r))_[r](e,s);else{var o=M.hasOwnProperty(r),u=n.hasOwnProperty(r),a=s&&s.__reactDontBind,c="function"==typeof s,h=c&&!o&&!u&&!a;if(h)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=s,n[r]=s;else if(u){var p=M[r];x(o&&(p===A.DEFINE_MANY_MERGED||p===A.DEFINE_MANY)),p===A.DEFINE_MANY_MERGED?n[r]=f(n[r],s):p===A.DEFINE_MANY&&(n[r]=l(n[r],s))}else n[r]=s}}}function u(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in e,s=r;if(i){var o=e[n],u=typeof o,a=typeof r;x("function"===u&&"function"===a),s=l(o,r)}e[n]=s}}}function a(e,t){return x(e&&t&&"object"==typeof e&&"object"==typeof t),k(t,function(t,n){x(void 0===e[n]),e[n]=t}),e}function f(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);return null==n?r:null==r?n:a(n,r)}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var c=e("./ReactComponent"),h=e("./ReactContext"),p=e("./ReactCurrentOwner"),d=e("./ReactDescriptor"),v=(e("./ReactDescriptorValidator"),e("./ReactEmptyComponent")),m=e("./ReactErrorUtils"),g=e("./ReactOwner"),y=e("./ReactPerf"),b=e("./ReactPropTransferer"),w=e("./ReactPropTypeLocations"),E=(e("./ReactPropTypeLocationNames"),e("./ReactUpdates")),S=e("./instantiateReactComponent"),x=e("./invariant"),T=e("./keyMirror"),N=e("./merge"),C=e("./mixInto"),k=(e("./monitorCodeUse"),e("./mapObject")),L=e("./shouldUpdateReactComponent"),A=(e("./warning"),T({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null})),O=[],M={mixins:A.DEFINE_MANY,statics:A.DEFINE_MANY,propTypes:A.DEFINE_MANY,contextTypes:A.DEFINE_MANY,childContextTypes:A.DEFINE_MANY,getDefaultProps:A.DEFINE_MANY_MERGED,getInitialState:A.DEFINE_MANY_MERGED,getChildContext:A.DEFINE_MANY_MERGED,render:A.DEFINE_ONCE,componentWillMount:A.DEFINE_MANY,componentDidMount:A.DEFINE_MANY,componentWillReceiveProps:A.DEFINE_MANY,shouldComponentUpdate:A.DEFINE_ONCE,componentWillUpdate:A.DEFINE_MANY,componentDidUpdate:A.DEFINE_MANY,componentWillUnmount:A.DEFINE_MANY,updateComponent:A.OVERRIDE_BASE},_={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)o(e,t[n])},childContextTypes:function(e,t){r(e,t,w.childContext),e.childContextTypes=N(e.childContextTypes,t)},contextTypes:function(e,t){r(e,t,w.context),e.contextTypes=N(e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps=e.getDefaultProps?f(e.getDefaultProps,t):t},propTypes:function(e,t){r(e,t,w.prop),e.propTypes=N(e.propTypes,t)},statics:function(e,t){u(e,t)}},D=T({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),P={construct:function(){c.Mixin.construct.apply(this,arguments),g.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return c.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==D.MOUNTING},mountComponent:y.measure("ReactCompositeComponent","mountComponent",function(e,t,n){c.Mixin.mountComponent.call(this,e,t,n),this._compositeLifeCycleState=D.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._descriptor._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,x("object"==typeof this.state&&!Array.isArray(this.state)),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=S(this._renderValidatedComponent()),this._compositeLifeCycleState=null;var r=this._renderedComponent.mountComponent(e,t,n+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this.componentDidMount,this),r}),unmountComponent:function(){this._compositeLifeCycleState=D.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,c.Mixin.unmountComponent.call(this)},setState:function(e,t){x("object"==typeof e||null==e),this.replaceState(N(this._pendingState||this.state,e),t)},replaceState:function(e,t){s(this),this._pendingState=e,this._compositeLifeCycleState!==D.MOUNTING&&E.enqueueUpdate(this,t)},_processContext:function(e){var t=null,n=this.constructor.contextTypes;if(n){t={};for(var r in n)t[r]=e[r]}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext();if(this.constructor.displayName||"ReactCompositeComponent",t){x("object"==typeof this.constructor.childContextTypes);for(var n in t)x(n in this.constructor.childContextTypes);return N(e,t)}return e},_processProps:function(e){var t,n=this.constructor.defaultProps;if(n){t=N(e);for(var r in n)"undefined"==typeof t[r]&&(t[r]=n[r])}else t=e;return t},_checkPropTypes:function(e,t,r){var i=this.constructor.displayName;for(var s in e)if(e.hasOwnProperty(s)){var o=e[s](t,s,i,r);o instanceof Error&&n(this)}},performUpdateIfNecessary:function(e){var t=this._compositeLifeCycleState;if(t!==D.MOUNTING&&t!==D.RECEIVING_PROPS&&(null!=this._pendingDescriptor||null!=this._pendingState||this._pendingForceUpdate)){var n=this.context,r=this.props,i=this._descriptor;null!=this._pendingDescriptor&&(i=this._pendingDescriptor,n=this._processContext(i._context),r=this._processProps(i.props),this._pendingDescriptor=null,this._compositeLifeCycleState=D.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(r,n)),this._compositeLifeCycleState=D.RECEIVING_STATE;var s=this._pendingState||this.state;this._pendingState=null;try{var o=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(r,s,n);o?(this._pendingForceUpdate=!1,this._performComponentUpdate(i,r,s,n,e)):(this._descriptor=i,this.props=r,this.state=s,this.context=n,this._owner=i._owner)}finally{this._compositeLifeCycleState=null}}},_performComponentUpdate:function(e,t,n,r,i){var s=this._descriptor,o=this.props,u=this.state,a=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,r),this._descriptor=e,this.props=t,this.state=n,this.context=r,this._owner=e._owner,this.updateComponent(i,s),this.componentDidUpdate&&i.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,o,u,a),this)},receiveComponent:function(e,t){(e!==this._descriptor||null==e._owner)&&c.Mixin.receiveComponent.call(this,e,t)},updateComponent:y.measure("ReactCompositeComponent","updateComponent",function(e,t){c.Mixin.updateComponent.call(this,e,t);var n=this._renderedComponent,r=n._descriptor,i=this._renderValidatedComponent();if(L(r,i))n.receiveComponent(i,e);else{var s=this._rootNodeID,o=n._rootNodeID;n.unmountComponent(),this._renderedComponent=S(i);var u=this._renderedComponent.mountComponent(s,e,this._mountDepth+1);c.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(o,u)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;x(this.isMounted()||t===D.MOUNTING),x(t!==D.RECEIVING_STATE&&t!==D.UNMOUNTING),this._pendingForceUpdate=!0,E.enqueueUpdate(this,e)},_renderValidatedComponent:y.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=h.current;h.current=this._processChildContext(this._descriptor._context),p.current=this;try{e=this.render(),null===e||e===!1?(e=v.getEmptyComponent(),v.registerNullComponentID(this._rootNodeID)):v.deregisterNullComponentID(this._rootNodeID)}finally{h.current=t,p.current=null}return x(d.isValidDescriptor(e)),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(e)){var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(m.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,n=function(){return e.apply(t,arguments)};return n}},H=function(){};C(H,c.Mixin),C(H,g.Mixin),C(H,b.Mixin),C(H,P);var B={LifeCycle:D,Base:H,createClass:function(e){var t=function(e,t){this.construct(e,t)};t.prototype=new H,t.prototype.constructor=t,O.forEach(o.bind(null,t)),o(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),x(t.prototype.render);for(var n in M)t.prototype[n]||(t.prototype[n]=null);var r=d.createFactory(t);return r},injection:{injectMixin:function(e){O.push(e)}}};t.exports=B},{"./ReactComponent":31,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactDescriptor":49,"./ReactDescriptorValidator":50,"./ReactEmptyComponent":51,"./ReactErrorUtils":52,"./ReactOwner":62,"./ReactPerf":63,"./ReactPropTransferer":64,"./ReactPropTypeLocationNames":65,"./ReactPropTypeLocations":66,"./ReactUpdates":74,"./instantiateReactComponent":117,"./invariant":118,"./keyMirror":124,"./mapObject":126,"./merge":128,"./mixInto":131,"./monitorCodeUse":132,"./shouldUpdateReactComponent":136,"./warning":139}],34:[function(e,t){var n=e("./merge"),r={current:{},withContext:function(e,t){var i,s=r.current;r.current=n(s,e);try{i=t()}finally{r.current=s}return i}};t.exports=r},{"./merge":128}],35:[function(e,t){var n={current:null};t.exports=n},{}],36:[function(e,t){function n(e,t){var n=function(e){this.construct(e)};n.prototype=new i(t,e),n.prototype.constructor=n,n.displayName=t;var s=r.createFactory(n);return s}var r=e("./ReactDescriptor"),i=(e("./ReactDescriptorValidator"),e("./ReactDOMComponent")),s=e("./mergeInto"),o=e("./mapObject"),u=o({a:!1,abbr:!1,address:!1,area:!0,article:!1,aside:!1,audio:!1,b:!1,base:!0,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!0,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!0,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!0,circle:!1,defs:!1,ellipse:!1,g:!1,line:!1,linearGradient:!1,mask:!1,path:!1,pattern:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,stop:!1,svg:!1,text:!1,tspan:!1},n),a={injectComponentClasses:function(e){s(u,e)}};u.injection=a,t.exports=u},{"./ReactDOMComponent":38,"./ReactDescriptor":49,"./ReactDescriptorValidator":50,"./mapObject":126,"./mergeInto":130}],37:[function(e,t){var n=e("./AutoFocusMixin"),r=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),s=e("./ReactDOM"),o=e("./keyMirror"),u=s.button,a=o({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),f=i.createClass({displayName:"ReactDOMButton",mixins:[n,r],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&a[t]||(e[t]=this.props[t]);return u(e,this.props.children)}});t.exports=f},{"./AutoFocusMixin":1,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./keyMirror":124}],38:[function(e,t){function n(e){e&&(v(null==e.children||null==e.dangerouslySetInnerHTML),v(null==e.style||"object"==typeof e.style))}function r(e,t,n,r){var i=c.findReactContainerForID(e);if(i){var s=i.nodeType===T?i.ownerDocument:i;w(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function i(e,t){this._tagOpen="<"+e,this._tagClose=t?"":"</"+e+">",this.tagName=e.toUpperCase()}var s=e("./CSSPropertyOperations"),o=e("./DOMProperty"),u=e("./DOMPropertyOperations"),a=e("./ReactBrowserComponentMixin"),f=e("./ReactComponent"),l=e("./ReactBrowserEventEmitter"),c=e("./ReactMount"),h=e("./ReactMultiChild"),p=e("./ReactPerf"),d=e("./escapeTextForBrowser"),v=e("./invariant"),m=e("./keyOf"),g=e("./merge"),y=e("./mixInto"),b=l.deleteListener,w=l.listenTo,E=l.registrationNameModules,S={string:!0,number:!0},x=m({style:null}),T=1;i.Mixin={mountComponent:p.measure("ReactDOMComponent","mountComponent",function(e,t,r){return f.Mixin.mountComponent.call(this,e,t,r),n(this.props),this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+this._tagClose}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n=this._tagOpen;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(null!=o)if(E.hasOwnProperty(i))r(this._rootNodeID,i,o,e);else{i===x&&(o&&(o=t.style=g(t.style)),o=s.createMarkupForStyles(o));var a=u.createMarkupForProperty(i,o);a&&(n+=" "+a)}}if(e.renderToStaticMarkup)return n+">";var f=u.createMarkupForID(this._rootNodeID);return n+" "+f+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(null!=t){if(null!=t.__html)return t.__html}else{var n=S[typeof this.props.children]?this.props.children:null,r=null!=n?null:this.props.children;if(null!=n)return d(n);if(null!=r){var i=this.mountChildren(r,e);return i.join("")}}return""},receiveComponent:function(e,t){(e!==this._descriptor||null==e._owner)&&f.Mixin.receiveComponent.call(this,e,t)},updateComponent:p.measure("ReactDOMComponent","updateComponent",function(e,t){n(this._descriptor.props),f.Mixin.updateComponent.call(this,e,t),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e)}),_updateDOMProperties:function(e,t){var n,i,s,u=this.props;for(n in e)if(!u.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===x){var a=e[n];for(i in a)a.hasOwnProperty(i)&&(s=s||{},s[i]="")}else E.hasOwnProperty(n)?b(this._rootNodeID,n):(o.isStandardName[n]||o.isCustomAttribute(n))&&f.BackendIDOperations.deletePropertyByID(this._rootNodeID,n);for(n in u){var l=u[n],c=e[n];if(u.hasOwnProperty(n)&&l!==c)if(n===x)if(l&&(l=u.style=g(l)),c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(s=s||{},s[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(s=s||{},s[i]=l[i])}else s=l;else E.hasOwnProperty(n)?r(this._rootNodeID,n,l,t):(o.isStandardName[n]||o.isCustomAttribute(n))&&f.BackendIDOperations.updatePropertyByID(this._rootNodeID,n,l)}s&&f.BackendIDOperations.updateStylesByID(this._rootNodeID,s)},_updateDOMChildren:function(e,t){var n=this.props,r=S[typeof e.children]?e.children:null,i=S[typeof n.children]?n.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,u=null!=r?null:e.children,a=null!=i?null:n.children,l=null!=r||null!=s,c=null!=i||null!=o;null!=u&&null==a?this.updateChildren(null,t):l&&!c&&this.updateTextContent(""),null!=i?r!==i&&this.updateTextContent(""+i):null!=o?s!==o&&f.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,o):null!=a&&this.updateChildren(a,t)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),f.Mixin.unmountComponent.call(this)}},y(i,f.Mixin),y(i,i.Mixin),y(i,h.Mixin),y(i,a),t.exports=i},{"./CSSPropertyOperations":4,"./DOMProperty":10,"./DOMPropertyOperations":11,"./ReactBrowserComponentMixin":28,"./ReactBrowserEventEmitter":29,"./ReactComponent":31,"./ReactMount":59,"./ReactMultiChild":60,"./ReactPerf":63,"./escapeTextForBrowser":102,"./invariant":118,"./keyOf":125,"./merge":128,"./mixInto":131}],39:[function(e,t){var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),i=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=o.form,a=s.createClass({displayName:"ReactDOMForm",mixins:[i,r],render:function(){return this.transferPropsTo(u(null,this.props.children))},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(n.topLevelTypes.topSubmit,"submit")}});t.exports=a},{"./EventConstants":15,"./LocalEventTrapMixin":24,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36}],40:[function(e,t){var n=e("./CSSPropertyOperations"),r=e("./DOMChildrenOperations"),i=e("./DOMPropertyOperations"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./invariant"),a=e("./setInnerHTML"),f={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:o.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,n){var r=s.getNode(e);u(!f.hasOwnProperty(t)),null!=n?i.setValueForProperty(r,t,n):i.deleteValueForProperty(r,t)}),deletePropertyByID:o.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,n){var r=s.getNode(e);u(!f.hasOwnProperty(t)),i.deleteValueForProperty(r,t,n)}),updateStylesByID:o.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var r=s.getNode(e);n.setValueForStyles(r,t)}),updateInnerHTMLByID:o.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=s.getNode(e);a(n,t)}),updateTextContentByID:o.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=s.getNode(e);r.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:o.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=s.getNode(e);r.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:o.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=s.getNode(e[n].parentID);r.processUpdates(e,t)})};t.exports=l},{"./CSSPropertyOperations":4,"./DOMChildrenOperations":9,"./DOMPropertyOperations":11,"./ReactMount":59,"./ReactPerf":63,"./invariant":118,"./setInnerHTML":134}],41:[function(e,t){var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),i=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=o.img,a=s.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[i,r],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(n.topLevelTypes.topError,"error")}});t.exports=a},{"./EventConstants":15,"./LocalEventTrapMixin":24,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36}],42:[function(e,t){var n=e("./AutoFocusMixin"),r=e("./DOMPropertyOperations"),i=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./ReactMount"),f=e("./invariant"),l=e("./merge"),c=u.input,h={},p=o.createClass({displayName:"ReactDOMInput",mixins:[n,i.Mixin,s],getInitialState:function(){var e=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:null!=e?e:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=l(this.props);e.defaultChecked=null,e.defaultValue=null;var t=i.getValue(this);e.value=null!=t?t:this.state.value;var n=i.getChecked(this);return e.checked=null!=n?n:this.state.checked,e.onChange=this._handleChange,c(e,this.props.children)},componentDidMount:function(){var e=a.getID(this.getDOMNode());h[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=a.getID(e);delete h[t]},componentDidUpdate:function(){var e=this.getDOMNode();null!=this.props.checked&&r.setValueForProperty(e,"checked",this.props.checked||!1);var t=i.getValue(this);null!=t&&r.setValueForProperty(e,"value",""+t)},_handleChange:function(e){var t,n=i.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({checked:e.target.checked,value:e.target.value});var r=this.props.name;if("radio"===this.props.type&&null!=r){for(var s=this.getDOMNode(),o=s;o.parentNode;)o=o.parentNode;for(var u=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),l=0,c=u.length;c>l;l++){var p=u[l];if(p!==s&&p.form===s.form){var v=a.getID(p);f(v);var m=h[v];f(m),m.setState({checked:!1})}}}return t}});t.exports=p},{"./AutoFocusMixin":1,"./DOMPropertyOperations":11,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactMount":59,"./invariant":118,"./merge":128}],43:[function(e,t){var n=e("./ReactBrowserComponentMixin"),r=e("./ReactCompositeComponent"),i=e("./ReactDOM"),s=(e("./warning"),i.option),o=r.createClass({displayName:"ReactDOMOption",mixins:[n],componentWillMount:function(){},render:function(){return s(this.props,this.props.children)}});t.exports=o},{"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./warning":139}],44:[function(e,t){function n(e,t){if(null!=e[t])if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function r(e,t){var n,r,i,s=e.props.multiple,o=null!=t?t:e.state.value,u=e.getDOMNode().options;if(s)for(n={},r=0,i=o.length;i>r;++r)n[""+o[r]]=!0;else n=""+o;for(r=0,i=u.length;i>r;r++){var a=s?n.hasOwnProperty(u[r].value):u[r].value===n;a!==u[r].selected&&(u[r].selected=a)}}var i=e("./AutoFocusMixin"),s=e("./LinkedValueUtils"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactCompositeComponent"),a=e("./ReactDOM"),f=e("./merge"),l=a.select,c=u.createClass({displayName:"ReactDOMSelect",mixins:[i,s.Mixin,o],propTypes:{defaultValue:n,value:n},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=f(this.props);return e.onChange=this._handleChange,e.value=null,l(e,this.props.children)},componentDidMount:function(){r(this,s.getValue(this))},componentDidUpdate:function(e){var t=s.getValue(this),n=!!e.multiple,i=!!this.props.multiple;(null!=t||n!==i)&&r(this,t)},_handleChange:function(e){var t,n=s.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1);var r;if(this.props.multiple){r=[];for(var i=e.target.options,o=0,u=i.length;u>o;o++)i[o].selected&&r.push(i[o].value)}else r=e.target.value;return this.setState({value:r}),t}});t.exports=c},{"./AutoFocusMixin":1,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./merge":128}],45:[function(e,t){function n(e,t,n,r){return e===n&&t===r}function r(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var s=i.text.length,o=s+r;return{start:s,end:o}}function i(e){var t=window.getSelection();if(0===t.rangeCount)return null;var r=t.anchorNode,i=t.anchorOffset,s=t.focusNode,o=t.focusOffset,u=t.getRangeAt(0),a=n(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),f=a?0:u.toString().length,l=u.cloneRange();l.selectNodeContents(e),l.setEnd(u.startContainer,u.startOffset);var c=n(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=c?0:l.toString().length,p=h+f,d=document.createRange();d.setStart(r,i),d.setEnd(s,o);var v=d.collapsed;return d.detach(),{start:v?p:h,end:v?h:p}}function s(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function o(e,t){var n=window.getSelection(),r=e[f()].length,i=Math.min(t.start,r),s="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>s){var o=s;s=i,i=o}var u=a(e,i),l=a(e,s);if(u&&l){var c=document.createRange();c.setStart(u.node,u.offset),n.removeAllRanges(),i>s?(n.addRange(c),n.extend(l.node,l.offset)):(c.setEnd(l.node,l.offset),n.addRange(c)),c.detach()}}var u=e("./ExecutionEnvironment"),a=e("./getNodeForCharacterOffset"),f=e("./getTextContentAccessor"),l=u.canUseDOM&&document.selection,c={getOffsets:l?r:i,setOffsets:l?s:o};t.exports=c},{"./ExecutionEnvironment":21,"./getNodeForCharacterOffset":111,"./getTextContentAccessor":113}],46:[function(e,t){var n=e("./AutoFocusMixin"),r=e("./DOMPropertyOperations"),i=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./invariant"),f=e("./merge"),l=(e("./warning"),u.textarea),c=o.createClass({displayName:"ReactDOMTextarea",mixins:[n,i.Mixin,s],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(a(null==e),Array.isArray(t)&&(a(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=i.getValue(this);return{initialValue:""+(null!=n?n:e)}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=f(this.props);return a(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,l(e,this.state.initialValue)},componentDidUpdate:function(){var e=i.getValue(this);if(null!=e){var t=this.getDOMNode();r.setValueForProperty(t,"value",""+e)}},_handleChange:function(e){var t,n=i.getOnChange(this);return n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({value:e.target.value}),t}});t.exports=c},{"./AutoFocusMixin":1,"./DOMPropertyOperations":11,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./invariant":118,"./merge":128,"./warning":139}],47:[function(e,t){function n(){this.reinitializeTransaction()}var r=e("./ReactUpdates"),i=e("./Transaction"),s=e("./emptyFunction"),o=e("./mixInto"),u={initialize:s,close:function(){c.isBatchingUpdates=!1}},a={initialize:s,close:r.flushBatchedUpdates.bind(r)},f=[a,u];o(n,i.Mixin),o(n,{getTransactionWrappers:function(){return f}});var l=new n,c={isBatchingUpdates:!1,batchedUpdates:function(e,t,n){var r=c.isBatchingUpdates;c.isBatchingUpdates=!0,r?e(t,n):l.perform(e,null,t,n)}};t.exports=c},{"./ReactUpdates":74,"./Transaction":90,"./emptyFunction":100,"./mixInto":131}],48:[function(e,t){function n(){T.EventEmitter.injectReactEventListener(x),T.EventPluginHub.injectEventPluginOrder(u),T.EventPluginHub.injectInstanceHandle(N),T.EventPluginHub.injectMount(C),T.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:A,EnterLeaveEventPlugin:a,ChangeEventPlugin:i,CompositionEventPlugin:o,MobileSafariClickEventPlugin:c,SelectEventPlugin:k,BeforeInputEventPlugin:r}),T.DOM.injectComponentClasses({button:m,form:g,img:y,input:b,option:w,select:E,textarea:S,html:M(v.html),head:M(v.head),body:M(v.body)}),T.CompositeComponent.injectMixin(h),T.DOMProperty.injectDOMPropertyConfig(l),T.DOMProperty.injectDOMPropertyConfig(O),T.EmptyComponent.injectEmptyComponent(v.noscript),T.Updates.injectReconcileTransaction(p.ReactReconcileTransaction),T.Updates.injectBatchingStrategy(d),T.RootIndex.injectCreateReactRootIndex(f.canUseDOM?s.createReactRootIndex:L.createReactRootIndex),T.Component.injectEnvironment(p)}var r=e("./BeforeInputEventPlugin"),i=e("./ChangeEventPlugin"),s=e("./ClientReactRootIndex"),o=e("./CompositionEventPlugin"),u=e("./DefaultEventPluginOrder"),a=e("./EnterLeaveEventPlugin"),f=e("./ExecutionEnvironment"),l=e("./HTMLDOMPropertyConfig"),c=e("./MobileSafariClickEventPlugin"),h=e("./ReactBrowserComponentMixin"),p=e("./ReactComponentBrowserEnvironment"),d=e("./ReactDefaultBatchingStrategy"),v=e("./ReactDOM"),m=e("./ReactDOMButton"),g=e("./ReactDOMForm"),y=e("./ReactDOMImg"),b=e("./ReactDOMInput"),w=e("./ReactDOMOption"),E=e("./ReactDOMSelect"),S=e("./ReactDOMTextarea"),x=e("./ReactEventListener"),T=e("./ReactInjection"),N=e("./ReactInstanceHandles"),C=e("./ReactMount"),k=e("./SelectEventPlugin"),L=e("./ServerReactRootIndex"),A=e("./SimpleEventPlugin"),O=e("./SVGDOMPropertyConfig"),M=e("./createFullPageComponent");t.exports={inject:n}},{"./BeforeInputEventPlugin":2,"./ChangeEventPlugin":6,"./ClientReactRootIndex":7,"./CompositionEventPlugin":8,"./DefaultEventPluginOrder":13,"./EnterLeaveEventPlugin":14,"./ExecutionEnvironment":21,"./HTMLDOMPropertyConfig":22,"./MobileSafariClickEventPlugin":25,"./ReactBrowserComponentMixin":28,"./ReactComponentBrowserEnvironment":32,"./ReactDOM":36,"./ReactDOMButton":37,"./ReactDOMForm":39,"./ReactDOMImg":41,"./ReactDOMInput":42,"./ReactDOMOption":43,"./ReactDOMSelect":44,"./ReactDOMTextarea":46,"./ReactDefaultBatchingStrategy":47,"./ReactEventListener":54,"./ReactInjection":55,"./ReactInstanceHandles":57,"./ReactMount":59,"./SVGDOMPropertyConfig":75,"./SelectEventPlugin":76,"./ServerReactRootIndex":77,"./SimpleEventPlugin":78,"./createFullPageComponent":97}],49:[function(e,t){function n(e,t){if("function"==typeof t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if("function"==typeof r){var i=r.bind(t);for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);e[n]=i}else e[n]=r}}var r=e("./ReactContext"),i=e("./ReactCurrentOwner"),s=e("./merge"),o=(e("./warning"),function(){});o.createFactory=function(e){var t=Object.create(o.prototype),u=function(e,n){null==e?e={}:"object"==typeof e&&(e=s(e));var o=arguments.length-1;if(1===o)e.children=n;else if(o>1){for(var u=Array(o),a=0;o>a;a++)u[a]=arguments[a+1];e.children=u}var f=Object.create(t);return f._owner=i.current,f._context=r.current,f.props=e,f};return u.prototype=t,u.type=e,t.type=e,n(u,e),t.constructor=u,u},o.cloneAndReplaceProps=function(e,t){var n=Object.create(e.constructor.prototype);return n._owner=e._owner,n._context=e._context,n.props=t,n},o.isValidFactory=function(e){return"function"==typeof e&&e.prototype instanceof o},o.isValidDescriptor=function(e){return e instanceof o},t.exports=o},{"./ReactContext":34,"./ReactCurrentOwner":35,"./merge":128,"./warning":139}],50:[function(e,t){function n(){var e=c.current;return e&&e.constructor.displayName||void 0}function r(e,t){e._store.validated||null!=e.props.key||(e._store.validated=!0,s("react_key_warning",'Each child in an array should have a unique "key" prop.',e,t))}function i(e,t,n){m.test(e)&&s("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",t,n)}function s(e,t,r,i){var s=n(),o=i.displayName,u=s||o,a=p[e];if(!a.hasOwnProperty(u)){a[u]=!0,t+=s?" Check the render method of "+s+".":" Check the renderComponent call using <"+o+">.";var f=null;r._owner&&r._owner!==c.current&&(f=r._owner.constructor.displayName,t+=" It was passed a child from "+f+"."),t+=" See http://fb.me/react-warning-keys for more information.",h(e,{component:u,componentOwner:f}),console.warn(t)}}function o(){var e=n()||"";d.hasOwnProperty(e)||(d[e]=!0,h("react_object_map_children"))}function u(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var s=e[n];f.isValidDescriptor(s)&&r(s,t)}else if(f.isValidDescriptor(e))e._store.validated=!0;else if(e&&"object"==typeof e){o();for(var u in e)i(u,e[u],t)}}function a(e,t,n,r){for(var i in t)if(t.hasOwnProperty(i)){var s;try{s=t[i](n,i,e,r)}catch(o){s=o}s instanceof Error&&!(s.message in v)&&(v[s.message]=!0,h("react_failed_descriptor_type_check",{message:s.message}))}}var f=e("./ReactDescriptor"),l=e("./ReactPropTypeLocations"),c=e("./ReactCurrentOwner"),h=e("./monitorCodeUse"),p={react_key_warning:{},react_numeric_key_warning:{}},d={},v={},m=/^\d+$/,g={createFactory:function(e,t,n){var r=function(){for(var r=e.apply(this,arguments),i=1;i<arguments.length;i++)u(arguments[i],r.type);var s=r.type.displayName;return t&&a(s,t,r.props,l.prop),n&&a(s,n,r._context,l.context),r};r.prototype=e.prototype,r.type=e.type;for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r}};t.exports=g},{"./ReactCurrentOwner":35,"./ReactDescriptor":49,"./ReactPropTypeLocations":66,"./monitorCodeUse":132}],51:[function(e,t){function n(){return u(o),o()}function r(e){a[e]=!0}function i(e){delete a[e]}function s(e){return a[e]}var o,u=e("./invariant"),a={},f={injectEmptyComponent:function(e){o=e}},l={deregisterNullComponentID:i,getEmptyComponent:n,injection:f,isNullComponentID:s,registerNullComponentID:r};t.exports=l},{"./invariant":118}],52:[function(e,t){var n={guard:function(e){return e}};t.exports=n},{}],53:[function(e,t){function n(e){r.enqueueEvents(e),r.processEventQueue()}var r=e("./EventPluginHub"),i={handleTopLevel:function(e,t,i,s){var o=r.extractEvents(e,t,i,s);n(o)}};t.exports=i},{"./EventPluginHub":17}],54:[function(e,t){function n(e){var t=l.getID(e),n=f.getReactRootIDFromNodeID(t),r=l.findReactContainerForID(n),i=l.getFirstReactDOM(r);return i}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){for(var t=l.getFirstReactDOM(h(e.nativeEvent))||window,r=t;r;)e.ancestors.push(r),r=n(r);for(var i=0,s=e.ancestors.length;s>i;i++){t=e.ancestors[i];var o=l.getID(t)||"";v._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function s(e){var t=p(window);e(t)}var o=e("./EventListener"),u=e("./ExecutionEnvironment"),a=e("./PooledClass"),f=e("./ReactInstanceHandles"),l=e("./ReactMount"),c=e("./ReactUpdates"),h=e("./getEventTarget"),p=e("./getUnboundedScrollPosition"),d=e("./mixInto");d(r,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),a.addPoolingTo(r,a.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){v._handleTopLevel=e},setEnabled:function(e){v._enabled=!!e},isEnabled:function(){return v._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?o.listen(r,t,v.dispatchEvent.bind(null,e)):void 0},trapCapturedEvent:function(e,t,n){var r=n;return r?o.capture(r,t,v.dispatchEvent.bind(null,e)):void 0},monitorScrollValue:function(e){var t=s.bind(null,e);o.listen(window,"scroll",t),o.listen(window,"resize",t)},dispatchEvent:function(e,t){if(v._enabled){var n=r.getPooled(e,t);try{c.batchedUpdates(i,n)}finally{r.release(n)}}}};t.exports=v},{"./EventListener":16,"./ExecutionEnvironment":21,"./PooledClass":26,"./ReactInstanceHandles":57,"./ReactMount":59,"./ReactUpdates":74,"./getEventTarget":109,"./getUnboundedScrollPosition":114,"./mixInto":131}],55:[function(e,t){var n=e("./DOMProperty"),r=e("./EventPluginHub"),i=e("./ReactComponent"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=e("./ReactEmptyComponent"),a=e("./ReactBrowserEventEmitter"),f=e("./ReactPerf"),l=e("./ReactRootIndex"),c=e("./ReactUpdates"),h={Component:i.injection,CompositeComponent:s.injection,DOMProperty:n.injection,EmptyComponent:u.injection,EventPluginHub:r.injection,DOM:o.injection,EventEmitter:a.injection,Perf:f.injection,RootIndex:l.injection,Updates:c.injection};t.exports=h},{"./DOMProperty":10,"./EventPluginHub":17,"./ReactBrowserEventEmitter":29,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactEmptyComponent":51,"./ReactPerf":63,"./ReactRootIndex":70,"./ReactUpdates":74}],56:[function(e,t){function n(e){return i(document.documentElement,e)}var r=e("./ReactDOMSelection"),i=e("./containsNode"),s=e("./focusNode"),o=e("./getActiveElement"),u={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=o();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=o(),r=e.focusedElem,i=e.selectionRange;t!==r&&n(r)&&(u.hasSelectionCapabilities(r)&&u.setSelection(r,i),s(r))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if("undefined"==typeof i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};t.exports=u},{"./ReactDOMSelection":45,"./containsNode":94,"./focusNode":104,"./getActiveElement":106}],57:[function(e,t){function n(e){return h+e.toString(36)}function r(e,t){return e.charAt(t)===h||t===e.length}function i(e){return""===e||e.charAt(0)===h&&e.charAt(e.length-1)!==h}function s(e,t){return 0===t.indexOf(e)&&r(t,e.length)}function o(e){return e?e.substr(0,e.lastIndexOf(h)):""}function u(e,t){if(c(i(e)&&i(t)),c(s(e,t)),e===t)return e;for(var n=e.length+p,o=n;o<t.length&&!r(t,o);o++);return t.substr(0,o)}function a(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var s=0,o=0;n>=o;o++)if(r(e,o)&&r(t,o))s=o;else if(e.charAt(o)!==t.charAt(o))break;var u=e.substr(0,s);return c(i(u)),u}function f(e,t,n,r,i,a){e=e||"",t=t||"",c(e!==t);var f=s(t,e);c(f||s(e,t));for(var l=0,h=f?o:u,p=e;;p=h(p,t)){var v;if(i&&p===e||a&&p===t||(v=n(p,f,r)),v===!1||p===t)break;c(l++<d)}}var l=e("./ReactRootIndex"),c=e("./invariant"),h=".",p=h.length,d=100,v={createReactRootID:function(){return n(l.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===h&&e.length>1){var t=e.indexOf(h,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var s=a(e,t);s!==e&&f(e,s,n,r,!1,!0),s!==t&&f(s,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(f("",e,t,n,!0,!1),f(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){f("",e,t,n,!0,!1)},_getFirstCommonAncestorID:a,_getNextDescendantID:u,isAncestorIDOf:s,SEPARATOR:h};t.exports=v},{"./ReactRootIndex":70,"./invariant":118}],58:[function(e,t){var n=e("./adler32"),r={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=n(e);return e.replace(">"," "+r.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var i=t.getAttribute(r.CHECKSUM_ATTR_NAME);i=i&&parseInt(i,10);var s=n(e);return s===i}};t.exports=r},{"./adler32":93}],59:[function(e,t){function n(e){var t=g(e);return t&&O.getID(t)}function r(e){var t=i(e);if(t)if(x.hasOwnProperty(t)){var n=x[t];n!==e&&(b(!u(n,t)),x[t]=e)}else x[t]=e;return t}function i(e){return e&&e.getAttribute&&e.getAttribute(S)||""}function s(e,t){var n=i(e);n!==t&&delete x[n],e.setAttribute(S,t),x[t]=e}function o(e){return x.hasOwnProperty(e)&&u(x[e],e)||(x[e]=O.findReactNodeByID(e)),x[e]}function u(e,t){if(e){b(i(e)===t);var n=O.findReactContainerForID(t);if(n&&m(n,e))return!0}return!1}function a(e){delete x[e]}function f(e){var t=x[e];return t&&u(t,e)?void (A=t):!1}function l(e){A=null,d.traverseAncestors(e,f);var t=A;return A=null,t}var c=e("./DOMProperty"),h=e("./ReactBrowserEventEmitter"),p=(e("./ReactCurrentOwner"),e("./ReactDescriptor")),d=e("./ReactInstanceHandles"),v=e("./ReactPerf"),m=e("./containsNode"),g=e("./getReactRootElementInContainer"),y=e("./instantiateReactComponent"),b=e("./invariant"),w=e("./shouldUpdateReactComponent"),E=(e("./warning"),d.SEPARATOR),S=c.ID_ATTRIBUTE_NAME,x={},T=1,N=9,C={},k={},L=[],A=null,O={_instancesByReactRootID:C,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){var i=t.props;return O.scrollMonitor(n,function(){e.replaceProps(i,r)}),e},_registerComponent:function(e,t){b(t&&(t.nodeType===T||t.nodeType===N)),h.ensureScrollValueMonitoring();var n=O.registerContainer(t);return C[n]=e,n},_renderNewRootComponent:v.measure("ReactMount","_renderNewRootComponent",function(e,t,n){var r=y(e),i=O._registerComponent(r,t);return r.mountComponentIntoNode(i,t,n),r}),renderComponent:function(e,t,r){b(p.isValidDescriptor(e));var i=C[n(t)];if(i){var s=i._descriptor;if(w(s,e))return O._updateRootComponent(i,e,t,r);O.unmountComponentAtNode(t)}var o=g(t),u=o&&O.isRenderedByReact(o),a=u&&!i,f=O._renderNewRootComponent(e,t,a);return r&&r.call(f),f},constructAndRenderComponent:function(e,t,n){return O.renderComponent(e(t),n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return b(r),O.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=n(e);return t&&(t=d.getReactRootIDFromNodeID(t)),t||(t=d.createReactRootID()),k[t]=e,t},unmountComponentAtNode:function(e){var t=n(e),r=C[t];return r?(O.unmountComponentFromNode(r,e),delete C[t],delete k[t],!0):!1},unmountComponentFromNode:function(e,t){for(e.unmountComponent(),t.nodeType===N&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=d.getReactRootIDFromNodeID(e),n=k[t];return n},findReactNodeByID:function(e){var t=O.findReactContainerForID(e);return O.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=O.getID(e);return t?t.charAt(0)===E:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(O.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=L,r=0,i=l(t)||e;for(n[0]=i.firstChild,n.length=1;r<n.length;){for(var s,o=n[r++];o;){var u=O.getID(o);u?t===u?s=o:d.isAncestorIDOf(u,t)&&(n.length=r=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(s)return n.length=0,s}n.length=0,b(!1)},getReactRootID:n,getID:r,setID:s,getNode:o,purgeID:a};t.exports=O},{"./DOMProperty":10,"./ReactBrowserEventEmitter":29,"./ReactCurrentOwner":35,"./ReactDescriptor":49,"./ReactInstanceHandles":57,"./ReactPerf":63,"./containsNode":94,"./getReactRootElementInContainer":112,"./instantiateReactComponent":117,"./invariant":118,"./shouldUpdateReactComponent":136,"./warning":139}],60:[function(e,t){function n(e,t,n){d.push({parentID:e,parentNode:null,type:f.INSERT_MARKUP,markupIndex:v.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function r(e,t,n){d.push({parentID:e,parentNode:null,type:f.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function i(e,t){d.push({parentID:e,parentNode:null,type:f.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function s(e,t){d.push({parentID:e,parentNode:null,type:f.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function o(){d.length&&(a.BackendIDOperations.dangerouslyProcessChildrenUpdates(d,v),u())}function u(){d.length=0,v.length=0}var a=e("./ReactComponent"),f=e("./ReactMultiChildUpdateTypes"),l=e("./flattenChildren"),c=e("./instantiateReactComponent"),h=e("./shouldUpdateReactComponent"),p=0,d=[],v=[],m={Mixin:{mountChildren:function(e,t){var n=l(e),r=[],i=0;this._renderedChildren=n;for(var s in n){var o=n[s];if(n.hasOwnProperty(s)){var u=c(o);n[s]=u;var a=this._rootNodeID+s,f=u.mountComponent(a,t,this._mountDepth+1);u._mountIndex=i,r.push(f),i++}}return r},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{p--,p||(t?u():o())}},updateChildren:function(e,t){p++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{p--,p||(n?u():o())}},_updateChildren:function(e,t){var n=l(e),r=this._renderedChildren;if(n||r){var i,s=0,o=0;for(i in n)if(n.hasOwnProperty(i)){var u=r&&r[i],a=u&&u._descriptor,f=n[i];if(h(a,f))this.moveChild(u,o,s),s=Math.max(u._mountIndex,s),u.receiveComponent(f,t),u._mountIndex=o;else{u&&(s=Math.max(u._mountIndex,s),this._unmountChildByName(u,i));var p=c(f);this._mountChildByNameAtIndex(p,i,o,t)}o++}for(i in r)!r.hasOwnProperty(i)||n&&n[i]||this._unmountChildByName(r[i],i)}},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&r(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){n(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){i(this._rootNodeID,e._mountIndex)},setTextContent:function(e){s(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r){var i=this._rootNodeID+t,s=e.mountComponent(i,r,this._mountDepth+1);e._mountIndex=n,this.createChild(e,s),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t]}}};t.exports=m},{"./ReactComponent":31,"./ReactMultiChildUpdateTypes":61,"./flattenChildren":103,"./instantiateReactComponent":117,"./shouldUpdateReactComponent":136}],61:[function(e,t){var n=e("./keyMirror"),r=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=r},{"./keyMirror":124}],62:[function(e,t){var n=e("./emptyObject"),r=e("./invariant"),i={isValidOwner:function(e){return!!e&&"function"==typeof e.attachRef&&"function"==typeof e.detachRef},addComponentAsRefTo:function(e,t,n){r(i.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(i.isValidOwner(n)),n.refs[t]===e&&n.detachRef(t)},Mixin:{construct:function(){this.refs=n},attachRef:function(e,t){r(t.isOwnedBy(this));var i=this.refs===n?this.refs={}:this.refs;i[e]=t},detachRef:function(e){delete this.refs[e]}}};t.exports=i},{"./emptyObject":101,"./invariant":118}],63:[function(e,t){function n(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:n,measure:function(e,t,n){return n},injection:{injectMeasure:function(e){r.storedMeasure=e}}};t.exports=r},{}],64:[function(e,t){function n(e){return function(t,n,r){t[n]=t.hasOwnProperty(n)?e(t[n],r):r}}function r(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=f[n];r&&f.hasOwnProperty(n)?r(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var i=e("./emptyFunction"),s=e("./invariant"),o=e("./joinClasses"),u=e("./merge"),a=n(function(e,t){return u(t,e)}),f={children:i,className:n(o),key:i,ref:i,style:a},l={TransferStrategies:f,mergeProps:function(e,t){return r(u(e),t)},Mixin:{transferPropsTo:function(e){return s(e._owner===this),r(e.props,this.props),e}}};t.exports=l},{"./emptyFunction":100,"./invariant":118,"./joinClasses":123,"./merge":128}],65:[function(e,t){var n={};t.exports=n},{}],66:[function(e,t){var n=e("./keyMirror"),r=n({prop:null,context:null,childContext:null});t.exports=r},{"./keyMirror":124}],67:[function(e,t){function n(e){function t(t,n,r,i,s){if(i=i||b,null!=n[r])return e(n,r,i,s);var o=g[s];return t?new Error("Required "+o+" `"+r+"` was not specified in "+("`"+i+"`.")):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,r,i){var s=t[n],o=d(s);if(o!==e){var u=g[i],a=v(s);return new Error("Invalid "+u+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}}return n(t)}function i(){return n(y.thatReturns())}function s(e){function t(t,n,r,i){var s=t[n];if(!Array.isArray(s)){var o=g[i],u=d(s);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var a=0;a<s.length;a++){var f=e(s,a,r,i);if(f instanceof Error)return f}}return n(t)}function o(){function e(e,t,n,r){if(!m.isValidDescriptor(e[t])){var i=g[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a React component."))}}return n(e)}function u(e){function t(t,n,r,i){if(!(t[n]instanceof e)){var s=g[i],o=e.name||b;return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+o+"`."))}}return n(t)}function a(e){function t(t,n,r,i){for(var s=t[n],o=0;o<e.length;o++)if(s===e[o])return;var u=g[i],a=JSON.stringify(e);return new Error("Invalid "+u+" `"+n+"` of value `"+s+"` "+("supplied to `"+r+"`, expected one of "+a+"."))}return n(t)}function f(e){function t(t,n,r,i){var s=t[n],o=d(s);if("object"!==o){var u=g[i];return new Error("Invalid "+u+" `"+n+"` of type "+("`"+o+"` supplied to `"+r+"`, expected an object."))}for(var a in s)if(s.hasOwnProperty(a)){var f=e(s,a,r,i);if(f instanceof Error)return f}}return n(t)}function l(e){function t(t,n,r,i){for(var s=0;s<e.length;s++){var o=e[s];if(null==o(t,n,r,i))return}var u=g[i];return new Error("Invalid "+u+" `"+n+"` supplied to "+("`"+r+"`."))}return n(t)}function c(){function e(e,t,n,r){if(!p(e[t])){var i=g[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a renderable prop."))}}return n(e)}function h(e){function t(t,n,r,i){var s=t[n],o=d(s);if("object"!==o){var u=g[i];return new Error("Invalid "+u+" `"+n+"` of type `"+o+"` "+("supplied to `"+r+"`, expected `object`."))}for(var a in e){var f=e[a];if(f){var l=f(s,a,r,i);if(l)return l}}}return n(t,"expected `object`")}function p(e){switch(typeof e){case"number":case"string":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(p);if(m.isValidDescriptor(e))return!0;for(var t in e)if(!p(e[t]))return!1;return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function v(e){var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var m=e("./ReactDescriptor"),g=e("./ReactPropTypeLocationNames"),y=e("./emptyFunction"),b="<<anonymous>>",w={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:i(),arrayOf:s,component:o(),instanceOf:u,objectOf:f,oneOf:a,oneOfType:l,renderable:c(),shape:h};t.exports=w},{"./ReactDescriptor":49,"./ReactPropTypeLocationNames":65,"./emptyFunction":100}],68:[function(e,t){function n(){this.listenersToPut=[]}var r=e("./PooledClass"),i=e("./ReactBrowserEventEmitter"),s=e("./mixInto");s(n,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];i.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},{"./PooledClass":26,"./ReactBrowserEventEmitter":29,"./mixInto":131}],69:[function(e,t){function n(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=u.getPooled()}var r=e("./CallbackQueue"),i=e("./PooledClass"),s=e("./ReactBrowserEventEmitter"),o=e("./ReactInputSelection"),u=e("./ReactPutListenerQueue"),a=e("./Transaction"),f=e("./mixInto"),l={initialize:o.getSelectionInformation,close:o.restoreSelection},c={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},p={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},d=[p,l,c,h],v={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,u.release(this.putListenerQueue),this.putListenerQueue=null}};f(n,a.Mixin),f(n,v),i.addPoolingTo(n),t.exports=n},{"./CallbackQueue":5,"./PooledClass":26,"./ReactBrowserEventEmitter":29,"./ReactInputSelection":56,"./ReactPutListenerQueue":68,"./Transaction":90,"./mixInto":131}],70:[function(e,t){var n={injectCreateReactRootIndex:function(e){r.createReactRootIndex=e}},r={createReactRootIndex:null,injection:n};t.exports=r},{}],71:[function(e,t){function n(e){f(i.isValidDescriptor(e)),f(2!==arguments.length||"function"!=typeof arguments[1]);var t;try{var n=s.createReactRootID();return t=u.getPooled(!1),t.perform(function(){var r=a(e),i=r.mountComponent(n,t,0);return o.addChecksumToMarkup(i)},null)}finally{u.release(t)}}function r(e){f(i.isValidDescriptor(e));var t;try{var n=s.createReactRootID();return t=u.getPooled(!0),t.perform(function(){var r=a(e);return r.mountComponent(n,t,0)},null)}finally{u.release(t)}}var i=e("./ReactDescriptor"),s=e("./ReactInstanceHandles"),o=e("./ReactMarkupChecksum"),u=e("./ReactServerRenderingTransaction"),a=e("./instantiateReactComponent"),f=e("./invariant");t.exports={renderComponentToString:n,renderComponentToStaticMarkup:r}},{"./ReactDescriptor":49,"./ReactInstanceHandles":57,"./ReactMarkupChecksum":58,"./ReactServerRenderingTransaction":72,"./instantiateReactComponent":117,"./invariant":118}],72:[function(e,t){function n(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=i.getPooled(null),this.putListenerQueue=s.getPooled()}var r=e("./PooledClass"),i=e("./CallbackQueue"),s=e("./ReactPutListenerQueue"),o=e("./Transaction"),u=e("./emptyFunction"),a=e("./mixInto"),f={initialize:function(){this.reactMountReady.reset()},close:u},l={initialize:function(){this.putListenerQueue.reset()},close:u},c=[l,f],h={getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};a(n,o.Mixin),a(n,h),r.addPoolingTo(n),t.exports=n},{"./CallbackQueue":5,"./PooledClass":26,"./ReactPutListenerQueue":68,"./Transaction":90,"./emptyFunction":100,"./mixInto":131}],73:[function(e,t){var n=e("./DOMPropertyOperations"),r=e("./ReactBrowserComponentMixin"),i=e("./ReactComponent"),s=e("./ReactDescriptor"),o=e("./escapeTextForBrowser"),u=e("./mixInto"),a=function(e){this.construct(e)};u(a,i.Mixin),u(a,r),u(a,{mountComponent:function(e,t,r){i.Mixin.mountComponent.call(this,e,t,r);var s=o(this.props);return t.renderToStaticMarkup?s:"<span "+n.createMarkupForID(e)+">"+s+"</span>"},receiveComponent:function(e){var t=e.props;t!==this.props&&(this.props=t,i.BackendIDOperations.updateTextContentByID(this._rootNodeID,t))}}),t.exports=s.createFactory(a)},{"./DOMPropertyOperations":11,"./ReactBrowserComponentMixin":28,"./ReactComponent":31,"./ReactDescriptor":49,"./escapeTextForBrowser":102,"./mixInto":131}],74:[function(e,t){function n(){h(E.ReactReconcileTransaction&&v)}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=a.getPooled(null),this.reconcileTransaction=E.ReactReconcileTransaction.getPooled()}function i(e,t,r){n(),v.batchedUpdates(e,t,r)}function s(e,t){return e._mountDepth-t._mountDepth}function o(e){var t=e.dirtyComponentsLength;h(t===d.length),d.sort(s);for(var n=0;t>n;n++){var r=d[n];if(r.isMounted()){var i=r._pendingCallbacks;if(r._pendingCallbacks=null,r.performUpdateIfNecessary(e.reconcileTransaction),i)for(var o=0;o<i.length;o++)e.callbackQueue.enqueue(i[o],r)}}}function u(e,t){return h(!t||"function"==typeof t),n(),v.isBatchingUpdates?(d.push(e),void (t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t]))):void v.batchedUpdates(u,e,t)}var a=e("./CallbackQueue"),f=e("./PooledClass"),l=(e("./ReactCurrentOwner"),e("./ReactPerf")),c=e("./Transaction"),h=e("./invariant"),p=e("./mixInto"),d=(e("./warning"),[]),v=null,m={initialize:function(){this.dirtyComponentsLength=d.length},close:function(){this.dirtyComponentsLength!==d.length?(d.splice(0,this.dirtyComponentsLength),b()):d.length=0}},g={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},y=[m,g];p(r,c.Mixin),p(r,{getTransactionWrappers:function(){return y},destructor:function(){this.dirtyComponentsLength=null,a.release(this.callbackQueue),this.callbackQueue=null,E.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return c.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(r);var b=l.measure("ReactUpdates","flushBatchedUpdates",function(){for(;d.length;){var e=r.getPooled();e.perform(o,null,e),r.release(e)}}),w={injectReconcileTransaction:function(e){h(e),E.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){h(e),h("function"==typeof e.batchedUpdates),h("boolean"==typeof e.isBatchingUpdates),v=e}},E={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:u,flushBatchedUpdates:b,injection:w};t.exports=E},{"./CallbackQueue":5,"./PooledClass":26,"./ReactCurrentOwner":35,"./ReactPerf":63,"./Transaction":90,"./invariant":118,"./mixInto":131,"./warning":139}],75:[function(e,t){var n=e("./DOMProperty"),r=n.injection.MUST_USE_ATTRIBUTE,i={Properties:{cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,y1:r,y2:r,y:r},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=i},{"./DOMProperty":10}],76:[function(e,t){function n(e){if("selectionStart"in e&&o.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(document.selection){var t=document.selection.createRange();return{parentElement:t.parentElement(),text:t.text,top:t.boundingTop,left:t.boundingLeft}}var n=window.getSelection();return{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}function r(e){if(!g&&null!=d&&d==a()){var t=n(d);if(!m||!c(m,t)){m=t;var r=u.getPooled(p.select,v,e);return r.type="select",r.target=d,s.accumulateTwoPhaseDispatches(r),r}}}var i=e("./EventConstants"),s=e("./EventPropagators"),o=e("./ReactInputSelection"),u=e("./SyntheticEvent"),a=e("./getActiveElement"),f=e("./isTextInputElement"),l=e("./keyOf"),c=e("./shallowEqual"),h=i.topLevelTypes,p={select:{phasedRegistrationNames:{bubbled:l({onSelect:null}),captured:l({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},d=null,v=null,m=null,g=!1,y={eventTypes:p,extractEvents:function(e,t,n,i){switch(e){case h.topFocus:(f(t)||"true"===t.contentEditable)&&(d=t,v=n,m=null);break;case h.topBlur:d=null,v=null,m=null;break;case h.topMouseDown:g=!0;break;case h.topContextMenu:case h.topMouseUp:return g=!1,r(i);case h.topSelectionChange:case h.topKeyDown:case h.topKeyUp:return r(i)}}};t.exports=y},{"./EventConstants":15,"./EventPropagators":20,"./ReactInputSelection":56,"./SyntheticEvent":82,"./getActiveElement":106,"./isTextInputElement":121,"./keyOf":125,"./shallowEqual":135}],77:[function(e,t){var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};t.exports=r},{}],78:[function(e,t){var n=e("./EventConstants"),r=e("./EventPluginUtils"),i=e("./EventPropagators"),s=e("./SyntheticClipboardEvent"),o=e("./SyntheticEvent"),u=e("./SyntheticFocusEvent"),a=e("./SyntheticKeyboardEvent"),f=e("./SyntheticMouseEvent"),l=e("./SyntheticDragEvent"),c=e("./SyntheticTouchEvent"),h=e("./SyntheticUIEvent"),p=e("./SyntheticWheelEvent"),d=e("./invariant"),v=e("./keyOf"),m=n.topLevelTypes,g={blur:{phasedRegistrationNames:{bubbled:v({onBlur:!0}),captured:v({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:v({onClick:!0}),captured:v({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:v({onContextMenu:!0}),captured:v({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:v({onCopy:!0}),captured:v({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:v({onCut:!0}),captured:v({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:v({onDoubleClick:!0}),captured:v({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:v({onDrag:!0}),captured:v({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:v({onDragEnd:!0}),captured:v({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:v({onDragEnter:!0}),captured:v({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:v({onDragExit:!0}),captured:v({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:v({onDragLeave:!0}),captured:v({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:v({onDragOver:!0}),captured:v({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:v({onDragStart:!0}),captured:v({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:v({onDrop:!0}),captured:v({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:v({onFocus:!0}),captured:v({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:v({onInput:!0}),captured:v({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:v({onKeyDown:!0}),captured:v({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:v({onKeyPress:!0}),captured:v({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:v({onKeyUp:!0}),captured:v({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:v({onLoad:!0}),captured:v({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:v({onError:!0}),captured:v({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:v({onMouseDown:!0}),captured:v({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:v({onMouseMove:!0}),captured:v({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:v({onMouseOut:!0}),captured:v({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:v({onMouseOver:!0}),captured:v({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:v({onMouseUp:!0}),captured:v({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:v({onPaste:!0}),captured:v({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:v({onReset:!0}),captured:v({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:v({onScroll:!0}),captured:v({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:v({onSubmit:!0}),captured:v({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:v({onTouchCancel:!0}),captured:v({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:v({onTouchEnd:!0}),captured:v({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:v({onTouchMove:!0}),captured:v({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:v({onTouchStart:!0}),captured:v({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:v({onWheel:!0}),captured:v({onWheelCapture:!0})}}},y={topBlur:g.blur,topClick:g.click,topContextMenu:g.contextMenu,topCopy:g.copy,topCut:g.cut,topDoubleClick:g.doubleClick,topDrag:g.drag,topDragEnd:g.dragEnd,topDragEnter:g.dragEnter,topDragExit:g.dragExit,topDragLeave:g.dragLeave,topDragOver:g.dragOver,topDragStart:g.dragStart,topDrop:g.drop,topError:g.error,topFocus:g.focus,topInput:g.input,topKeyDown:g.keyDown,topKeyPress:g.keyPress,topKeyUp:g.keyUp,topLoad:g.load,topMouseDown:g.mouseDown,topMouseMove:g.mouseMove,topMouseOut:g.mouseOut,topMouseOver:g.mouseOver,topMouseUp:g.mouseUp,topPaste:g.paste,topReset:g.reset,topScroll:g.scroll,topSubmit:g.submit,topTouchCancel:g.touchCancel,topTouchEnd:g.touchEnd,topTouchMove:g.touchMove,topTouchStart:g.touchStart,topWheel:g.wheel};for(var b in y)y[b].dependencies=[b];var w={eventTypes:g,executeDispatch:function(e,t,n){var i=r.executeDispatch(e,t,n);i===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var v=y[e];if(!v)return null;var g;switch(e){case m.topInput:case m.topLoad:case m.topError:case m.topReset:case m.topSubmit:g=o;break;case m.topKeyPress:if(0===r.charCode)return null;case m.topKeyDown:case m.topKeyUp:g=a;break;case m.topBlur:case m.topFocus:g=u;break;case m.topClick:if(2===r.button)return null;case m.topContextMenu:case m.topDoubleClick:case m.topMouseDown:case m.topMouseMove:case m.topMouseOut:case m.topMouseOver:case m.topMouseUp:g=f;break;case m.topDrag:case m.topDragEnd:case m.topDragEnter:case m.topDragExit:case m.topDragLeave:case m.topDragOver:case m.topDragStart:case m.topDrop:g=l;break;case m.topTouchCancel:case m.topTouchEnd:case m.topTouchMove:case m.topTouchStart:g=c;break;case m.topScroll:g=h;break;case m.topWheel:g=p;break;case m.topCopy:case m.topCut:case m.topPaste:g=s}d(g);var b=g.getPooled(v,n,r);return i.accumulateTwoPhaseDispatches(b),b}};t.exports=w},{"./EventConstants":15,"./EventPluginUtils":19,"./EventPropagators":20,"./SyntheticClipboardEvent":79,"./SyntheticDragEvent":81,"./SyntheticEvent":82,"./SyntheticFocusEvent":83,"./SyntheticKeyboardEvent":85,"./SyntheticMouseEvent":86,"./SyntheticTouchEvent":87,"./SyntheticUIEvent":88,"./SyntheticWheelEvent":89,"./invariant":118,"./keyOf":125}],79:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":82}],80:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":82}],81:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={dataTransfer:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticMouseEvent":86}],82:[function(e,t){function n(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];this[s]=o?o(n):n[s]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;this.isDefaultPrevented=u?i.thatReturnsTrue:i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var r=e("./PooledClass"),i=e("./emptyFunction"),s=e("./getEventTarget"),o=e("./merge"),u=e("./mergeInto"),a={type:null,target:s,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};u(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=a,n.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);u(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=o(n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(n,r.threeArgumentPooler),t.exports=n},{"./PooledClass":26,"./emptyFunction":100,"./getEventTarget":109,"./merge":128,"./mergeInto":130}],83:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i={relatedTarget:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticUIEvent":88}],84:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":82}],85:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventKey"),s=e("./getEventModifierState"),o={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?"charCode"in e?e.charCode:e.keyCode:0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return e.keyCode||e.charCode}};r.augmentClass(n,o),t.exports=n},{"./SyntheticUIEvent":88,"./getEventKey":107,"./getEventModifierState":108}],86:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./ViewportMetrics"),s=e("./getEventModifierState"),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:s,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};r.augmentClass(n,o),t.exports=n},{"./SyntheticUIEvent":88,"./ViewportMetrics":91,"./getEventModifierState":108}],87:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventModifierState"),s={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(n,s),t.exports=n},{"./SyntheticUIEvent":88,"./getEventModifierState":108}],88:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i=e("./getEventTarget"),s={view:function(e){if(e.view)return e.view;var t=i(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(n,s),t.exports=n},{"./SyntheticEvent":82,"./getEventTarget":109}],89:[function(e,t){function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticMouseEvent":86}],90:[function(e,t){var n=e("./invariant"),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,r,i,s,o,u,a){n(!this.isInTransaction());var f,l;try{this._isInTransaction=!0,f=!0,this.initializeAll(0),l=e.call(t,r,i,s,o,u,a),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(s){}}}},closeAll:function(e){n(this.isInTransaction());for(var t=this.transactionWrappers,r=e;r<t.length;r++){var s,u=t[r],a=this.wrapperInitData[r];try{s=!0,a!==i.OBSERVED_ERROR&&u.close&&u.close.call(this,a),s=!1}finally{if(s)try{this.closeAll(r+1)}catch(f){}}}this.wrapperInitData.length=0}},i={Mixin:r,OBSERVED_ERROR:{}};t.exports=i},{"./invariant":118}],91:[function(e,t){var n=e("./getUnboundedScrollPosition"),r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=n(window);r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{"./getUnboundedScrollPosition":114}],92:[function(e,t){function n(e,t){if(r(null!=t),null==e)return t;var n=Array.isArray(e),i=Array.isArray(t);return n?e.concat(t):i?[e].concat(t):[e,t]}var r=e("./invariant");t.exports=n},{"./invariant":118}],93:[function(e,t){function n(e){for(var t=1,n=0,i=0;i<e.length;i++)t=(t+e.charCodeAt(i))%r,n=(n+t)%r;return t|n<<16}var r=65521;t.exports=n},{}],94:[function(e,t){function n(e,t){return e&&t?e===t?!0:r(e)?!1:r(t)?n(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var r=e("./isTextNode");t.exports=n},{"./isTextNode":122}],95:[function(e,t){function n(e,t,n,r,i,s){e=e||{};for(var o,u=[t,n,r,i,s],a=0;u[a];){o=u[a++];for(var f in o)e[f]=o[f];o.hasOwnProperty&&o.hasOwnProperty("toString")&&"undefined"!=typeof o.toString&&e.toString!==o.toString&&(e.toString=o.toString)}return e}t.exports=n},{}],96:[function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return n(e)?Array.isArray(e)?e.slice():i(e):[e]}var i=e("./toArray");t.exports=r},{"./toArray":137}],97:[function(e,t){function n(e){var t=r.createClass({displayName:"ReactFullPageComponent"+(e.type.displayName||""),componentWillUnmount:function(){i(!1)},render:function(){return this.transferPropsTo(e(null,this.props.children))}});return t}var r=e("./ReactCompositeComponent"),i=e("./invariant");t.exports=n},{"./ReactCompositeComponent":33,"./invariant":118}],98:[function(e,t){function n(e){var t=e.match(f);return t&&t[1].toLowerCase()}function r(e,t){var r=a;u(!!a);var i=n(e),f=i&&o(i);if(f){r.innerHTML=f[1]+e+f[2];for(var l=f[0];l--;)r=r.lastChild}else r.innerHTML=e;var c=r.getElementsByTagName("script");c.length&&(u(t),s(c).forEach(t));for(var h=s(r.childNodes);r.lastChild;)r.removeChild(r.lastChild);return h}var i=e("./ExecutionEnvironment"),s=e("./createArrayFrom"),o=e("./getMarkupWrap"),u=e("./invariant"),a=i.canUseDOM?document.createElement("div"):null,f=/^\s*<(\w+)/;t.exports=r},{"./ExecutionEnvironment":21,"./createArrayFrom":96,"./getMarkupWrap":110,"./invariant":118}],99:[function(e,t){function n(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var r=e("./CSSProperty"),i=r.isUnitlessNumber;t.exports=n},{"./CSSProperty":3}],100:[function(e,t){function n(e){return function(){return e}}function r(){}var i=e("./copyProperties");i(r,{thatReturns:n,thatReturnsFalse:n(!1),thatReturnsTrue:n(!0),thatReturnsNull:n(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(e){return e}}),t.exports=r},{"./copyProperties":95}],101:[function(e,t){var n={};t.exports=n},{}],102:[function(e,t){function n(e){return i[e]}function r(e){return(""+e).replace(s,n)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},s=/[&><"']/g;t.exports=r},{}],103:[function(e,t){function n(e,t,n){var r=e,i=!r.hasOwnProperty(n);i&&null!=t&&(r[n]=t)}function r(e){if(null==e)return e;var t={};return i(e,n,t),t}var i=e("./traverseAllChildren");e("./warning"),t.exports=r},{"./traverseAllChildren":138,"./warning":139}],104:[function(e,t){function n(e){e.disabled||e.focus()}t.exports=n},{}],105:[function(e,t){var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=n},{}],106:[function(e,t){function n(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=n},{}],107:[function(e,t){function n(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n="charCode"in e?e.charCode:e.keyCode;return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?s[e.keyCode]||"Unidentified":void r(!1)}var r=e("./invariant"),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=n},{"./invariant":118}],108:[function(e,t){function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return r?!!n[r]:!1}function r(){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},{}],109:[function(e,t){function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=n},{}],110:[function(e,t){function n(e){return i(!!s),c.hasOwnProperty(e)||(e="*"),o.hasOwnProperty(e)||(s.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",o[e]=!s.firstChild),o[e]?c[e]:null}var r=e("./ExecutionEnvironment"),i=e("./invariant"),s=r.canUseDOM?document.createElement("div"):null,o={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],a=[1,"<table>","</table>"],f=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],c={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:a,colgroup:a,tbody:a,tfoot:a,thead:a,td:f,th:f,circle:l,defs:l,ellipse:l,g:l,line:l,linearGradient:l,path:l,polygon:l,polyline:l,radialGradient:l,rect:l,stop:l,text:l};t.exports=n},{"./ExecutionEnvironment":21,"./invariant":118}],111:[function(e,t){function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var i=n(e),s=0,o=0;i;){if(3==i.nodeType){if(o=s+i.textContent.length,t>=s&&o>=t)return{node:i,offset:t-s};s=o}i=n(r(i))}}t.exports=i},{}],112:[function(e,t){function n(e){return e?e.nodeType===r?e.documentElement:e.firstChild:null}var r=9;t.exports=n},{}],113:[function(e,t){function n(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=e("./ExecutionEnvironment"),i=null;t.exports=n},{"./ExecutionEnvironment":21}],114:[function(e,t){function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=n},{}],115:[function(e,t){function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},{}],116:[function(e,t){function n(e){return r(e).replace(i,"-ms-")}var r=e("./hyphenate"),i=/^ms-/;t.exports=n},{"./hyphenate":115}],117:[function(e,t){function n(e){return e&&"function"==typeof e.type&&"function"==typeof e.type.prototype.mountComponent&&"function"==typeof e.type.prototype.receiveComponent}function r(e){return i(n(e)),new e.type(e)}var i=e("./invariant");t.exports=r},{"./invariant":118}],118:[function(e,t){var n=function(e,t,n,r,i,s,o,u){if(!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,i,s,o,u],l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}throw a.framesToPop=1,a}};t.exports=n},{}],119:[function(e,t){function n(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var u=document.createElement("div");u.setAttribute(n,"return;"),s="function"==typeof u[n]}return!s&&r&&"wheel"===e&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var r,i=e("./ExecutionEnvironment");i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=n},{"./ExecutionEnvironment":21}],120:[function(e,t){function n(e){return!!e&&("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}t.exports=n},{}],121:[function(e,t){function n(e){return e&&("INPUT"===e.nodeName&&r[e.type]||"TEXTAREA"===e.nodeName)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},{}],122:[function(e,t){function n(e){return r(e)&&3==e.nodeType}var r=e("./isNode");t.exports=n},{"./isNode":120}],123:[function(e,t){function n(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;n>r;r++)t=arguments[r],t&&(e+=" "+t);return e}t.exports=n},{}],124:[function(e,t){var n=e("./invariant"),r=function(e){var t,r={};n(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(r[t]=t);return r};t.exports=r},{"./invariant":118}],125:[function(e,t){var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=n},{}],126:[function(e,t){function n(e,t,n){if(!e)return null;var r=0,i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=t.call(n,e[s],s,r++));return i}t.exports=n},{}],127:[function(e,t){function n(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}t.exports=n},{}],128:[function(e,t){var n=e("./mergeInto"),r=function(e,t){var r={};return n(r,e),n(r,t),r};t.exports=r},{"./mergeInto":130}],129:[function(e,t){var n=e("./invariant"),r=e("./keyMirror"),i=36,s=function(e){return"object"!=typeof e||null===e},o={MAX_MERGE_DEPTH:i,isTerminal:s,normalizeMergeArg:function(e){return void 0===e||null===e?{}:e},checkMergeArrayArgs:function(e,t){n(Array.isArray(e)&&Array.isArray(t))},checkMergeObjectArgs:function(e,t){o.checkMergeObjectArg(e),o.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){n(!s(e)&&!Array.isArray(e))},checkMergeIntoObjectArg:function(e){n(!(s(e)&&"function"!=typeof e||Array.isArray(e)))},checkMergeLevel:function(e){n(i>e)},checkArrayStrategy:function(e){n(void 0===e||e in o.ArrayStrategies)},ArrayStrategies:r({Clobber:!0,IndexByIndex:!0})};t.exports=o},{"./invariant":118,"./keyMirror":124}],130:[function(e,t){function n(e,t){if(s(e),null!=t){i(t);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}}var r=e("./mergeHelpers"),i=r.checkMergeObjectArg,s=r.checkMergeIntoObjectArg;t.exports=n},{"./mergeHelpers":129}],131:[function(e,t){var n=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])};t.exports=n},{}],132:[function(e,t){function n(e){r(e&&!/[^a-z0-9_]/.test(e))}var r=e("./invariant");t.exports=n},{"./invariant":118}],133:[function(e,t){function n(e){return i(r.isValidDescriptor(e)),e}var r=e("./ReactDescriptor"),i=e("./invariant");t.exports=n},{"./ReactDescriptor":49,"./invariant":118}],134:[function(e,t){var n=e("./ExecutionEnvironment"),r=function(e,t){e.innerHTML=t};if(n.canUseDOM){var i=document.createElement("div");i.innerHTML=" ",""===i.innerHTML&&(r=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),t.match(/^[ \r\n\t\f]/)||"<"===t[0]&&(-1!==t.indexOf("<noscript")||-1!==t.indexOf("<script")||-1!==t.indexOf("<style")||-1!==t.indexOf("<meta")||-1!==t.indexOf("<link"))){e.innerHTML=""+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=r},{"./ExecutionEnvironment":21}],135:[function(e,t){function n(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=n},{}],136:[function(e,t){function n(e,t){return e&&t&&e.type===t.type&&(e.props&&e.props.key)===(t.props&&t.props.key)&&e._owner===t._owner?!0:!1}t.exports=n},{}],137:[function(e,t){function n(e){var t=e.length;if(r(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),r("number"==typeof t),r(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var i=Array(t),s=0;t>s;s++)i[s]=e[s];return i}var r=e("./invariant");t.exports=n},{"./invariant":118}],138:[function(e,t){function n(e){return h[e]}function r(e,t){return e&&e.props&&null!=e.props.key?s(e.props.key):t.toString(36)}function i(e){return(""+e).replace(p,n)}function s(e){return"$"+i(e)}function o(e,t,n){return null==e?0:d(e,"",0,t,n)}var u=e("./ReactInstanceHandles"),a=e("./ReactTextComponent"),f=e("./invariant"),l=u.SEPARATOR,c=":",h={"=":"=0",".":"=1",":":"=2"},p=/[=.:]/g,d=function(e,t,n,i,o){var u=0;if(Array.isArray(e))for(var h=0;h<e.length;h++){var p=e[h],v=t+(t?c:l)+r(p,h),m=n+u;u+=d(p,v,m,i,o)}else{var g=typeof e,y=""===t,b=y?l+r(e,0):t;if(null==e||"boolean"===g)i(o,null,b,n),u=1;else if(e.type&&e.type.prototype&&e.type.prototype.mountComponentIntoNode)i(o,e,b,n),u=1;else if("object"===g){f(!e||1!==e.nodeType);for(var w in e)e.hasOwnProperty(w)&&(u+=d(e[w],t+(t?c:l)+s(w)+c+r(e[w],0),n+u,i,o))}else if("string"===g){var E=a(e);i(o,E,b,n),u+=1}else if("number"===g){var S=a(""+e);i(o,S,b,n),u+=1}}return u};t.exports=o},{"./ReactInstanceHandles":57,"./ReactTextComponent":73,"./invariant":118}],139:[function(e,t){var n=e("./emptyFunction"),r=n;t.exports=r},{"./emptyFunction":100}]},{},[27])(27)}),define("components/wizard/StepOne",["react","analysis/config"],function(e,t){function l(){return{completed:!0,selectedOption:u.id}}var n=t.stepOne,r=n.title,i=n.description,s=n.option1,o=n.option2,u=n.option3,a=n.option4,f=n.option5;return e.createClass({getInitialState:function(){return l()},componentDidMount:function(){this.props.callback.update(l().selectedOption)},componentWillReceiveProps:function(e){if(e.isResetting){var t=l();this.replaceState(t),this.props.callback.update(t.selectedOption)}else e.selectedArea&&this.setState({selectedOption:e.selectedArea})},render:function(){return e.DOM.div({className:"step"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-title"},r),e.DOM.p({className:"step-one-main-description"},i),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:s.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===s.id}),e.DOM.label({htmlFor:s.id},s.label),e.DOM.p({className:"step-one-option-description"},s.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:o.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===o.id}),e.DOM.label({htmlFor:o.id},o.label),e.DOM.p({className:"step-one-option-description"},o.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:u.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===u.id}),e.DOM.label({htmlFor:u.id},u.label),e.DOM.p({className:"step-one-option-description"},u.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:a.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===a.id}),e.DOM.label({htmlFor:a.id},a.label),e.DOM.p({className:"step-one-option-description"},a.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:f.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===f.id}),e.DOM.label({htmlFor:f.id},f.label),e.DOM.p({className:"step-one-option-description"},f.description))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"next-button-container",onClick:this._moveOn},e.DOM.span({className:"next-button"},"Next"))))},_changeSelection:function(e){this.props.callback.update(e.target.id)},_moveOn:function(){this.props.callback.nextStep()}})}),define("components/wizard/NestedList",["react"],function(e){function n(){return{filter:""}}var t=e.createClass({propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.string.isRequired,click:e.PropTypes.func.isRequired,filter:e.PropTypes.string.isRequired,children:e.PropTypes.array,activeListItemValues:e.PropTypes.array,activeListGroupValue:e.PropTypes.string},render:function(){var t=this.props.activeListGroupValue!=null&&this.props.activeListGroupValue==this.props.value;if(this.props.filter===""){var n=t?"active":"";return e.DOM.div({className:"wizard-list-item"},e.DOM.span({"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label),this.props.children?this.props.children.map(this._childrenMapper,this):null)}var n=t?"active":"";if(this._searchChildrenForMatches(this.props.children,this.props.filter))return e.DOM.div({className:"wizard-list-item"},e.DOM.span({"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label),this.props.children?this.props.children.map(this._childrenMapper,this):null);var r=this.props.label.toLowerCase(),n="wizard-list-item"+(r.search(this.props.filter)>-1?"":" hidden")+(t?" active":"");return e.DOM.div({className:n},e.DOM.span({"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label))},_searchChildrenForMatches:function(e,t){return e.some(function(e){return e.label.toLowerCase().search(t)>-1?!0:!1})},_childrenMapper:function(t){var n=t.label.toLowerCase(),r="wizard-list-child-item"+(n.search(this.props.filter)>-1?"":" hidden");return this.props.activeListItemValues&&this.props.activeListItemValues.indexOf(t.value)!=-1&&(r+=" active"),e.DOM.div({className:r},e.DOM.span({"data-value":t.value,"data-type":"individual",onClick:this._click},t.label))},_click:function(e){this.props.click(e.target)}});return e.createClass({getInitialState:function(){return n()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(n())},render:function(){return e.DOM.div({className:"nested-list"},e.DOM.div({className:"searchBox relative"+(this.props.data.length>0?"":" hidden")},e.DOM.div({className:"nested-list-search-icon"}),e.DOM.input({placeholder:this.props.placeholder,type:"text",value:this.state.filter,onChange:this._setFilter})),e.DOM.div({className:"list-container "+(this.state.filter!==""?"filtered":"")},this.props.data.map(this._mapper,this)))},_mapper:function(e){return new t({label:e.label||"No Name",value:e.value,click:this.props.click,children:e.children,activeListItemValues:this.props.activeListItemValues,activeListGroupValue:this.props.activeListGroupValue,filter:this.state.filter})},_setFilter:function(e){this.setState({filter:e.target.value.toLowerCase()})}})}),define("components/wizard/MillPoint",["react","map/config","dojo/topic","dojo/query","dojo/dom-class","dojo/_base/array","analysis/Query","analysis/config","utils/GeoHelper","components/wizard/NestedList"],function(e,t,n,r,i,s,o,u,a,f){var l=u.millPoints,c=[],h=[],p=function(){return{nestedListData:[],activeListItemValues:[],selectedCommodity:l.commodityOptions[0].value}};return e.createClass({getInitialState:function(){return{nestedListData:[],selectedCommodity:l.commodityOptions[0].value}},componentDidMount:function(){},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(p());if(e.selectedArea==="millPointOption"&&this.props.currentStep===1&&e.currentStep===2){var r=app.map.getLayer(t.mill.id);r&&(r.visible||(n.publish("showMillPoints"),n.publish("toggleItemInLayerList","mill"))),c=[],h=[],this.setState({activeListItemValues:[]})}e.selectedArea==="millPointOption"&&e.currentStep===2&&this.state.nestedListData.length===0&&this._loadMillPoints()},_selectMapper:function(t){return e.DOM.option({value:t.value},t.label)},render:function(){return e.DOM.div({className:"mill-point",id:"mill-point"},e.DOM.p({className:"instructions"},l.instructions),e.DOM.div({className:"select-container"},e.DOM.select({id:"mill-select",className:"mill-select",value:this.state.selectedCommodity,onChange:this._loadMillPoints},l.commodityOptions.map(this._selectMapper,this))),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},l.instructionsPartTwo),new f({data:this.state.nestedListData,click:this._millPointSelected,placeholder:"Search mill points...",activeListItemValues:this.state.activeListItemValues,isResetting:this.props.isResetting}))},_loadMillPoints:function(){var e=this;this.setState({isLoading:!0}),o.getMillPointData().then(function(t){t&&e.setState({nestedListData:t,isLoading:!1})})},_millPointSelected:function(e){var n=e.dataset?e.dataset.type:e.getAttribute("data-type"),r=e.dataset?e.dataset.value:e.getAttribute("data-value"),i,f=this,l,p,d,v,m,g,y;n!=="group"&&r&&(i=app.map.getLayer(t.wizardGraphicsLayer.id),i&&o.getMillByEntityId(r).then(function(t){l=e.parentNode,y=e.innerText||e.innerHTML;if(f.state.activeListItemValues.indexOf(r)!=-1){var n=f.state.activeListItemValues.indexOf(r),o=f.state.activeListItemValues.slice(0);o.splice(n,1),f.setState({activeListItemValues:o}),d=t.attributes.OBJECTID,p=s.indexOf(h,y),h.splice(p,1),s.forEach(c,function(e,t){d===e.attributes.OBJECTID&&(p=t)}),c.splice(p,1),s.some(i.graphics,function(e){return e.attributes.OBJECTID===d?(i.remove(e),!0):!1})}else{if(c.length>4){alert("You have already selected the maximum number of mills, please deselect some if you want to add more.");return}t.attributes[u.stepTwo.labelField]=y,g=a.preparePointAsPolygon(t),i.add(g);var o=f.state.activeListItemValues.concat([r]);f.setState({activeListItemValues:o}),c.push(g),h.push(y),app.map.centerAndZoom([g.attributes.Longitude,g.attributes.Latitude],9)}c.length>0?f.props.callback.updateAnalysisArea(c,h.join(", ")):f.props.callback.updateAnalysisArea(undefined)}))}})}),define("components/wizard/AdminUnit",["react","map/config","map/MapModel","analysis/Query","analysis/config","components/wizard/NestedList","dojo/topic","dojo/query","esri/Color","esri/graphic","esri/graphicsUtils","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function v(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1}}var p=i.adminUnit,d=new c(c.STYLE_SOLID,new h(h.STYLE_SOLID,new a([255,0,0]),2),new a([255,200,103,0]));return e.createClass({getInitialState:function(){return v()},componentDidMount:function(){n.applyTo("admin-unit")},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(v()),document.getElementById("country-select").value="NONE");if(e.selectedArea==="adminUnitOption"&&this.props.currentStep===1&&e.currentStep===2){var t=document.getElementById("country-select").value;t!=="NONE"&&o.publish("setAdminBoundariesDefinition",t)}},render:function(){return e.DOM.div({className:"admin-unit",id:"admin-unit"},e.DOM.p({className:"instructions"},p.instructions),e.DOM.div({className:"select-container"},e.DOM.select({id:"country-select",className:"country-select",onChange:this._loadAdminUnits,"data-bind":"options: allCountries, optionsText: 'label', optionsValue: 'value'"}),e.DOM.span({className:"loading-wheel "+(this.state.isLoading?"":"hidden")})),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},p.instructionsPartTwo),new s({data:this.state.nestedListData,click:this._lowLevelAdminUnitClick,placeholder:"Search administrative units...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_loadAdminUnits:function(e){var t=e.target.value,n=this;if(t==="NONE"){o.publish("setAdminBoundariesDefinition"),this.setState({nestedListData:[]});return}this.setState({isLoading:!0}),o.publish("setAdminBoundariesDefinition",t),r.getLowLevelAdminUnitData(t).then(function(e){n.setState({nestedListData:e,isLoading:!1})})},_lowLevelAdminUnitClick:function(e){var n=e.dataset?e.dataset.type:e.getAttribute("data-type"),s=e.dataset?e.dataset.value:e.getAttribute("data-value"),o,a=this,c;if(n==="group"){var h=[];u(".wizard-list-child-item span",e.parentNode).forEach(function(e){h.push(parseInt(e.dataset?e.dataset.value:e.getAttribute("data-value")))}),a.setState({activeListItemValues:h,activeListGroupValue:parseInt(s)}),r.getFeaturesByGroupNameAndCountry(p.countryBoundaries,e.innerHTML,document.getElementById("country-select").value).then(function(n){o=app.map.getLayer(t.wizardGraphicsLayer.id),n&&o&&(o.clear(),n.forEach(function(t){t.attributes[i.stepTwo.labelField]=e.innerHTML||e.innerText,c=new f(t.geometry,d,t.attributes),o.add(c)}),a.props.callback.updateAnalysisArea(n,e.innerHTML),app.map.setExtent(l.graphicsExtent(n),!0))})}else s&&(a.setState({activeListItemValues:[parseInt(s)],activeListGroupValue:null}),r.getFeatureById(p.lowLevelUnitsQuery.url,s).then(function(n){o=app.map.getLayer(t.wizardGraphicsLayer.id),n.attributes[i.stepTwo.labelField]=e.innerText||e.innerHTML,c=new f(n.geometry,d,n.attributes),o&&(o.clear(),o.add(c),a.props.callback.updateAnalysisArea(c),c._extent?app.map.setExtent(c._extent,!0):app.map.setExtent(c.getExtent(),!0))}))},_countrySelectMapper:function(t){return e.DOM.option({value:t.value},t.label)}})}),define("components/wizard/CustomArea",["react","analysis/config","esri/units","esri/Color","esri/graphic","esri/request","esri/toolbars/draw","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Circle","esri/geometry/Polygon","esri/geometry/scaleUtils","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","dojo/dom","dojo/query","dojo/sniff","dijit/registry","dojo/dom-class","dojo/store/Memory","dojo/dom-construct","dijit/form/ComboBox","map/config","map/MapModel","utils/GeoHelper"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){function O(){return{graphics:C,showUploadTools:!1}}var N=new h(h.STYLE_SOLID,new p(p.STYLE_SOLID,new r([255,0,0]),2),new r([103,200,255,0])),C=[],k,L,A;return e.createClass({getInitialState:function(){return O()},componentDidMount:function(){L=new o(app.map),L.on("draw-end",this._drawComplete),k=app.map.getLayer(S.customGraphicsLayer.id)},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(O()),this._disableUploadTools(),this._deactivateToolbar(),this._removeActiveClass())},render:function(){return e.DOM.div({className:"custom-area"},e.DOM.p({className:"drawing-instructions"},t.customArea.instructions),e.DOM.div({className:"drawing-tools"},e.DOM.div({className:"drawing-tool-button",onClick:this._activateToolbar,id:"draw-freehand"},t.customArea.freehandLabel),e.DOM.div({className:"drawing-tool-button",onClick:this._activateToolbar,id:"draw-polygon"},t.customArea.polyLabel),e.DOM.div({className:"drawing-tool-button",onClick:this._showUploadTools,id:"draw-upload"},t.customArea.uploadLabel)),e.DOM.div({className:"upload-toolbox "+(this.state.showUploadTools?"":"hidden")},e.DOM.ul({className:"upload-instructions"},t.customArea.uploadInstructions.map(this._instructionsMapper)),e.DOM.form({enctype:"multipart/form-data",name:"uploadForm",method:"post",id:"uploadForm",onChange:this._uploadShapefile},e.DOM.label(null,e.DOM.input({type:"file",name:"file",id:"shapefileUploader"}))),e.DOM.div({id:"upload-select-boxes"})),e.DOM.div({className:"custom-graphics-list-container "+(this.state.graphics.length>0?"":"hidden")},e.DOM.div({className:"clear-custom-features",onClick:this._clearFeatures},"clear all"),e.DOM.div({className:"drawing-instructions"},t.customArea.instructionsPartTwo),this.state.graphics.map(this._graphicsMapper,this)))},_graphicsMapper:function(n){var r=this.props.analysisArea!==undefined,i=this.props.selectedArea=="customAreaOption",s=i&&r&&n.attributes.WRI_ID==this.props.analysisArea.attributes.WRI_ID?"custom-feature-row active":"custom-feature-row";return e.DOM.div({className:s,onClick:this._chooseGraphic,"data-feature-id":n.attributes.WRI_ID},n.attributes[t.stepTwo.labelField])},_instructionsMapper:function(t){return e.DOM.li(null,t)},_clearFeatures:function(){C=[],k.clear(),this.setState(O()),this.props.callback.updateAnalysisArea(),this._deactivateToolbar(),this._removeActiveClass()},_activateToolbar:function(e){this._removeActiveClass(),this.setState({showUploadTools:!1});if(A===e.target.id){this._deactivateToolbar();return}A=e.target.id;switch(e.target.innerHTML){case t.customArea.freehandLabel:L.activate(o.FREEHAND_POLYGON);break;case t.customArea.polyLabel:L.activate(o.POLYGON);break;default:}y.add(e.target,"active"),x.set("drawToolsEnabled",!0)},_showUploadTools:function(e){y.contains(e.target,"active")?this._disableUploadTools():(y.add(e.target,"active"),this.setState({showUploadTools:!0})),A&&(this._deactivateToolbar(),v(".drawing-tool-button").forEach(function(t){t.id!==e.target.id&&y.remove(t,"active")}))},_uploadShapefile:function(e){if(e.target.value==="")return;var n=e.target.value.toLowerCase(),r=this,i,o;if(m("ie")){var u=n.split("\\");n=u[u.length-1]}if(n.indexOf(".zip")<0){alert(t.customArea.incorrectFileTypeError);return}n=n.split("."),n=n[0].replace("c:\\fakepath\\",""),i={name:n,targetSR:app.map.spatialReference,maxRecordCount:1e3,reducePrecision:!0,numberOfDigitsAfterDecimal:0,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},o=c.getExtentForScale(app.map,4e4),i.generalize=!0,i.maxAllowableOffset=o.getWidth()/app.map.width,s({url:t.customArea.portalUrl,content:{filetype:"shapefile",publishParameters:JSON.stringify(i),f:"json","callback.html":"textarea"},form:d.byId("uploadForm"),handleAs:"json",load:r._uploadSuccess,error:r._uploadError})},_uploadError:function(e){alert("Error: "+e.message)},_uploadSuccess:function(e){function a(){g.byId("uploadComboRadiusWidget")&&g.byId("uploadComboRadiusWidget").destroy(),d.byId("dropdownContainerRadius")&&w.destroy("dropdownContainerRadius"),g.byId("uploadComboNameWidget")&&g.byId("uploadComboNameWidget").destroy(),d.byId("dropdownContainerName")&&w.destroy("dropdownContainerName"),s._disableUploadTools()}function f(){var e=[{name:"10 kilometers",id:"10km"},{name:"20 kilometers",id:"20km"},{name:"30 kilometers",id:"30km"},{name:"40 kilometers",id:"40km"},{name:"50 kilometers",id:"50km"}];u=new b({data:e}),new E({id:"uploadComboRadiusWidget",value:"-- Choose a Radius --",store:u,searchAttr:"name",onChange:function(e){e&&s._addFeaturesToMapFromShapefile(n.layers[0].featureSet,o,e),a()}},"uploadComboRadiusWidget")}var t=d.byId("upload-select-boxes"),n=e.featureCollection,r=[],i,s=this,o,u;n.layers[0].layerDefinition.fields.forEach(function(e){r.push({name:e.name,id:e.alias})}),i=n.layers[0].featureSet.geometryType==="esriGeometryPoint",w.create("div",{id:"dropdownContainerRadius",innerHTML:'<div id="uploadComboRadiusWidget"></div>'},t,"after"),w.create("div",{id:"dropdownContainerName",innerHTML:'<div id="uploadComboNameWidget"></div>'},t,"after"),u=new b({data:r}),new E({id:"uploadComboNameWidget",value:"-- Choose name field --",store:u,searchAttr:"name",onChange:function(e){e&&!i?(s._addFeaturesToMapFromShapefile(n.layers[0].featureSet,e),a()):i&&e?(o=e,f()):a()}},"uploadComboNameWidget")},_addFeaturesToMapFromShapefile:function(e,r,s){var o=this._nextAvailWRI_ID(),c=50,h,p,d,v,m,g,y;s&&(s=parseInt(s),isNaN(s)&&(s=c)),e.features.forEach(function(e,c){e.attributes[t.stepTwo.labelField]="ID - "+(o+c)+": "+e.attributes[r],e.attributes.WRI_ID=o+c,e.geometry.x?(m=new u(e.geometry),p=new f(m,{radius:s,radiusUnit:n.KILOMETERS}),h=new a(m.x,m.y,m.x,m.y,m.spatialReference),v=v?v.union(h):h):(p=new l(e.geometry),v=v?v.union(p.getExtent()):p.getExtent()),d=new i(p,N,e.attributes),C.push(d),k.add(d)}),app.map.setExtent(v,!0),this.setState({graphics:C})},_drawComplete:function(e){this._removeActiveClass(),this._deactivateToolbar();if(!e.geometry)return;var n=this._nextAvailWRI_ID(),r={WRI_ID:n},s;r[t.stepTwo.labelField]="ID - "+n+": Custom drawn feature",s=new i(e.geometry,N,r),k.add(s),C.push(s),this.setState({graphics:C})},_deactivateToolbar:function(){L.deactivate(),A=undefined,x.set("drawToolsEnabled",!1)},_disableUploadTools:function(){d.byId("shapefileUploader").value="",y.remove("draw-upload","active"),this.setState({showUploadTools:!1})},_removeActiveClass:function(){v(".drawing-tools .drawing-tool-button").forEach(function(e){y.remove(e,"active")})},_chooseGraphic:function(e){var t=e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id"),n=this;k.graphics.forEach(function(e){e.attributes.WRI_ID===parseInt(t)&&(T.zoomToFeature(e),n.props.callback.updateAnalysisArea(e))})},_nextAvailWRI_ID:function(){var e=0,t=0,n=k.graphics,r=n.length,i;for(e;e<r;e++)n[e].geometry.type!=="point"&&(i=parseInt(n[e].attributes.WRI_ID),isNaN(i)||(t=t>i?t:i));return t+1}})}),define("components/wizard/CertifiedArea",["react","map/config","analysis/Query","analysis/config","components/wizard/NestedList","dojo/topic","dojo/query","esri/Color","esri/graphic","esri/graphicsUtils","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(e,t,n,r,i,s,o,u,a,f,l,c){function d(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1,selectedCommodity:h.commodityOptions[0].value,selectedScheme:h.certificationOptions[1].value}}var h=r.certifiedArea,p=new l(l.STYLE_SOLID,new c(c.STYLE_SOLID,new u([255,0,0]),2),new u([255,200,103,0]));return e.createClass({getInitialState:function(){return d()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(d());if(e.selectedArea==="certifiedAreaOption"&&this.state.selectedScheme!=="NONE"&&this.props.currentStep===1&&e.currentStep===2){s.publish("setCertificationSchemeDefinition",this.state.selectedScheme);if(this.state.nestedListData.length===0){var t={target:{value:h.certificationOptions[1].value}};this._loadFeatures(t)}}},render:function(){if(this.props.currentStep===2&&this.props.selectedArea==="certifiedAreaOption"){switch(this.state.selectedCommodity){case"Oil palm concession":s.publish("filterConcessionsLegendItems",2)}this.state.selectedCommodity==="NONE"?s.publish("hideConcessionsLegend"):s.publish("showConcessionsLegend")}return e.DOM.div({className:"certified-area"},e.DOM.p({className:"instructions"},h.instructions),e.DOM.select({className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._updateCommodity},h.commodityOptions.map(this._selectMapper,this)),e.DOM.p({className:"instructions"},h.instructionsPartTwo),e.DOM.select({className:"certification-scheme-select",value:this.state.selectedScheme,onChange:this._loadFeatures},h.certificationOptions.map(this._selectMapper,this)),e.DOM.span({className:"loading-wheel "+(this.state.isLoading?"":"hidden")}),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},h.instructionsPartThree),new i({data:this.state.nestedListData,click:this._schemeClicked,placeholder:"Search certified areas...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.DOM.option({value:t.value},t.label)},_updateCommodity:function(e){this.setState({selectedCommodity:e.target.value})},_updateScheme:function(e){this.setState({selectedScheme:e,isLoading:!0})},_loadFeatures:function(e){var t=e.target.value,r=this;if(t==="NONE"){s.publish("setCertificationSchemeDefinition"),this.setState({nestedListData:[],selectedScheme:t});return}this._updateScheme(t),s.publish("setCertificationSchemeDefinition",t),n.getFeaturesByScheme(t,this.state.selectedCommodity).then(function(e){r.setState({nestedListData:e,isLoading:!1})})},_schemeClicked:function(e){var i=e.dataset?e.dataset.type:e.getAttribute("data-type"),s=e.dataset?e.dataset.value:e.getAttribute("data-value"),u,l=this,c;if(i==="group"){var d=[];o(".wizard-list-child-item span",e.parentNode).forEach(function(e){d.push(parseInt(e.dataset?e.dataset.value:e.getAttribute("data-value")))}),l.setState({activeListItemValues:d,activeListGroupValue:parseInt(s)}),n.getFeaturesByGroupName(h.groupQuery,e.innerHTML).then(function(n){u=app.map.getLayer(t.wizardGraphicsLayer.id),n&&u&&(u.clear(),n.forEach(function(t){t.attributes[r.stepTwo.labelField]=e.innerText||e.innerHTML,c=new a(t.geometry,p,t.attributes),u.add(c)}),l.props.callback.updateAnalysisArea(n[0]),app.map.setExtent(f.graphicsExtent(n),!0))})}else s&&(l.setState({activeListItemValues:[parseInt(s)],activeListGroupValue:null}),n.getFeatureById(h.schemeQuery.url,s).then(function(n){n.attributes[r.stepTwo.labelField]=e.innerText||e.innerHTML,c=new a(n.geometry,p,n.attributes),u=app.map.getLayer(t.wizardGraphicsLayer.id),u&&(u.clear(),u.add(c),l.props.callback.updateAnalysisArea(c),c._extent?app.map.setExtent(c._extent,!0):app.map.setExtent(c.getExtent(),!0))}))}})}),define("components/wizard/CommercialEntity",["react","map/config","analysis/Query","analysis/config","components/wizard/NestedList","dojo/topic","dojo/query","esri/Color","esri/graphic","esri/graphicsUtils","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(e,t,n,r,i,s,o,u,a,f,l,c){function d(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1,selectedCommodity:h.commodityOptions[0].value}}var h=r.commercialEntity,p=new l(l.STYLE_SOLID,new c(c.STYLE_SOLID,new u([255,0,0]),2),new u([255,200,103,0]));return e.createClass({getInitialState:function(){return d()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(d()),e.selectedArea==="commercialEntityOption"&&this.state.selectedCommodity!=="NONE"&&this.props.currentStep===1&&e.currentStep===2&&s.publish("setCommercialEntityDefinition",this.state.selectedCommodity)},render:function(){if(this.props.currentStep===2&&this.props.selectedArea==="commercialEntityOption"){switch(this.state.selectedCommodity){case"Logging concession":s.publish("filterConcessionsLegendItems",0);break;case"Mining concession":s.publish("filterConcessionsLegendItems",1);break;case"Oil palm concession":s.publish("filterConcessionsLegendItems",2);break;case"Wood fiber plantation":s.publish("filterConcessionsLegendItems",3)}this.state.selectedCommodity==="NONE"?s.publish("hideConcessionsLegend"):s.publish("showConcessionsLegend")}return e.DOM.div({className:"commercial-entity"},e.DOM.p({className:"instructions"},h.instructions),e.DOM.select({className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._loadFeatures},h.commodityOptions.map(this._selectMapper,this)),e.DOM.span({className:"loading-wheel "+(this.state.isLoading?"":"hidden")}),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},h.instructionsPartTwo),new i({data:this.state.nestedListData,click:this._commodityClicked,placeholder:"Search commercial entities...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.DOM.option({value:t.value},t.label)},_loadFeatures:function(e){var t=e.target.value,r=this;if(t==="NONE"){s.publish("setCommercialEntityDefinition"),this.setState({nestedListData:[],selectedCommodity:t});return}this.setState({selectedCommodity:t,isLoading:!0}),s.publish("setCommercialEntityDefinition",t),n.getFeaturesByCommodity(t).then(function(e){r.setState({nestedListData:e,isLoading:!1})})},_commodityClicked:function(e){var i=e.dataset?e.dataset.type:e.getAttribute("data-type"),s=e.dataset?e.dataset.value:e.getAttribute("data-value"),u,l=this,c;if(i==="group"){if(e.innerHTML===r.noNameField)return;var d=[];o(".wizard-list-child-item span",e.parentNode).forEach(function(e){d.push(parseInt(e.dataset?e.dataset.value:e.getAttribute("data-value")))}),l.setState({activeListItemValues:d,activeListGroupValue:parseInt(s)}),n.getFeaturesByGroupName(h.groupQuery,e.innerHTML).then(function(n){u=app.map.getLayer(t.wizardGraphicsLayer.id),n&&u&&(u.clear(),n.forEach(function(t){t.attributes[r.stepTwo.labelField]=e.innerText,c=new a(t.geometry,p,t.attributes),u.add(c)}),l.props.callback.updateAnalysisArea(n[0]),app.map.setExtent(f.graphicsExtent(n),!0))})}else s&&(l.setState({activeListItemValues:[parseInt(s)],activeListGroupValue:null}),n.getFeatureById(h.commodityQuery.url,s).then(function(n){n.attributes[r.stepTwo.labelField]=e.innerHTML||e.innerText,c=new a(n.geometry,p,n.attributes),u=app.map.getLayer(t.wizardGraphicsLayer.id),u&&(u.clear(),u.add(c),l.props.callback.updateAnalysisArea(c),c._extent?app.map.setExtent(c._extent,!0):app.map.setExtent(c.getExtent(),!0))}))}})}),define("components/wizard/StepTwo",["react","analysis/config","components/wizard/MillPoint","components/wizard/AdminUnit","components/wizard/CustomArea","components/wizard/CertifiedArea","components/wizard/CommercialEntity"],function(e,t,n,r,i,s,o){function v(){return{completed:!1}}var u=t.stepTwo.title,a=t.stepTwo.customArea,f=t.stepTwo.adminUnit,l=t.stepTwo.millPoint,c=t.stepTwo.certArea,h=t.stepTwo.commArea,p=t.stepTwo.labelField,d={};return d[a]="Create a custom area",d[f]="Administrative unit",d[l]="Mill point",d[c]="Certified area",d[h]="Commercial entity",e.createClass({getInitialState:function(){return v()},componentDidMount:function(){},componentWillReceiveProps:function(e){if(e.isResetting){this.replaceState(v());return}e.analysisArea?this.setState({completed:!0}):this.replaceState(v())},render:function(){var v=this.props.analysisArea?this.props.analysisArea.attributes?this.props.analysisArea.attributes[p]:this.props.optionalLabel:"none";return e.DOM.div({className:"step"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-title"},u+" - "+d[this.props.selectedArea]),e.DOM.div({className:"s2-tools "+(this.props.selectedArea!==l?"hidden":"")},new n(this.props)),e.DOM.div({className:"s2-tools "+(this.props.selectedArea!==f?"hidden":"")},new r(this.props)),e.DOM.div({className:"s2-tools "+(this.props.selectedArea!==a?"hidden":"")},new i(this.props)),e.DOM.div({className:"s2-tools "+(this.props.selectedArea!==c?"hidden":"")},new s(this.props)),e.DOM.div({className:"s2-tools "+(this.props.selectedArea!==h?"hidden":"")},new o(this.props))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"selected-analysis-area"},e.DOM.div({className:"current-selection-label"},t.stepTwo.currentFeatureText),e.DOM.div({className:"current-selection",title:v},v)),e.DOM.div({className:"next-button-container "+(this.state.completed?"":"disabled"),onClick:this._checkRequirements},e.DOM.span({className:"next-button"},"Next"))))},_checkRequirements:function(){this.state.completed&&this.props.callback.nextStep()},_setCompletion:function(e){this.setState({completed:e})}})}),define("components/wizard/WizardCheckbox",["react","dojo/topic"],function(e,t){return e.createClass({propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.string.isRequired},getInitialState:function(){return{active:this.props.defaultChecked||!1}},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(this.getInitialState())},componentDidUpdate:function(e,t){this.props.change&&t.active!==this.state.active&&this.props.change(this.state.active)},render:function(){var t="wizard-checkbox"+(this.state.active?" active":"");return e.DOM.div({className:"wizard-checkbox-container"},e.DOM.div({className:t,"data-value":this.props.value},e.DOM.span({className:"custom-check",onClick:this._toggle},e.DOM.span({})),e.DOM.a({className:"wizard-checkbox-label",onClick:this._toggle},this.props.label),this.props.noInfoIcon?null:e.DOM.div({className:"layer-info-icon",onClick:this.showInfo})))},_toggle:function(){this.setState({active:!this.state.active})},showInfo:function(e){switch(this.props.value){case"peat":this.props.infoDivClass="forest-and-land-cover-peat-lands";break;case"treeDensity":this.props.infoDivClass="forest-and-land-cover-tree-cover-density";break;case"legal":this.props.infoDivClass="forest-and-land-cover-legal-classifications";break;case"protected":this.props.infoDivClass="conservation-protected-areas";break;case"carbon":this.props.infoDivClass="forest-and-land-cover-carbon-stocks";break;case"intact":this.props.infoDivClass="forest-and-land-cover-intact-forest-landscape";break;case"landCoverGlob":this.props.infoDivClass="forest-and-land-cover-land-cover-global";break;case"primForest":this.props.infoDivClass="forest-and-land-cover-primary-forest";break;case"suit":this.props.infoDivClass="land-use-oil-palm";break;case"rspo":this.props.infoDivClass="land-use-rspo-consessions";break;case"landCoverIndo":this.props.infoDivClass="forest-and-land-cover-land-cover-indonesia";break;case"landCoverAsia":this.props.infoDivClass="forest-and-land-cover-land-cover-south-east-asia";break;case"treeCoverLoss":this.props.infoDivClass="forest-change-tree-cover-change"}document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)}})}),define("components/wizard/StepThree",["react","analysis/config","components/wizard/WizardCheckbox"],function(e,t,n){function s(){return{completed:!1}}var r=t.stepThree,i=t.stepTwo.labelField;return e.createClass({getInitialState:function(){return s()},componentDidMount:function(){},componentDidUpdate:function(e){this.props.selectedArea!=="millPointOption"&&e.currentStep===2&&this.props.currentStep===3&&this._selectionMade()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(s())},render:function(){var s=this.props.analysisArea?this.props.analysisArea.attributes?this.props.analysisArea.attributes[i]:this.props.optionalLabel:"none";return e.DOM.div({className:"step select-analysis"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-three-top"},e.DOM.div({className:"step-title"},r.title),this.props.selectedArea==="millPointOption"?e.DOM.p({className:"sub-title"},"(Analysis based on 50km buffer)"):null,new n({label:r.suit.label,value:r.suit.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.DOM.p({className:"layer-description"},r.suit.description),new n({label:r.rspo.label,value:r.rspo.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.DOM.p({className:"layer-description"},r.rspo.description),e.DOM.div({className:this.props.selectedArea==="millPointOption"?"":"hidden",style:{position:"relative"}},e.DOM.div({className:"coming-soon"},"Mill Point Risk Assessment Coming Soon!"),new n({label:r.mill.label,value:r.mill.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.DOM.p({className:"layer-description"},r.mill.description)),e.DOM.div({className:"step-sub-header"},r.forestChange.label),e.DOM.p({className:"layer-description"},r.forestChange.description)),e.DOM.div({className:"checkbox-list"},r.checkboxes.map(this._mapper,this))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"selected-analysis-area"},e.DOM.div({className:"current-selection-label"},t.stepTwo.currentFeatureText),e.DOM.div({className:"current-selection",title:s},s)),e.DOM.div({className:"next-button-container "+(this.state.completed?"":"disabled"),onClick:this._proceed},e.DOM.span({className:"next-button"},"Perform Analysis"))))},_mapper:function(e){return new n({label:e.label,value:e.value,change:this._selectionMade,isResetting:this.props.isResetting,defaultChecked:e.checked||!1,noInfoIcon:e.noInfoIcon||!1})},_selectionMade:function(e){var t=this._checkRequirements();if(t){var n=this._getPayload();this.props.callback.updateAnalysisDatasets(n)}this.setState({completed:t})},_checkRequirements:function(){var e=!1,t=document.querySelectorAll(".select-analysis .wizard-checkbox.active"),n;if(t.length>0)if(t.length>1)e=!0;else{n=t[0].dataset?t[0].dataset.value:t[0].getAttribute("data-value");if(this.props.selectedArea==="millPointOption"||n!=="mill")e=!0}return e},_getPayload:function(){var e=document.querySelectorAll(".select-analysis .wizard-checkbox"),t={},n=this,r;return Array.prototype.forEach.call(e,function(e){r=e.dataset?e.dataset.value:e.getAttribute("data-value");if(n.props.selectedArea==="millPointOption"||r!=="mill")t[r]=e.className.search("active")>-1}),t},_proceed:function(){this.state.completed&&this.props.callback.performAnalysis()}})}),define("components/wizard/StepFour",["react","analysis/config","components/wizard/WizardCheckbox"],function(e,t,n){function i(){return{completed:!0}}var r=t.stepFour;return e.createClass({getInitialState:function(){return i()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(i())},render:function(){return e.DOM.div({className:"step refine-analysis"},e.DOM.div({className:"step-title"},r.title),e.DOM.p({className:"step-description"},r.description),r.checkboxes.map(this._mapper,this),e.DOM.div({className:"next-button-container"},e.DOM.span({className:"next-button "+(this.state.completed?"":"disabled"),onClick:this._proceed},"Perform Analysis")))},_mapper:function(e){return new n({label:e.label,value:e.value,change:this._selectionMade,isResetting:this.props.isResetting,defaultChecked:e.checked||!1})},_selectionMade:function(e){this.setState({completed:this._checkRequirements()})},_checkRequirements:function(){return document.querySelectorAll(".refine-analysis .wizard-checkbox.active").length>0},_getPayload:function(){var e=document.querySelectorAll(".refine-analysis .wizard-checkbox"),t={},n;return Array.prototype.forEach.call(e,function(e){n=e.dataset?e.dataset.value:e.getAttribute("data-value"),t[n]=e.className.search("active")>-1}),t},_proceed:function(){if(this.state.completed){var e=this._getPayload();this.props.callback.updateAnalysisDatasets(e),this.props.callback.performAnalysis()}}})}),define("components/wizard/StepFive",["react","analysis/config"],function(e,t){function r(){return{completed:!0}}var n=t.stepFive;return e.createClass({getInitialState:function(){return r()},componentDidMount:function(){this.props.callback.update(r().selectedOption)},componentWillReceiveProps:function(e){if(e.isResetting){var t=r();this.replaceState(t),this.props.callback.update(t.selectedOption)}else e.selectedArea&&this.setState({selectedOption:e.selectedArea})},render:function(){return e.DOM.div({className:"step"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-title"},n.title),e.DOM.div({className:"step-one-main-description"},e.DOM.p({},n.beginningText),e.DOM.ul({},n.firstList.map(this._listMapper)),e.DOM.p({},n.secondaryText),e.DOM.ul({},n.secondList.map(this._listMapper)))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"next-button-container",onClick:this._moveOn},e.DOM.span({className:"next-button"},"Next"))))},_listMapper:function(t){return e.DOM.li({},t)},_paragraphMapper:function(t){return e.DOM.p({},t)},_changeSelection:function(e){this.props.callback.update(e.target.id)},_moveOn:function(){this.props.callback.nextStep()}})}),define("components/wizard/Wizard",["react","analysis/config","components/wizard/StepOne","components/wizard/StepTwo","components/wizard/StepThree","components/wizard/StepFour","components/wizard/StepFive","dojo/topic","dojo/_base/array","map/config","dojo/_base/lang","esri/tasks/PrintTask","map/Controls"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function d(){return{currentStep:0,analysisArea:undefined,analysisSets:undefined,analysisTypes:undefined}}var p=t.wizard.breadcrumbs,v=e.createClass({getInitialState:function(){return d()},componentDidMount:function(){this.props.skipIntro&&this.setState({currentStep:3})},componentDidUpdate:function(e,t){this.props.isResetting&&this.setProps({isResetting:!1});if(t.currentStep>1&&this.state.currentStep===1){this.setState({analysisArea:undefined});var n=app.map.getLayer(f.wizardGraphicsLayer.id);n&&n.clear()}},render:function(){var t=this.props;return t.analysisArea=this.state.analysisArea,t.currentStep=this.state.currentStep,t.currentStep===0?($(".breadcrumbs").hide(),$(".gfw .wizard-header").css("height","-=45px"),$(".gfw .wizard-body").css("top","55px"),$(".gfw .wizard-header .button.reset").hide()):($(".breadcrumbs").show(),$(".gfw .wizard-header").css("height","+=45px"),$(".gfw .wizard-body").css("top","95px"),$(".gfw .wizard-header .button.reset").show(),$(".gfw .wizard-header .button.reset").css("top","0px")),t.callback={nextStep:this._nextStep,update:this._updateSelectedArea,updateAnalysisArea:this._updateAnalysisArea,updateAnalysisType:this._updateAnalysisType,updateAnalysisDatasets:this._updateAnalysisDatasets,performAnalysis:this._performAnalysis},(["commercialEntityOption","certifiedAreaOption"].indexOf(this.props.selectedArea)===-1||this.props.currentStep===1)&&u.publish("hideConcessionsLegend"),e.DOM.div({className:"relative wizard-root"},e.DOM.div({className:"wizard-header"},e.DOM.div({className:"title-section"},e.DOM.span({className:"title"},"Analysis"),e.DOM.span({className:"button reset",onClick:this._reset},"Reset"),e.DOM.span({className:"button close",onClick:this._close},"")),e.DOM.div({className:"breadcrumbs"},p.map(this._breadcrumbMapper,this))),e.DOM.div({className:"wizard-body"},e.DOM.div({className:this.state.currentStep!==0?"hidden":""},new o(t)),e.DOM.div({className:this.state.currentStep!==1?"hidden":""},new n(t)),e.DOM.div({className:this.state.currentStep!==2?"hidden":""},new r(t)),e.DOM.div({className:this.state.currentStep!==3?"hidden":""},new i(t))))},_breadcrumbMapper:function(t,n){var r=n<this.state.currentStep-1?"enabled":"";return r+=this.state.currentStep-1===n?" active":"",e.DOM.span({className:r},e.DOM.span({className:"piece","data-index":n,onClick:this._changeStep},t),n<p.length-1?e.DOM.span({className:"carat"}," > "):null)},_changeStep:function(e){var t=e.target.dataset?e.target.dataset.index:e.target.getAttribute("data-index");t*=1,t<this.state.currentStep+1&&this.setState({currentStep:1*t+1})},_nextStep:function(){this.setState({currentStep:this.state.currentStep+1})},_reset:function(){this.replaceProps({isResetting:!0}),this.replaceState(d());var e=app.map.getLayer(f.wizardGraphicsLayer.id);e&&e.clear(),e=app.map.getLayer(f.adminUnitsLayer.id),e&&e.hide()},_close:function(){u.publish("toggleWizard")},_updateSelectedArea:function(e){this.setProps({selectedArea:e})},_updateAnalysisArea:function(e,t){t&&this.setProps({optionalLabel:t}),this.setState({analysisArea:e})},_updateAnalysisType:function(e){this.setState({analysisTypes:e})},_updateAnalysisDatasets:function(e){this.setState({analysisSets:e})},_externalSetStep:function(e){(e>=0||e<=3)&&this.setState({currentStep:e})},_performAnalysis:function(){var e=this,n=e._prepareGeometry(e.state.analysisArea),r,i,s,o,u=window.open("./app/js/report/Report.html","_blank","menubar=yes,titlebar=yes");if(u===null||typeof u===undefined||u===undefined)alert("Popup blocker needs to be off");else{u.focus(),r=t.stepTwo.labelField,i=app.map.getLayer(f.suit.id).getRenderingRule(),o=e.state.analysisSets,printTask=new c;var a=printTask._getPrintDefinition(app.map);a.exportOptions={outputSize:[850,850],dpi:96},u.payload={geometry:n,datasets:e.state.analysisSets,title:e.state.analysisArea.attributes?e.state.analysisArea.attributes[r]:e.props.optionalLabel,suitability:{renderRule:i,csv:h._getSettingsCSV()},webMapJson:JSON.stringify(a)},s=u.document.createEvent("Event"),s.initEvent("PayloadReady",!0,!0),u.document.dispatchEvent(s)}},_prepareGeometry:function(e){var t,n;return Object.prototype.toString.call(e)==="[object Array]"?(t=e[0].geometry.radius!==undefined,n=[],t?e.forEach(function(e){n.push({label:e.attributes.WRI_label,id:e.attributes.Entity_ID,geometry:e.geometry,type:"circle"})}):e.forEach(function(e){n.push({label:e.attributes.WRI_label,geometry:e.geometry,type:"polygon"})})):(t=e.geometry.radius!==undefined,t?n=[{label:e.attributes.WRI_label,id:e.attributes.Entity_ID,geometry:e.geometry,type:"circle"}]:n=e.geometry),JSON.stringify(n)},_getStepAndActiveArea:function(){return{currentStep:this.state.currentStep,selectedArea:this.props.selectedArea||"none"}}});return function(t,n){return e.renderComponent(new v(t),document.getElementById(n))}}),define("analysis/WizardHelper",["dojo/fx","dojo/dom","dojo/_base/fx","dojo/Deferred","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/_base/array","map/config","utils/Hasher","utils/GeoHelper","analysis/Query","analysis/config","components/wizard/Wizard"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d;return{toggleWizard:function(u){var a=o.position(t.byId("map")).w,l=t.byId("wizard-container"),h=new r,v=460,m=460,g=a/2,y,b=500,w,E,S,x;return x=g>=m&&g<=v?g:g<m?m:v,y=app.map.extent.getCenter(),i.contains(l,"activated")&&(s.set("wizard","display","none"),x=0),i.toggle(l,"activated"),w=n.animateProperty({node:l,properties:{width:x},duration:b}),E=n.animateProperty({node:t.byId("wizard-tab"),properties:{opacity:x===0?1:0},duration:b}),S=n.animateProperty({node:t.byId("map-container"),properties:{left:x},duration:b,onEnd:function(){app.map.resize(!0),x>0&&s.set("wizard","display","block"),h.resolve(!0)}}),d===undefined&&(c.getSetupData(),setTimeout(function(){d=new p({skipIntro:u},"wizard")},b-100)),e.combine([w,E,S]).play(),x===0?this.cleanupWizard():(d&&d.forceUpdate(),this.showWizardRelatedLayers()),x===0?f.removeKey("wiz"):f.setHash("wiz","open"),h.promise},cleanupWizard:function(){app.map.getLayer(a.adminUnitsLayer.id).hide(),app.map.getLayer(a.wizardGraphicsLayer.id).hide(),app.map._simpleLegends.concessions.hide()},showWizardRelatedLayers:function(){app.map.getLayer(a.adminUnitsLayer.id).show(),app.map.getLayer(a.wizardGraphicsLayer.id).show()},customFeatureClicked:function(e){e.graphic&&(d._updateSelectedArea(h.stepOne.option1.id),d._externalSetStep(2),d._updateAnalysisArea(e.graphic))},analyzeAreaFromPopup:function(e){function v(e){d._updateSelectedArea(s),d._externalSetStep(3),d._updateAnalysisArea(e)}var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.label:t.getAttribute("data-label"),r=t.dataset?t.dataset.type:t.getAttribute("data-type"),i=t.dataset?t.dataset.id:t.getAttribute("data-id"),s=h.stepOne.option3.id,o=a.oilPerm.url,f=this,p;switch(r){case"Logging concession":p=10;break;case"Mining concession":p=26;break;case"Wood fiber plantation":p=28;break;case"Oil palm concession":p=32;break;case"RSPO Oil palm concession":p=27;break;case"AdminBoundary":s=h.stepOne.option2.id,o=a.adminUnitsLayer.url,p=a.adminUnitsLayer.layerId;break;case"CertScheme":o=a.commercialEntitiesLayer.url,p=a.commercialEntitiesLayer.layerId;break;case"CustomGraphic":s=h.stepOne.option1.id;break;case"MillPoint":s=h.stepOne.option5.id}r==="CustomGraphic"?(p=app.map.getLayer(a.customGraphicsLayer.id),u.some(p.graphics,function(e){return e.attributes.WRI_ID===parseInt(i)?(f.isOpen()?v(e):f.toggleWizard(!0).then(function(){v(e)}),!0):!1})):r==="MillPoint"?c.getMillByEntityId(i).then(function(e){e.attributes.WRI_label=n,e=l.preparePointAsPolygon(e),f.isOpen()?(v(e),f.addGraphicFromPopup(e)):f.toggleWizard(!0).then(function(){v(e),f.addGraphicFromPopup(e)})}):c.getFeatureById(o+"/"+p,i).then(function(e){e.attributes.WRI_label=n,f.isOpen()?(v(e),f.addGraphicFromPopup(e)):f.toggleWizard(!0).then(function(){v(e),f.addGraphicFromPopup(e)})}),app.map.infoWindow.hide()},addGraphicFromPopup:function(e){var t=app.map.getLayer(a.wizardGraphicsLayer.id),n;t&&(t.clear(),e.symbol?(t.add(e),e.geometry.radius?app.map.centerAndZoom([e.attributes.Longitude,e.attributes.Latitude],9):app.map.setExtent(e.geometry.getExtent(),!0)):(e=l.applySelectionSymbolToFeature(e),t.add(e),app.map.setExtent(e.geometry.getExtent(),!0)))},isOpen:function(){return i.contains("wizard-container","activated")}}}),define("map/SuitabilityImageServiceLayer",["dojo/_base/declare","dojo/Evented","dojo/_base/lang","dojo/_base/array","esri/layers/RasterFunction","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","map/MapModel","esri/request"],function(e,t,n,r,i,s,o,u,a){return e("SuitabilityImageServiceLayer",[t,o],{constructor:function(){this.declaredClass="esri.layers.ArcGISImageServiceLayer",this.rasterFunctionArguments={},this.rasterFunctionArguments.ElevRaster="$1",this.rasterFunctionArguments.SlopeRaster="$2",this.rasterFunctionArguments.WaterRaster="$3",this.rasterFunctionArguments.ConsRaster="$4",this.rasterFunctionArguments.STypeRaster="$5",this.rasterFunctionArguments.SDepthRaster="$6",this.rasterFunctionArguments.PeatRaster="$7",this.rasterFunctionArguments.SAcidRaster="$8",this.rasterFunctionArguments.SDrainRaster="$9",this.rasterFunctionArguments.RainfallRaster="$10",this.rasterFunctionArguments.LCRaster="$11",this.rasterFunctionScalars={},this.rasterFunctionScalars.Elev=10,this.rasterFunctionScalars.Slope=1,this.rasterFunctionScalars.Water=10,this.rasterFunctionScalars.Cons=100,this.rasterFunctionScalars.SType=1,this.rasterFunctionScalars.SDepth=1,this.rasterFunctionScalars.Peat=1,this.rasterFunctionScalars.SAcid=1,this.rasterFunctionScalars.SDrain=1,this.rasterFunctionScalars.Rainfall=10,this.rasterFunctionScalars.LC=1,this.renderingRule={};var e=new i;e.functionName="RemapColormap2Prashant",e.arguments=this.rasterFunctionArguments;var t=new s;t.noData=0,t.renderingRule=e,this.imageServiceParameters=t},getExportUrl:function(e,t,n,r,i){},getRenderingRule:function(){var e=this,t=e.returnRasterSettingsAsObject(),r={};n.mixin(r,this.rasterFunctionArguments),e.addThresholdArgument(t,r,"Elev",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Slope",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Water",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Cons",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Rainfall",e.rasterFunctionScalars,"BETWEEN"),e.addMembershipArgument(t,r,"SDepth",[0,1,2,3,4,5,6,7,99]),e.addMembershipArgument(t,r,"Peat",[0,1,2,3,4,5,6]),e.addMembershipArgument(t,r,"SAcid",[0,1,2,3,4,5,6,7,8,99]),e.addMembershipArgument(t,r,"SDrain",[0,1,2,3,4,99]),e.addMembershipArgument(t,r,"LC",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),e.addMembershipArgument(t,r,"SType",[0,1,2,3,4,5,6,7,8,9,10]);var s=new i;return s.rasterFunction="PalmOilSuitabilityNew",s.rasterFunctionArguments=r,s},getImageUrl:function(e,t,n,r,i){var s=this;e=e._normalize();var o=[e.xmin,e.ymin,e.xmax,e.ymax],u,f,l,c,h,p,d=s.getRenderingRule();i?(u=i,u.renderingRule=JSON.stringify(d),u.bbox=o.join(","),u.f="json",s.renderingRule=d,p=a({url:s.url+"/exportImage",content:u,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),p.then(function(e){try{r(e.href),s.emit("image-ready",{})}catch(t){s.refresh()}},function(e){console.dir(e),s.emit("image-ready",{})})):(u={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",renderingRule:JSON.stringify(d),format:"png8",size:t+","+n,imageSR:3857,bboxSR:3857,f:"json",pixelType:"U8",bbox:o.join(",")},s.renderingRule=d,s.renderingRule.toJson=function(){return s.getRenderingRule()},p=a({url:s.url+"/exportImage",content:u,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),p.then(function(e){try{r(e.href),s.emit("image-ready",{})}catch(t){s.refresh()}},function(e){console.dir(e),s.emit("image-ready",{})}))},returnRasterSettingsAsObject:function(){var e={},t=u.get("suitabilitySettings").computeBinaryRaster;return r.forEach(t,function(t){e[t.name]=t.values}),e},returnNumericArray:function(e){var t=e.split(","),n=[];return r.forEach(t,function(e){n.push(parseInt(e,10))}),n},addThresholdArgument:function(e,t,n,r,i){var s=this;scalar=r[n];if(i==="BETWEEN"){var o=s.returnNumericArray(e[n+"InpR"]),u=o[0],a=o[o.length-1];t[n+"InpR"]=[0,u/scalar,u/scalar,a/scalar,a/scalar,1e6],t[n+"OutV"]=[1,1,0]}else{var f=parseInt(e[n+"InpR"],10);t[n+"InpR"]=[0,f/scalar,f/scalar,1e6],t[n+"OutV"]=i==="MIN"?[0,1]:[1,0]}},addMembershipArgument:function(e,t,n,r){var i=this,s=i.returnNumericArray(e[n+"InpR"]),o=[],u=[],a=["SDepth","SAcid","SDrain","LC"],f,l;a.indexOf(n)>-1&&s[0]!==0&&s.unshift(0);for(l=0;l<r.length;l++)f=r[l],o.push(f,f),s.indexOf(f)===-1?u.push(0):u.push(1);t[n+"InpR"]=o,t[n+"OutV"]=u}})}),define("map/SimpleLegend",[],function(){return SimpleLegend=function(e){return this.config=e,this.CLASS_NAME="simple-legend",this.onHide=function(){},this.onShow=function(){},this.items=[],this},SimpleLegend.prototype.init=function(e){var t=new XMLHttpRequest,n=0,r="",i,s,o,u=this.config,a=this;t.onreadystatechange=function(f){t.readyState===4&&(t.status===200?(s=JSON.parse(t.response),r+='<div id="'+u.id+'" class="'+a.CLASS_NAME+'">',u.title&&(r+='<div id="'+u.id+'-title" class="simple-legend-title">'+u.title+"</div>"),i=u.layers.map(function(e){return e.id}),o=s.layers.filter(function(e){return i.indexOf(e.layerId)>-1}),o.forEach(function(e){e.config=u.layers.filter(function(t){return t.id===e.layerId},this)[0],e.legend.forEach(function(e,t){var i=u.id+"-layer-"+n+"-"+t,s=e.label;a.items.push(i),u.layers[n].labels!==undefined&&u.layers[n].labels[t]&&(s=u.layers[n].labels[t]),r+='<div id="'+i+'" class="simple-legend-layer">'+'<img class="simple-legend-image" src="data:image/png;base64,'+e.imageData+'" height="'+e.height+'px" width="'+e.width+'px">'+'<span class="simple-legend-label">'+s+"</span>"+"</div>"}),n+=1}),u.title&&(r+="</div>"),r+="</div>",document.getElementById(u.parentId).insertAdjacentHTML("afterbegin",r),e&&e.bind(a)()):console.log("Error"))},t.addEventListener("error",function(e){e&&console.log(e)},!1),t.open("GET",u.url,!0),t.send()},SimpleLegend.prototype.show=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="block"),this.onShow(),this},SimpleLegend.prototype.hide=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="none"),this.onHide(),this},SimpleLegend.prototype.filterItem=function(e){return this.items.forEach(function(t,n){n===e?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}),this},SimpleLegend}),define("map/Map",["dojo/Evented","dojo/_base/declare","dojo/on","dojo/dom","dojo/topic","dijit/registry","dojo/_base/array","dojo/dom-construct","map/config","analysis/WizardHelper","map/SuitabilityImageServiceLayer","map/SimpleLegend","esri/map","esri/config","esri/InfoTemplate","esri/layers/GraphicsLayer","esri/layers/RasterFunction","esri/layers/ImageParameters","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/dijit/Legend","esri/dijit/Geocoder","esri/dijit/Scalebar","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/dijit/BasemapGallery"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k){var L=t([e],{element:"map",constructor:function(e){t.safeMixin(this,e),this.addConfigurations(),this.createMap()},addConfigurations:function(){},createMap:function(){var e=this;e.map=new h(this.element,{basemap:this.basemap,center:[this.centerX,this.centerY],sliderPosition:this.sliderPosition,zoom:this.zoom}),e.map.on("load",function(){e.mapLoaded(),e.map.resize(),e.emit("map-ready",{})})},mapLoaded:function(){this.map.graphics.clear(),this.addWidgets(),this.addLayers()},addWidgets:function(){var e,t,n,r,i,s={},o,f,l,h,p;u.create("div",{id:"home-button","class":"home-button"},document.querySelector(".esriSimpleSliderIncrementButton"),"after"),e=new N({map:this.map},"home-button"),e.startup(),i=new k({map:this.map,showArcGISBasemaps:!0},"basemap-gallery"),i.startup(),n=new C({map:this.map,highlightLocation:!1},"location-widget"),n.startup(),r=new x({map:this.map,autoComplete:!0,arcgisGeocoder:{placeholder:"Enter address or region"}},"simple-geocoder"),r.startup(),t=new S({map:this.map,layerInfos:[],autoUpdate:!0},"legend"),t.startup(),o=new T({map:this.map,scalebarUnit:"metric"}),l=new c(a.simpleLegends.settle),l.init(l.hide),f=new c(a.simpleLegends.road),f.init(f.hide),h=new c(a.simpleLegends.poBounds),h.init(h.hide),p=new c(a.simpleLegends.concessions),p.init(p.hide),s.road=f,s.settle=l,s.poBounds=h,s.concessions=p,this.map._simpleLegends=s},addLayers:function(){var e,t,r,u,f,c,h,p,d,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K=this;t=new g,t.layerOption=g.LAYER_OPTION_SHOW,t.layerIds=a.fires.defaultLayers,t.format="png32",e=new E(a.fires.url,{imageParameters:t,id:a.fires.id,visible:!1}),u=new g,u.layerOption=g.LAYER_OPTION_SHOW,u.layerIds=[],u.format="png32",r=new E(a.legendLayer.url,{imageParameters:u,id:a.legendLayer.id,visible:!1}),c=new y,c.renderingRule=new m({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:a.forma.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:a.forma.defaultRange,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"}),f=new b(a.forma.url,{imageServiceParameters:c,id:a.forma.id,visible:!1,opacity:1}),S=new y,S.renderingRule=new m({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:a.loss.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:a.loss.defaultRange,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"}),d=new b(a.loss.url,{imageServiceParameters:S,id:a.loss.id,visible:!1,opacity:1}),h=new w(a.gain.url,{id:a.gain.id,visible:!1}),p=new b(a.gainHelper.url,{id:a.gainHelper.id,visible:!1}),x=new b(a.tcd.url,{id:a.tcd.id,visible:!1}),T=new b(a.primForest.url,{id:a.primForest.id,visible:!1}),_=new l(a.suit.url,{id:a.suit.id,visible:!1}),C=new g,C.layerOption=g.LAYER_OPTION_SHOW,C.layerIds=[],C.format="png32",N=new E(a.ifl.url,{imageParameters:C,id:a.ifl.id,visible:!1}),L=new g,L.layerOption=g.LAYER_OPTION_SHOW,L.layerIds=[],L.format="png32",k=new E(a.oilPerm.url,{imageParameters:L,id:a.oilPerm.id,visible:!1}),W=new g,W.layerOption=g.LAYER_OPTION_SHOW,W.layerIds=[a.mill.layerId],W.format="png32",X=new E(a.mill.url,{imageParameters:W,id:a.mill.id,visible:!1}),A=new w(a.pal.url,{id:a.pal.id,visible:!1}),O=new g,O.layerOption=g.LAYER_OPTION_SHOW,O.layerIds=[a.palHelper.layerId],O.format="png32",M=new E(a.palHelper.url,{imageParameters:O,id:a.palHelper.id,visible:!1}),U=new g,U.layerOption=g.LAYER_OPTION_SHOW,U.layerIds=[a.biodiversity.layerId],U.format="png32",z=new E(a.biodiversity.url,{imageParameters:U,id:a.biodiversity.id,visible:!1}),P=new g,P.layerOption=g.LAYER_OPTION_SHOW,P.layerIds=[],P.format="png32",D=new E(a.opsd.url,{imageParameters:P,id:a.opsd.id,visible:!1}),B=new g,B.layerOption=g.LAYER_OPTION_SHOW,B.layerIds=a.overlays.defaultLayers,B.format="png32",H=new E(a.overlays.url,{imageParameters:B,id:a.overlays.id,visible:!1}),q=new g,q.layerOption=g.LAYER_OPTION_SHOW,q.layerIds=[],q.format="png32",R=new E(a.adminUnitsLayer.url,{imageParameters:q,id:a.adminUnitsLayer.id,visible:!1}),J=new v({id:a.wizardGraphicsLayer.id}),j=new v({id:a.customGraphicsLayer.id}),app.map.addLayers([r,x,T,N,D,_,k,A,M,z,f,d,h,p,e,R,X,H,J,j]),n.once(app.map,"layers-add-result",function(e){K.emit("layers-loaded",{response:e});var t=o.map(e.layers,function(e){return{layer:e.layer}});t=o.filter(t,function(e){return e.layer.url?e.layer.url.search("ImageServer")<0&&e.layer.id.search("Gain")<0&&e.layer.id!==a.adminUnitsLayer.id:!1}),s.byId("legend").refresh(t)}),e.on("error",this.addLayerError),f.on("error",this.addLayerError),d.on("error",this.addLayerError),h.on("error",this.addLayerError),p.on("error",this.addLayerError),x.on("error",this.addLayerError),T.on("error",this.addLayerError),_.on("error",this.addLayerError),N.on("error",this.addLayerError),k.on("error",this.addLayerError),A.on("error",this.addLayerError),M.on("error",this.addLayerError),D.on("error",this.addLayerError),R.on("error",this.addLayerError),H.on("error",this.addLayerError),j.on("error",this.addLayerError),X.on("error",this.addLayerError),z.on("error",this.addLayerError),_.on("image-ready",function(){i.publish("customSuitabilityImageReady")})},addLayerError:function(e){console.error(e)}});return L}),define("map/Finder",["dojo/on","dojo/dom","dojo/Deferred","dojo/promise/all","map/config","map/MapModel","analysis/WizardHelper","esri/graphic","dojo/_base/array","esri/InfoTemplate","esri/geometry/Point","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/geometry/webMercatorUtils","esri/symbols/PictureMarkerSymbol"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){return{searchAreaByCoordinates:function(){var e={},n,r,i=!1,o="You did not enter a valid value.  Please check that your location values are all filled in and nubmers only.",f=new d("app/css/images/RedStickpin.png",32,32),c={},h,v,m=function(e){return i||(i=isNaN(parseInt(e))),isNaN(parseInt(e))?0:parseInt(e)},g=function(){var e=0;return a.forEach(app.map.graphics.graphics,function(t){t.attributes&&t.attributes.locatorValue&&(e=Math.max(e,parseInt(t.attributes.locatorValue)))}),e};s.get("showDMSInputs")?(e.dlat=m(t.byId("degreesLatInput").value),e.mlat=m(t.byId("minutesLatInput").value),e.slat=m(t.byId("secondsLatInput").value),e.dlon=m(t.byId("degreesLonInput").value),e.mlon=m(t.byId("minutesLonInput").value),e.slon=m(t.byId("secondsLonInput").value),n=e.dlat+e.mlat/60+e.slat/3600,r=e.dlon+e.mlon/60+e.slon/3600):(n=m(t.byId("latitudeInput").value),r=m(t.byId("longitudeInput").value)),i?alert(o):(h=p.geographicToWebMercator(new l(r,n)),c.locatorValue=g(),c.id="LOCATOR_"+c.locatorValue,v=new u(h,f,c),app.map.graphics.add(v),app.map.centerAndZoom(h,7),s.set("showClearPinsOption",!0))},performIdentify:function(e){var t=e.mapPoint,n=[],o=[],u=this,f,l;app.map.infoWindow.clearFeatures(),l=app.map.getLayer(i.fires.id),l&&l.visible&&n.push(u.identifyFires(t)),f=app.map.getLayer(i.palHelper.id),l=app.map.getLayer(i.pal.id),l&&f&&(l.visible||f.visible)&&n.push(u.identifyWDPA(t)),l=app.map.getLayer(i.oilPerm.id),l&&l.visible&&n.push(u.identifyConcessions(t)),l=app.map.getLayer(i.adminUnitsLayer.id),l&&l.visible&&n.push(u.identifyWizardDynamicLayer(t)),l=app.map.getLayer(i.mill.id),l&&l.visible&&n.push(u.identifyMillPoints(t)),l=app.map.getLayer(i.customGraphicsLayer.id),l&&l.visible&&n.push(u.getCustomGraphics(e));if(n.length===0)return;if(s.get("drawToolsEnabled"))return;r(n).then(function(e){a.forEach(e,function(e){switch(e.layer){case"Fires":o=o.concat(u.setFireTemplates(e.features));break;case"WDPA":o=o.concat(u.setWDPATemplates(e.features));break;case"Concessions":o=o.concat(u.setConcessionTemplates(e.features));break;case"WizardDynamic":o=o.concat(u.setWizardTemplates(e.features));break;case"MillPoints":o=o.concat(u.setMillPointTemplates(e.features));break;case"CustomGraphics":o.push(u.setCustomGraphicTemplates(e.feature));break;default:}}),o.length>0&&(app.map.infoWindow.setFeatures(o),app.map.infoWindow.show(t))})},identifyFires:function(e){var t=new n,r=new c(i.fires.url),s=new h;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=[0,1,2,3],s.layerOption=h.LAYER_OPTION_VISIBLE,r.execute(s,function(e){e.length>0?t.resolve({layer:"Fires",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setFireTemplates:function(e){var t,n=[];return a.forEach(e,function(e){t=new f(e.layerName,i.fires.infoTemplate.content),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyWDPA:function(e){var t=new n,r=new c(i.oilPerm.url),s=new h;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=[25],r.execute(s,function(e){e.forEach(function(e){e.feature.layer="WDPA"}),e.length>0?t.resolve({layer:"WDPA",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWDPATemplates:function(e){var t,n=[];return a.forEach(e,function(e){t=new f(e.value,i.pal.infoTemplate.content),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyConcessions:function(e){var t=new n,r=new c(i.oilPerm.url),s=new h;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=app.map.getLayer(i.oilPerm.id).visibleLayers,s.layerOption=h.LAYER_OPTION_VISIBLE,s.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(s,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="Concessions-"+e.layerId}),t.resolve({layer:"Concessions",features:e})):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setConcessionTemplates:function(e){var t,n=[],r=this;return a.forEach(e,function(e){e.layerId===27?(t=new f(e.value,i.rspoPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='RSPO Oil palm concession' data-id='${OBJECTID}'>"+"Analyze this area</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):e.layerId===16?console.log("Finder >>> setConcessionTemplates"):(t=new f(e.value,i.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='${TYPE}' data-id='${OBJECTID}'>"+"Analyze this area</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature))}),n},identifyWizardDynamicLayer:function(e){var t=new n,r=new c(i.adminUnitsLayer.url),s=app.map.getLayer(i.adminUnitsLayer.id),o=new h,u=[];return u[7]="1 = 1",u[13]=s.layerDefinitions[13],o.tolerance=3,o.returnGeometry=!1,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=s.visibleLayers,o.layerDefinitions=u,o.layerOption=h.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.length>0?t.resolve({layer:"WizardDynamic",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWizardTemplates:function(e){var t,n=[],r=this;return a.forEach(e,function(e){e.layerId===7?t=new f(e.value,i.adminUnitsLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+"${NAME_2}' data-type='AdminBoundary' data-id='${OBJECTID}'>"+"Analyze this area</button></div>"):t=new f(e.value,i.certificationSchemeLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='CertScheme' data-id='${OBJECTID}'>"+"Analyze this area</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyMillPoints:function(e){var t=new n,r=new c(i.mill.url),s=app.map.getLayer(i.mill.id),o=new h,u=[];return u[0]="1 = 1",o.tolerance=3,o.returnGeometry=!0,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=s.visibleLayers,o.layerDefinitions=u,o.layerOption=h.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.forEach(function(e){e.feature.layer="MillPoints"}),e.length>0?t.resolve({layer:"MillPoints",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setMillPointTemplates:function(e){var t,n=[],r=this;return a.forEach(e,function(e){t=new f(e.value,i.mill.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+"${Mill_name}' data-type='MillPoint' data-id='${Entity_ID}'>"+"Analyze this area</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},getCustomGraphics:function(e){var t=new n;return e.graphic&&e.graphic._layer.id===i.customGraphicsLayer.id?t.resolve({layer:"CustomGraphics",feature:e.graphic}):t.resolve(!1),t.promise},setCustomGraphicTemplates:function(e){var t=e.attributes.WRI_label,n;return n=new f(t,i.customGraphicsLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+t+"' data-type='CustomGraphic' data-id='${WRI_ID}'>"+"Analyze this area</button></div>"),e.setInfoTemplate(n),e},createFormattingFunctions:function(){window.checkAvailable=function(e,t,n){return n[t]===undefined||n[t]==="Null"?"N/A":n[t]}},setupInfowindowListeners:function(){var n;e(app.map.infoWindow,"selection-change",function(){setTimeout(function(){t.byId("popup-analyze-area")&&(n&&n.remove(),n=e(t.byId("popup-analyze-area"),"click",o.analyzeAreaFromPopup.bind(o)))},0)}),e(app.map.infoWindow,"hide",function(){n&&n.remove()})}}}),function(e,t){e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var n={},r=1e3/60;n.fadeIn=function(t,n,i){function a(){o.style.opacity=1*o.style.opacity+u,o.style.opacity<1?e.requestAnimationFrame(a):(s=t.shift(),o=document.getElementById(s),o?e.requestAnimationFrame(a):typeof i=="function"&&i())}Object.prototype.toString.call(t)!=="[object Array]"&&(t=[t]);var s=t.shift(),o=document.getElementById(s),u=r/(n.duration||500);e.requestAnimationFrame(a)},typeof define=="function"&&define.amd?define("utils/Animator",[],function(){return n}):typeof module=="object"&&module.exports?module.exports=n:e.animator=n}(window,document,define),define("components/Check",["react","dojo/topic","dojo/dom-class","utils/Hasher","dijit/form/HorizontalSlider"],function(e,t,n,r,i){return e.createClass({getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=r.getLayers(),n=e.indexOf(this.props.key)>-1,s=this;n&&(this.setState({active:n}),this.props.useRadioCallback||this.props.key==="suit"?t.publish("toggleLayer",this.props.key):requestAnimationFrame(function(){t.publish("updateLayer",s.props)})),document.getElementById(this.props.key+"_slider")&&(new i({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){t.publish("changeLayerTransparency",s.props.key,s.props.layerType,e)}},this.props.key+"_slider")).startup()},toggle:function(e){!n.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(e){document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.visible?"":" hidden");return e.DOM.li({className:t,"data-layer":this.props.key},e.DOM.div({onClick:this.toggle,id:this.props.key+"_checkbox"},e.DOM.span({className:"custom-check"},e.DOM.span({})),e.DOM.a({className:"layer-title"},this.props.title),this.props.title!=="Loss"&&this.props.title!=="Gain"&&this.props.infoDivClass!==undefined?e.DOM.span({className:"layer-info-icon",onClick:this.showInfo}):null,e.DOM.p({className:"layer-sub-title"},this.props.subtitle),e.DOM.div({title:"Layer Transparency",className:"sliderContainer "+(this.state.active?"":"hidden")},e.DOM.div({id:this.props.key+"_slider"}))))}})}),define("components/Radio",["react","dojo/topic","dojo/dom-class","utils/Hasher","components/Check","dijit/form/HorizontalSlider"],function(e,t,n,r,i,s){var o=e.createClass({getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=r.getLayers(),n=e.indexOf(this.props.key)>-1,i=this;n&&(t.publish("showLayer",this.props.key),this.setState({active:n})),document.getElementById(this.props.key+"_slider")&&!this.props.noSlider&&(new s({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){t.publish("changeLayerTransparency",i.props.key,i.props.layerType,e)}},this.props.key+"_slider")).startup()},toggle:function(e){!n.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(e){document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.visible?"":" hidden");return e.DOM.li({className:t,"data-layer":this.props.key,"data-name":this.props.filter},e.DOM.div({onClick:this.toggle},e.DOM.span({className:"radio-icon"},e.DOM.span({})),e.DOM.a({className:"layer-title"},this.props.title),this.props.title!=="None"&&this.props.title!=="Loss"&&this.props.title!=="Gain"&&!this.props.noSlider?e.DOM.span({className:"layer-info-icon",onClick:this.showInfo}):null,e.DOM.p({className:"layer-sub-title"},this.props.subtitle)),this.props.children?e.DOM.ul({},this.props.children.map(this._mapper)):this.props.layerType!=="none"&&!this.props.noSlider?e.DOM.div({title:"Layer Transparency",className:"sliderContainer "+(this.state.active?"":"hidden")},e.DOM.div({id:this.props.key+"_slider"})):null)},_mapper:function(e){return e.visible=this.state.active,e.handle=this.props.handle,e.postCreate=this.props.postCreate,e.useRadioCallback=!0,e.type==="radio"?new o(e):new i(e)}});return o}),define("components/LayerList",["react","dojo/topic","utils/Hasher","components/Radio","components/Check"],function(e,t,n,r,i){var s=[],o=e.createClass({getInitialState:function(){return{title:this.props.title,filter:this.props.filter}},componentDidMount:function(){var e=["forest-change","forest-cover","agro-suitability"],t,n;e.forEach(function(e){n=!1,s.forEach(function(r){r.props.filter===e&&(r.props.key.search("none_")>-1&&(t=r),r.state.active&&(n=!0))}),n||t.setState({active:!0})})},componentWillReceiveProps:function(e,t){this.setState(e)},render:function(){return e.DOM.div({className:"smart-list"},e.DOM.div({className:"filter-list-title"},this.props.title),e.DOM.div({className:"layer-line"}),e.DOM.ul({className:"filter-list"},this.props.items.map(this._mapper,this)))},_mapper:function(e){return e.visible=this.state.filter===e.filter,e.handle=this._handle,e.postCreate=this._postCreate,e.type==="radio"?new r(e):new i(e)},_handle:function(e){e.props.type==="radio"?this._radio(e):this._check(e)},_check:function(e){var r=!e.state.active;e.setState({active:r}),n.toggleLayers(e.props.key),e.props.useRadioCallback||e.props.key==="suit"?t.publish("toggleLayer",e.props.key):requestAnimationFrame(function(){t.publish("updateLayer",e.props)})},_radio:function(e){var r,i;s.forEach(function(t,n){t.props.filter===e.props.filter&&t.state.active&&(r=t)}),r?(i=r.props.key!==e.props.key,i&&(r.props.type!=="check"&&(r.setState({active:!1}),r.props.key.search("none_")===-1&&(n.toggleLayers(r.props.key),t.publish("hideLayer",r.props.key)),this._toggleChildren(r,"remove")),e.props.key.search("none_")===-1&&(n.toggleLayers(e.props.key),t.publish("showLayer",e.props.key)))):e.props.key.search("none_")===-1&&(n.toggleLayers(e.props.key),t.publish("showLayer",e.props.key)),e.setState({active:!0}),this._toggleChildren(e,"add")},_toggleChildren:function(e,r){var i=[];e.props.children&&(e.props.children.forEach(function(e){s.forEach(function(t){t.props.key===e.key&&i.push(t)})}),r==="remove"?i.forEach(function(e){e.state.active&&(t.publish("hideLayer",e.props.key),n.removeLayers(e.props.key))}):i.forEach(function(e){e.state.active&&(t.publish("showLayer",e.props.key),n.toggleLayers(e.props.key))}))},_postCreate:function(e){s.push(e)},toggleFormElement:function(e){s.forEach(function(t){t.props.key===e&&t.props.handle(t)})}});return function(t,n){return e.renderComponent(new o(t),document.getElementById(n))}}),define("utils/Loader",["dojo/Deferred"],function(e){return{getTemplate:function(t){var n=new e,r="./app/templates/"+t+".html",i;return i=new XMLHttpRequest,i.onreadystatechange=function(){i.readyState===4&&i.status===200&&n.resolve(i.responseText)},i.open("GET",r,!0),i.send(),n.promise},loadCSS:function(e){var t=doc.createElement("link"),n=doc.getElementsByTagName("head")[0];t.rel="stylesheet",t.type="text/css",t.href=e,n.appendChild(t)}}}),define("controllers/MapController",["dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","dojo/dom-geometry","dojo/number","map/config","map/Map","map/Finder","map/MapModel","utils/Hasher","utils/Animator","esri/geometry/webMercatorUtils","esri/geometry/Point","map/Controls","map/LayerController","analysis/WizardHelper","components/LayerList","utils/Loader"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){var x=!1,T,N,C=!1,k,L=document.createElement("infoDiv");return{init:function(r){var i=this,s=[];if(x){o.byId("stackContainer").selectChild("mapView");return}x=!0,o.byId("mapView").set("content",r),o.byId("stackContainer").selectChild("mapView");var u=d.getHash("x"),a=d.getHash("y"),g=d.getHash("l"),y={};for(var E in l.mapOptions)y[E]=l.mapOptions[E];u!=undefined&&u!=""&&(y.centerX=u),u!=undefined&&u!=""&&(y.centerY=a),u!=undefined&&u!=""&&(y.zoom=g),k=new c(y),app.map=k.map,k.on("layers-loaded",function(){var e=d.getHash("f"),t,n,r,i;if(e!==undefined){t=e.split("-"),n=t[0];switch(n){case"WDPA":i={layer:n,url:l.pal.url+"/0",objectId:t[1],templateFunction:h.setWDPATemplates},b.setSelectedFeature(i);break;case"MillPoints":i={layer:n,url:l.mill.url+"/0",objectId:t[1],templateFunction:h.setMillPointTemplates},b.setSelectedFeature(i);break;case"Concessions":i={layer:n+"-"+t[1],url:l.concession.url+"/"+t[1],objectId:t[2],templateFunction:h.setConcessionTemplates},b.setSelectedFeature(i)}}}),k.on("map-ready",function(){var e=m.webMercatorToGeographic(k.map.extent),t=f.round(e.getCenter().x,2),n=f.round(e.getCenter().y,2);d.setHash("x",t),d.setHash("y",n),d.setHash("l",5),T=p.initialize("map-container"),i.renderComponents(),i.bindUIEvents();var r=d.getHash("wiz");r!==undefined&&r==="open"&&w.toggleWizard()}),app.map.on("zoom-end",b.checkZoomDependentLayers.bind(b)),app.map.on("click",h.performIdentify.bind(h)),h.createFormattingFunctions(),h.setupInfowindowListeners(),n(".gfw .map-layer-controls li").forEach(function(e){s.push(e.id)}),v.fadeIn(s,{duration:100});try{addthis.init()}catch(S){t.byId("sharing-modal").innerHTML="Sorry.  AddThis is temporarily down."}e(app.map.infoWindow,"hide",function(){d.removeKey("f")});var N,C=["attributes","geometry","infoTemplate","symbol"],L=e.pausable(app.map.infoWindow,"selection-change",function(){if(this.features){if(JSON.stringify(this.features,C)!=JSON.stringify(N,C)){var e=[],t,n,r=this;r.features.forEach(function(r){n=r.attributes.Mill_name!=undefined,n?(t=!0,e.unshift(r)):e.push(r)}),t&&(L.pause(),r.hide(),r.clearFeatures(),r.setFeatures(e),N=e,r.show(r.location,{closestFirst:!1}),L.resume())}d.setHash("f",this.getSelectedFeature().layer+"-"+this.getSelectedFeature().attributes.OBJECTID)}else d.removeKey("f")})},bindUIEvents:function(){var r=this;e(app.map,"mouse-move",function(e){p.set("currentLatitude",e.mapPoint.getLatitude().toFixed(4)),p.set("currentLongitude",e.mapPoint.getLongitude().toFixed(4))}),e(app.map,"extent-change",function(e){var t=e.delta,n=m.webMercatorToGeographic(e.extent),r=e.levelChange,i=e.lod,s=e.target,o=f.round(n.getCenter().x,2),u=f.round(n.getCenter().y,2);d.setHash("x",o),d.setHash("y",u),d.setHash("l",i.level)}),e(t.byId("locator-widget-button"),"click",function(){p.set("showBasemapGallery",!1),p.set("showSharingOptions",!1),p.set("showLocatorOptions",!p.get("showLocatorOptions"))}),e(t.byId("basemap-gallery-button"),"click",function(){p.set("showLocatorOptions",!1),p.set("showSharingOptions",!1),p.set("showBasemapGallery",!p.get("showBasemapGallery"))}),e(t.byId("share-button"),"click",function(){p.set("showLocatorOptions",!1),p.set("showBasemapGallery",!1),p.set("showSharingOptions",!p.get("showSharingOptions"))}),e(t.byId("dms-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(p.set("showDMSInputs",!0),p.set("showLatLongInputs",!1))}),e(t.byId("lat-long-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(p.set("showDMSInputs",!1),p.set("showLatLongInputs",!0))}),e(t.byId("search-option-go-button"),"click",function(){h.searchAreaByCoordinates()}),e(t.byId("clear-search-pins"),"click",function(){k.map.graphics.clear(),p.set("showClearPinsOption",!1)}),n(".map-layer-controls li").forEach(function(t){e(t,"mouseover",function(e){r.toggleLayerList(t)})}),e(t.byId("master-layer-list"),"mouseleave",function(){s.set("master-layer-list","opacity",0),s.set("master-layer-list","left","-1000px")}),n(".fires_toolbox .toolbox-list li").forEach(function(t){e(t,"click",y.toggleFiresLayerOptions)}),e(t.byId("high-confidence"),"change",y.toggleFiresConfidenceLevel),n(".gfw .overlays-container .overlays-checkbox").forEach(function(t){e(t,"click",y.toggleOverlays)}),e(t.byId("legend-title"),"click",function(){y.toggleLegendContainer()}),e(t.byId("reset-suitability"),"click",function(){y.resetSuitabilitySettings()}),e(t.byId("export-suitability"),"click",function(){y.exportSuitabilitySettings()}),e(t.byId("close-suitability"),"click",function(){r.toggleItemInLayerList("suit")}),e(t.byId("wizard-tab"),"click",function(){w.toggleWizard()}),n(".suitability-accordion .slider-name .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})}),n(".suitability-accordion .criteria-separator .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})})},toggleLayerList:function(e){var t=e.dataset?e.dataset.filter:e.getAttribute("data-filter"),n=e.dataset?e.dataset.class:e.getAttribute("data-class"),r=a.position(e,!0),o=180,u;u=(r.w-o)/2,s.set("master-layer-list","left",r.x+u+"px"),v.fadeIn("master-layer-list",{duration:100}),i.remove("master-layer-list"),i.add("master-layer-list",n),N&&N.setProps({title:e.children[0].innerHTML,filter:t})},renderComponents:function(){var e=d.getHash();e.lyrs===undefined&&(d.toggleLayers("tcc"),d.toggleLayers("loss")),y.generateSuitabilitySliders(),N=new E({items:l.layersUI},"master-layer-list"),y.generateTimeSliders()},toggleItemInLayerList:function(e){N.toggleFormElement(e)},centerChange:function(e,t,n){if(!x)return;var r=m.webMercatorToGeographic(k.map.extent),i=m.webMercatorToGeographic(k.map.extent),e=f.round(i.getCenter().x,2),t=f.round(i.getCenter().y,2),s=k.map.getLevel(),o=d.getHash(),u=parseFloat(o.x)!=e||parseFloat(o.y)!=t||parseInt(o.l)!=s;if(u){var a=m.geographicToWebMercator(new g(parseFloat(o.x),parseFloat(o.y)));k.map.centerAndZoom(a,parseInt(o.l))}},showInfoPanel:function(e){if(typeof e=="object"){var t=e;y.createDialogBox(t)}else if(C){var t=L.querySelector("."+e);y.createDialogBox(t)}else S.getTemplate("data").then(function(t){C=!0,L.innerHTML=t;var n=L.querySelector("."+e);y.createDialogBox(n)})}}}),define("utils/NavListController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dojo/hash","dojo/io-query","utils/Hasher"],function(e,t,n,r,i,s,o){return{loadNavControl:function(e){function i(e,i){t(".nav-item-a.selected ").forEach(function(e){e.parentElement.id.indexOf(i)>-1&&(n.remove(e,"selected"),r.set(e.parentElement.id.match(/(.*)Nav/)[1],"display","none"),n.remove(e.parentElement.id.match(/(.*)Nav/)[1],"selected"))}),n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block");var s=e.id;s=s.replace("Nav","").replace(i,""),o.setHash("n",s)}t(".nav-item").forEach(function(t){t.id.indexOf(e)>-1&&(t.onclick=function(){i(t,e)})})},loadNavView:function(o){var u=s.queryToObject(i()),a=!0;u.hasOwnProperty("n")&&t(".nav-item").forEach(function(e){e.id.indexOf(o)>-1&&u.n===e.id.replace("Nav","").replace(o,"")&&(n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block"),n.add(e.id.match(/(.*)Nav/)[1],"selected"),a=!1)}),a&&(t(".nav-item-a.default-selection").forEach(function(e){e.parentElement.id.indexOf(o)>-1&&n.add(e,"selected")}),t(".nav-subpage.default-selection").forEach(function(e){e.id.indexOf(o)>-1&&r.set(e,"display","block")})),u.hasOwnProperty("s")&&e.byId(u.s)&&(e.byId(u.s).checked=!0)},urlControl:function(e){var n={};n.v=e;var r=t(".nav-item-a.selected");r.length>0?r.forEach(function(t){t.parentElement.id.indexOf(e)>-1&&(n.n=t.parentElement.id.replace("Nav","").replace(e,""))}):n.n&&delete n.n;var i=document.getElementsByTagName("input");for(var s=0;s<i.length;s++)i[s].checked?n.s=i[s].id:n.s&&delete n.s;var u=!0,i=document.getElementsByTagName("input");for(var s=0;s<i.length;s++)i[s].checked&&(n.s=i[s].id,u=!1);var a=e.indexOf("data")>-1;(u||!a)&&n.s&&delete n.s,o.setHashFromState(n)}}}),define("controllers/Header",["dojo/on","dojo/dom","dojo/query","dojo/dom-class","dijit/Dialog","utils/Hasher","main/config","utils/NavListController"],function(e,t,n,r,i,s,o,u){var a="large",f=!1;return{init:function(e){if(f)return;this.addSubscriptionDialog(),t.byId("app-header").innerHTML=t.byId("app-header").innerHTML+e,this.bindEvents(),f=!0},setState:function(e){r.remove("app-header",a),r.add("app-header",e),a=e},bindEvents:function(){var t=this;n(".header .nav-link").forEach(function(n){e(n,"click",function(e){var n=e.target?e.target:e.srcElement,r=n.dataset?n.dataset.view:n.getAttribute("data-view"),i=n.dataset?n.dataset.external:n.getAttribute("data-external");t.updateView(r,i,f)})}),n("#dijit_Dialog_0 > div.dijitDialogPaneContent > p > a").forEach(function(n){e(n,"click",function(e){var n=e.target?e.target:e.srcElement,r="map",i=!1;$("#dijit_Dialog_0 > div.dijitDialogTitleBar > span.dijitDialogCloseIcon").click(),t.updateView(r,i,f)})})},updateView:function(e,t,i){if(t==="true"){this.redirectPage(e);return}n(".header .nav-link.selected").forEach(function(e){r.remove(e,"selected")}),n('.nav-link-list [data-view="'+e+'"]').forEach(function(e){r.add(e,"selected")}),i&&s.setHash("v",e)},toggleForView:function(e){e==="map"?this.setForMap():e==="home"?this.setForHome():this.setForGenericView()},setForMap:function(){r.add("nav-content","outer"),r.remove("nav-content","inner"),r.add("app-header","mapView"),r.remove("app-header","generalView")},setForGenericView:function(){this.setForHome(),r.remove("app-header","mapView"),r.add("app-header","generalView"),$(".footerModesContainer").hide()},setForHome:function(){r.add("nav-content","inner"),r.remove("nav-content","outer"),r.remove("app-header","mapView"),r.remove("app-header","generalView"),$(".footerModesContainer").show()},redirectPage:function(e){window.open(o.urls[e],"_blank")},addSubscriptionDialog:function(){var t=new i({style:"width: 300px; text-align: center;"}),r=this,s="<p>To sign up for clearance or fire alerts, go to the Map and select an area to analyze. You can sign up for alerts on that area through the Subscribe button on the analysis report.</p>";t.setContent(s),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").html(function(e,t){return t.replace(/\b(Map)\b/g,'<a style="cursor:pointer;color:#e98300;"><strong>Map</strong></a>')}),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-top","-30px"),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-bottom","-10px"),n("#app-footer > div.footerModesContainer > div > div > div:nth-child(2) > div > div:nth-child(5) > a").forEach(function(n){e(n,"click",function(e){t.show()})})}}}),define("models/FooterModel",["dojo/_base/declare","dojo/dom","main/config","knockout"],function(e,t,n,r){var i=e(null,{constructor:function(e){var n={};n.vm={};var i=n.vm;i.root=e,n.applyBindings=function(e){r.applyBindings(i,t.byId(e))}}});return i.get=function(e){return e==="model"?i.vm:i.vm[e]()},i.set=function(e,t){i.vm[e](t)},i.applyTo=function(e){r.applyBindings(i.vm,document.getElementById(e))},i.initialize=function(e){return i.instance||(i.instance=new i(e)),i.instance},i}),define("controllers/Footer",["dojo/dom","dojo/dom-style","models/FooterModel"],function(e,t,n){var r=!1;return{init:function(t){if(r)return;r=!0,e.byId("app-footer").innerHTML=t+e.byId("app-footer").innerHTML,setTimeout(function(){var e=document.createElement("script"),t=document.getElementsByTagName("body")[0];e.setAttribute("src","https://cdn.rawgit.com/simbiotica/gfw_assets/bce5294264c2ecc25a9fcf46ed356116564f5c2d/src/header-loader.js"),e.setAttribute("id","loader-gfw"),e.setAttribute("data-current",".shape-commodities"),t.appendChild(e)},0)},toggle:function(e){e?t.set("app-footer","display","none"):t.set("app-footer","display","block")}}}),define("models/HomeModel",["dojo/_base/declare","main/config","knockout"],function(e,t,n){var r=e(null,{constructor:function(e){r.vm={},r.root=e,r.vm.homeModeOptions=n.observableArray(t.homeModeOptions),r.vm.modeSelect=function(e,t){var n=e.eventName;require(["controllers/HomeController"],function(e){e.handleModeClick(n)})},r.vm.dotSelect=function(e,t){require(["controllers/HomeController"],function(t){t.handleDotClick(e)})},n.applyBindings(r.vm,document.getElementById(e))}});return r.get=function(e){return e==="model"?r.vm:r.vm[e]()},r.set=function(e,t){r.vm[e](t)},r.applyTo=function(e){n.applyBindings(r.vm,document.getElementById(e))},r.initialize=function(e){return r.instance||(r.instance=new r(e)),r.instance},r}),define("controllers/HomeController",["main/config","dojo/dom","dojo/cookie","dijit/Dialog","dijit/registry","dojo/_base/array","models/HomeModel"],function(e,t,n,r,i,s,o){var u={},a=!1,f="homeView",l={viewId:"homeView",viewName:"home"},c=!1;return u.startModeAnim=function(){var e=0,t=function(e){var t=o.vm.homeModeOptions(),n=s.map(t,function(t,n){return n===e?t.display=!0:t.display=!1,t});o.vm.homeModeOptions([]),o.vm.homeModeOptions(n)};t(e),require(["dojo/fx","dojo/_base/fx","dojo/query"],function(n,r,i){var s=function(o){var u=i(".modeGroup"),a=u.length,f=n.chain([r.animateProperty({node:u[o],properties:{marginLeft:{start:0,end:-350},opacity:{start:1,end:0}},onEnd:function(){var n;e<a-1?(n=e+1,e++):(n=0,e=0),setTimeout(function(){c||(t(n),setTimeout(function(){c||s(n)},1e3))},250)},units:"px",duration:1e3,delay:2e3})]);f.play()};s(e)})},u.stopModeAnim=function(e){c=!0;if(e){var t=e.id,n=o.vm.homeModeOptions();o.vm.homeModeOptions([]);var r=s.map(n,function(e,n){return t==n?e.display=!0:e.display=!1,o.vm.homeModeOptions.push(e),e})}},{init:function(e){if(a){i.byId("stackContainer").selectChild("homeView");return}a=!0,i.byId("stackContainer").selectChild("homeView"),i.byId("homeView").set("content",e),o.initialize("homeView"),u.startModeAnim(),this.showSplashScreen()},handleModeClick:function(e){require(["controllers/Header"],function(t){e=="goToMap"?t.updateView("map",!1,!0):e=="goToFires"?t.updateView("fires","true",!0):e=="goToBlogs"?t.updateView("blog","true",!0):e=="goToZSL"&&t.updateView("SPOTT","true",!0)})},handleDotClick:function(e){u.stopModeAnim(e)},showSplashScreen:function(){var t=n("hideSplashScreen"),i,s,o;t||(i="<label><input id='hideSplashScreen' type='checkbox' />&nbsp;&nbsp;Don't ask me again.</label>",s=new r({id:"splashDialog",title:"Welcome to GFW Commodities Analyzer",style:"width: 550px;",content:e.homeDialog.html+i}),s.show(),s.on("cancel",function(){o=document.getElementById("hideSplashScreen").checked,o&&n("hideSplashScreen",o,{expires:31})}))}}}),define("controllers/AboutController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/NavListController"],function(e,t,n,r,i,s){var o=!1;return{init:function(e){if(o){i.byId("stackContainer").selectChild("aboutView");return}o=!0,i.byId("stackContainer").selectChild("aboutView"),i.byId("aboutView").set("content",e);var t="about";s.loadNavControl(t),s.loadNavView(t)}}}),define("controllers/DataController",["dijit/registry","utils/NavListController","utils/Hasher","dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style"],function(e,t,n,r,i,s,o){var u=!1;return{init:function(r){if(u){e.byId("stackContainer").selectChild("dataView");return}u=!0,e.byId("stackContainer").selectChild("dataView"),e.byId("dataView").set("content",r);var i="data";t.loadNavControl(i),t.loadNavView(i);var s=document.getElementsByTagName("input");for(var o=0;o<s.length;o+=1)s[o].onclick=function(){this.checked?n.setHash("s",this.id):n.removeKey("s");for(var e=0;e<s.length;e++)s[e]!==this&&(s[e].checked=!1)};this.initializeCountryDropdowns()},initializeCountryDropdowns:function(){var e=document.getElementsByClassName("source_download_container"),t=document.getElementsByClassName("source_dropdown_body");e.length>0&&[].map.call(e,function(e){e.onchange=function(){[].map.call(t,function(e){e.value!=="none"&&(e.className="source_dropdown_body")});var n=e.options[e.selectedIndex].value;if(n!=="none"){var r=document.getElementById(n);r.className=r.className+" active"}}})}}}),define("controllers/MethodsController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/NavListController"],function(e,t,n,r,i,s){var o=!1;return{init:function(e){if(o){i.byId("stackContainer").selectChild("methodsView");return}o=!0,i.byId("stackContainer").selectChild("methodsView"),i.byId("methodsView").set("content",e);var t="methods";s.loadNavControl(t),s.loadNavView(t)}}}),define("controllers/PublicationsController",["dojo/dom","dijit/registry"],function(e,t){var n=!1;return{init:function(e){if(n){t.byId("stackContainer").selectChild("publicationsView");return}n=!0,t.byId("stackContainer").selectChild("publicationsView"),t.byId("publicationsView").set("content",e)}}}),define("controllers/ViewController",["dojo/dom-class","dojo/query","dojo/io-query","dijit/registry","utils/Loader","controllers/Header","controllers/Footer","controllers/MapController","controllers/HomeController","controllers/AboutController","controllers/DataController","controllers/MethodsController","controllers/PublicationsController","utils/Hasher","utils/NavListController"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v={};return{init:function(e){var t=this;t.load("header",function(n){s.init(n),s.updateView(e,!1),t.load(e)}),t.load("footer",o.init)},load:function(e,t){var n=this;t||(t=this.getCallback(e)),v[e]?(t(),n.viewLoaded(e),r.byId("stackContainer").resize()):(v[e]=!0,i.getTemplate(e).then(function(i){t(i),n.viewLoaded(e),r.byId("stackContainer").resize()}))},viewLoaded:function(t){if(t==="header"||t==="footer")return;o.toggle(t==="map"),s.toggleForView(t),e.remove("app-body"),e.add("app-body",t+"View"),d.urlControl(t)},getCallback:function(e){switch(e){case"home":return a.init.bind(a);case"map":return u.init.bind(u);case"data":return l.init.bind(l);case"methods":return c.init.bind(c);case"about":return f.init.bind(f);case"publications":return h.init.bind(h);default:return}}}}),define("utils/Delegator",["dojo/topic","map/config","map/Controls","map/MapModel","analysis/Query","analysis/config","analysis/WizardHelper","map/LayerController","controllers/MapController","controllers/ViewController"],function(e,t,n,r,i,s,o,u,a,f){return{startListening:function(){e.subscribe("changeView",function(e){f.load(e)}),e.subscribe("toggleWizard",function(){o.toggleWizard()}),e.subscribe("setAdminBoundariesDefinition",function(n){u.setWizardDynamicLayerDefinition(t.adminUnitsLayer,n),n&&i.zoomToFeatures(s.adminUnit.countryBoundaries,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCertificationSchemeDefinition",function(n){u.setWizardDynamicLayerDefinition(t.certificationSchemeLayer,n),n&&i.zoomToFeatures(s.certifiedArea.schemeQuery,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCommercialEntityDefinition",function(n){u.setWizardDynamicLayerDefinition(t.commercialEntitiesLayer,n),n&&i.zoomToFeatures(s.commercialEntity.commodityQuery,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("showMillPoints",function(){u.setWizardDynamicLayerDefinition(t.certificationSchemeLayer),u.setWizardMillPointsLayerDefinition(t.mill)}),e.subscribe("toggleLayer",function(e){var r=t[e];if(r){if(r.toolsNode){var i=app.map.getLayer(r.id).visible?"hide":"show";n.toggleToolbox(r,i)}u.toggleLayers(r)}}),e.subscribe("showLayer",function(e){var r=t[e];r&&(u.showLayer(r),r.toolsNode&&n.toggleToolbox(r,"show"))}),e.subscribe("hideLayer",function(e){var r=t[e];r&&(u.hideLayer(r),r.toolsNode&&n.toggleToolbox(r,"hide"))}),e.subscribe("updateLayer",function(e){if(e.layerType==="tiled"){var n=t[e.key];n&&u.toggleLayers(n)}else e.layerType==="dynamic"&&u.updateLayer(e)}),e.subscribe("changeLayerTransparency",function(e,n,r){var i=t[e];i&&u.changeLayerTransparency(i,n,r)}),e.subscribe("customSuitabilityImageReady",function(){u.hideSuitabilityLoader()}),e.subscribe("showInfoPanel",a.showInfoPanel),e.subscribe("toggleItemInLayerList",a.toggleItemInLayerList),e.subscribe("centerChange",function(e,t,n){a.centerChange(e,t,n)}),e.subscribe("showConcessionsLegend",function(){app.map._simpleLegends.concessions.show()}),e.subscribe("hideConcessionsLegend",function(){app.map._simpleLegends.concessions.hide()}),e.subscribe("filterConcessionsLegendItems",function(e){app.map._simpleLegends.concessions.filterItem(e)})}}}),define("main/Main",["dojox/mobile/parser","main/config","esri/config","esri/urlUtils","dojo/_base/array","dojo/has","utils/Hasher","utils/Helper","utils/Delegator","controllers/ViewController","dijit/layout/ContentPane","dijit/layout/StackContainer"],function(e,t,n,r,i,s,o,u,a,f){return{init:function(){var t=navigator.userAgent;t.search("NT 6.1")>-1?document.body.className+=" windows_7":t.search("NT 6.2")>-1&&(document.body.className+=" windows_8"),s("trident")&&(document.documentElement.className+=" dj_ie"),e.parse(),window.app={},this.applyConfigurations(),this.launchApp()},applyConfigurations:function(){i.forEach(t.corsEnabledServers,function(e){n.defaults.io.corsEnabledServers.push(e)})},launchApp:function(){var e=o.init();u.enableLayout(),a.startListening(),f.init(e)}}}),require(["main/Main"],function(e){e.init()}),define("build/requireConfig",function(){});